var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(e){var g=jQuery;function f(i,j){var h=g.extend(true,{},i,j);delete h.constructor;return h}e.extendWidgetOptions=f;var d=(function(i){__extends(h,i);function h(){i.apply(this,arguments);this._dataOffset=0;this._scrollingState={x:null,y:null,index:0};this._windowResizeTimer=0}h.prototype._createWidget=function(j,k){var l=j&&(b).data.util.isClassInstance(j.data)&&!((typeof wijdatasource==="function")&&(j.data instanceof wijdatasource))&&j.data;if(l){delete j.data}i.prototype._createWidget.apply(this,arguments);if(l){j.data=l;this.option("data",l)}};h.prototype._create=function(){var l=this;if(!this.element.is("table")){throw"invalid markup"}this._windowResizeTimer=0;this._dataOffset=0;this._scrollingState={x:null,y:null,index:0};this._initialized=false;this._destroyed=false;this._rendered=false;this._eventUID=undefined;this._dataViewWrapper=undefined;this._originalHtml=undefined;this._originalAttr=undefined;this._originalCssText=undefined;this._autoHeight=undefined;this._autoWidth=undefined;this._renderCounter=0;this.$superPanelHeader=undefined;this.$topPagerDiv=undefined;this.$bottomPagerDiv=undefined;this.$groupArea=undefined;this.__uid=undefined;this._wijDataView=undefined;this.outerDiv=undefined;this.sketchTable=undefined;this.cellFormatter=undefined;this.rowStyleFormatter=undefined;this.cellStyleFormatter=undefined;this._eventUID=b.grid.getUID();this._spinnerIsActivated=false;this.deficientFilters={};var k=("data" in this.options),m=k&&this.options.data;if(k){delete this.options.data}this.options=g.extend(true,{},this.options);if(k){this.options.data=m}if(window.wijmoApplyWijTouchUtilEvents){g=window.wijmoApplyWijTouchUtilEvents(g)}if(g.isFunction(window.wijmoASPNetParseOptions)){window.wijmoASPNetParseOptions(this.options)}this._initialized=false;this._destroyed=false;this._field("closestCulture",Globalize.findClosestCulture(this.options.culture)||Globalize.findClosestCulture("default"));this._dataViewWrapper=new b.grid.dataViewWrapper(this);this._originalHtml=this.element.html();this._originalAttr={};this._originalCssText=this.element[0].style.cssText;this.element.addClass("wijmo-wijgrid-root");this.element.wrap('<div class="'+this.options.wijCSS.widget+" wijmo-wijgrid "+this.options.wijCSS.content+" "+this.options.wijCSS.cornerAll+'"></div>');this.outerDiv=this.element.parent();var n=this.element[0].style.height,j=this.element[0].style.width;if(n){this.outerDiv.css("height",n)}this._autoHeight=(n==""||n=="auto");if(j){this.outerDiv.css("width",this.element[0].style.width)}this._autoWidth=(j==""||j=="auto");this.element.css({height:"",width:""});if(this.options.disabled){this.disable()}this.cellFormatter=new b.grid.cellFormatterHelper();this.rowStyleFormatter=new b.grid.rowStyleFormatterHelper(this);this.cellStyleFormatter=new b.grid.cellStyleFormatterHelper(this);this._field("viewRenderBounds",{start:0,end:0});if(this._allowVirtualScrolling()){this._field("viewRenderBounds").start=this._scrollingState.index;if(this._serverSideVirtualScrolling()){this._dataOffset=this._scrollingState.index}}if(this.element.wijAddVisibilityObserver){this.element.wijAddVisibilityObserver(function(){if(l._initialized&&!l._destroyed){l.setSize()}},"wijgrid")}this._renderCounter=0};h.prototype._destroy=function(){var k,j=this;try{this._view().dispose();this._detachEvents(true);if(k=this._field("resizer")){k.dispose()}if(k=this._field("frozener")){k.dispose()}if(k=this._field("selectionui")){k.dispose()}if(k=this._field("dragndrop")){k.dispose()}this._dataViewWrapper.dispose();b.grid.remove$dataByPrefix(this.element,this._data$prefix);if(this.element.wijRemoveVisibilityObserver){this.element.wijRemoveVisibilityObserver()}this.element.insertBefore(this.outerDiv);this.outerDiv.remove();this.element.html(this._originalHtml);g.each(this._originalAttr,function(l,m){if(m===undefined){j.element.removeAttr(l)}else{j.element.attr(l,m)}});this.element.removeClass("wijmo-wijgrid-root");this.element[0].style.cssText=this._originalCssText}finally{this._destroyed=true}};h.prototype._init=function(){this.$superPanelHeader=null;this.$topPagerDiv=null;this.$bottomPagerDiv=null;this.$groupArea=null;this._field("closestCulture",Globalize.findClosestCulture(this.options.culture)||Globalize.findClosestCulture("default"));if(!this.options.data){if(!this._field("thead")){this._field("thead",b.grid.readTableSection(this.element,1))}if(!this._field("tfoot")){this._field("tfoot",b.grid.readTableSection(this.element,3))}}this._initialized=this._initialized||false;this.ensureControl(true)};h.prototype._setOption=function(l,n){var o=this["_preset_"+l],k=this.options[l],m,j;if(o!==undefined){n=o.apply(this,[n,k])}m=(n!==k);i.prototype._setOption.apply(this,[l,n]);if(m){j=this["_postset_"+l];if(j!==undefined){j.apply(this,[n,k])}}};h.prototype.columns=function(){return this._field("columns")||[]};h.prototype.currentCell=function(l,j){var n,k=this._view(),m=this._rows();if(arguments.length===0){n=this._field("currentCell");if(!n){this._field("currentCell",n=b.grid.cellInfo.outsideValue)}return n}else{n=(arguments.length===1)?(l)._clone():new b.grid.cellInfo(l,j);if(!n.isEqual(b.grid.cellInfo.outsideValue)){if(!n._isValid()){throw"invalid arguments"}n._clip(this._getDataCellsRange());if(n.rowIndex()>=0){if(!(k._getRowInfo(m.item(n.rowIndex())).type&b.grid.rowType.data)){return}}}n._setGridView(this);this._changeCurrentCell(null,n);return this._field("currentCell")}};h.prototype.data=function(){return this._dataViewWrapper.dataView().getSource()};h.prototype.dataView=function(){return this._dataViewWrapper.dataView()};h.prototype.doRefresh=function(j){if(!g.isPlainObject(j)){j={}}var q,l=this,m=b.grid.EXPANDO,k=j&&j.virtualScrollData;if(!this._initialized){try{this._prepareColumnOptions(this.options.columns,this.options.columnsAutogenerationMode,this._dataViewWrapper.getFieldsInfo(),true,true)}catch(n){throw n}finally{this._ownerise(true);this._initialized=true}}else{}if(!k){this._rebuildLeaves();var p=this._dataViewWrapper.data();var o=this._dataViewWrapper.dataView();g.each(this._field("leaves"),function(){this._totalsValue=(p.totals)?p.totals[this.dataKey]:undefined});this.sketchTable=[];if(p.data&&p.data.length){q=this._field("leaves");g.each(p.data,function(r,s){l.sketchTable.push(l._buildSketchRow(s,q))})}else{if(p.emptyData){q=this._field("visibleLeaves");g.each(p.emptyData,function(r,s){l.sketchTable.push(l._buildSketchRowEmptyDataItem(s,q,r===p.emptyData.length-1))})}}}this._onRendering(j);if(!k){this._refresh(j)}else{this._refreshVirtual(j)}this._onRendered(j);if(j&&g.isFunction(j.afterRefresh)){j.afterRefresh.apply(this,[j])}};h.prototype.beginEdit=function(){return this._beginEditInternal(null)};h.prototype.endEdit=function(){return this._endEditInternal(null)};h.prototype.ensureControl=function(k,j){this._loading();if(!g.isPlainObject(j)){j={data:null,afterRefresh:null,beforeRefresh:null}}j._wijgridMarker=true;if(this._initialized){this._convertWidgetsToOptions()}else{this._prepareColumnOptions(this.options.columns,this.options.columnsAutogenerationMode,this._dataViewWrapper.isDataLoaded()&&this._dataViewWrapper.getFieldsInfo(),this._dataViewWrapper.isDataLoaded(),false);if(!this._dataViewWrapper.isOwnDataView()){(new b.grid.settingsManager(this)).MapDVToWG()}}this._ownerise(true);if(this._initialized){if(j&&g.isFunction(j.beforeRefresh)){j.beforeRefresh.apply(this)}}this._field("allowVirtualScrolling",null);if(k===true){this._dataViewWrapper.load(j)}else{this.doRefresh(j);this._loaded()}};h.prototype.getCellInfo=function(k){var j=null;if(k&&(k=this._findUntilOuterDiv(k,{td:true,th:true}))){j=this._view().getAbsoluteCellInfo(k)}return j};h.prototype.getFilterOperatorsByDataType=function(j){return(new b.grid.filterOperatorsCache(this)).getByDataType(j||"string")};h.prototype.pageCount=function(){if(this._customPagingEnabled()){return Math.ceil(this.options.totalRows/this.options.pageSize)||1}return this.options.allowPaging?(this._dataViewWrapper.dataView()).pageCount():1};h.prototype._serverShaping=function(){return false};h.prototype._pageIndexForDataView=function(){return this.options.pageIndex};h.prototype.setSize=function(o,l){var m=this._view(),n={type:"",hScrollValue:null,vScrollValue:null},p=this.outerDiv,q=this._field("frozener"),k=this._field("visibleLeaves"),j=[];if(m&&m.getScrollValue){n=m.getScrollValue()}if(o||(o===0)){this._autoWidth=false;p.width(o)}if(l||(l===0)){this._autoHeight=false;p.height(l)}g.each(k,function(s,r){var t=m.getHeaderCell(s),u=m.getJoinedCols(s);g(t).css("width","");g.each(u,function(w,v){g(v).css("width","")})});this._view().updateSplits(n);if(q){q.refresh()}};h.prototype.selection=function(){var j=this._field("selection");if(!j){this._field("selection",j=new b.grid.selection(this))}return j};h.prototype._onDataViewCurrentPositionChanged=function(m,k){var j=this._currentCellFromDataView(),l=this.selection();j=this.currentCell(j);l.beginUpdate();l.clear();if(j._isValid()){l._startNewTransaction(j);l._selectRange(new b.grid.cellInfoRange(j,j),false,false,0,null)}l.endUpdate()};h.prototype._resetDataProperties=function(){this.options.pageIndex=0;var j=this._field("viewRenderBounds");j.start=j.end=0};h.prototype._onDataViewLoading=function(){this._activateSpinner();this._trigger("dataLoading")};h.prototype._onDataViewReset=function(j){(new b.grid.settingsManager(this)).MapDVToWG();this._trigger("dataLoaded");this.doRefresh(j);this._loaded()};h.prototype._onDataViewLoaded=function(){};h.prototype._loading=function(){this._activateSpinner();this._trigger("loading")};h.prototype._loaded=function(){this._deactivateSpinner();this._trigger("loaded")};h.prototype._buildSketchRow=function(t,m){var k,n,o,q,r,l,j=[],s=b.data.Expando.getFrom(t.values,false),p=s?s[b.grid.EXPANDO]:null;for(k=0,n=m.length;k<n;k++){o=m[k];if(b.grid.validDataKey(o.dataKey)){q=(p&&p.cellsAttributes)?p.cellsAttributes[o.dataKey]:{};r=this._dataViewWrapper.getValue(t.values,o.dataKey);j.push({value:this.parse(o,r),__attr:q||{},__style:{}})}}(j).originalRowIndex=t.originalRowIndex;(j).rowType=b.grid.rowType.data;if(t.originalRowIndex%2!==0){(j).rowType|=b.grid.rowType.dataAlt}(j).__style={};(j).__attr=(p&&p.rowAttributes)?p.rowAttributes:{};return j};h.prototype._buildSketchRowEmptyDataItem=function(k,p,o){var l,j,n=[],m=p.length;for(l=0,j=k.length;l<j;l++){n.push({html:k[l],__attr:{colSpan:(m>0&&o)?m:1},__style:{}})}(n).rowType=b.grid.rowType.emptyDataRow;(n).__style={};(n).__attr={};return n};h.prototype._prepareColumnOptions=function(k,l,j,m,r){b.grid.traverse(k,function(t){t.isBand=(g.isArray(t.columns)||(t.clientType==="c1band"));t._originalDataKey=t.dataKey;t._originalHeaderText=t.headerText});new b.grid.bandProcessor().getVisibleHeight(k,true);var o=[],p=this._originalHeaderRowData(),n=this._originalFooterRowData(),q=(l||"").toLowerCase(),s=this;if(m){b.grid.columnsGenerator.generate(q,j,k)}b.grid.setTraverseIndex(k);b.grid.traverse(k,function(t){t.isBand=(g.isArray(t.columns)||(t.clientType==="c1band"));b.grid.shallowMerge(t,e.c1basefield.prototype.options);if(!t.isBand){b.grid.shallowMerge(t,e.c1field.prototype.options);t.groupInfo=t.groupInfo||{};b.grid.shallowMerge(t.groupInfo,e.c1field.prototype.options.groupInfo);if(!t.clientType){t.clientType="c1field"}}else{t.clientType="c1band"}if(t.isLeaf&&!t.isBand){o.push(t)}});this._field("leaves",o);if(m){g.each(o,g.proxy(function(v,t){var u=(typeof(t.dataKey)==="number")?t.dataKey:v;if(q==="merge"||t.dynamic===true){if(t.headerText===undefined){if(s._dataViewWrapper&&s._dataViewWrapper.isBoundedToDOM()&&p&&(u<p.length)){t.headerText=g.trim(p[u])}else{if(b.grid.validDataKey(t.dataKey)){t.headerText=""+t.dataKey}}}}if(s._dataViewWrapper&&s._dataViewWrapper.isBoundedToDOM()&&n&&(u<n.length)){t._footerTextDOM=g.trim(n[u])}},this))}};h.prototype._rebuildLeaves=function(){var j=[],l=[],k;if(this._showRowHeader()){k=b.grid.createDynamicField({clientType:"c1basefield",dataIndex:-1,travIdx:-1,parentVis:true,allowMoving:false,allowSizing:false,allowSort:false,isRowHeader:true});k.owner=this;j.push(k)}g.each(this.options.columns,function(m,n){j.push(n)});this._columnsHeadersTable(new b.grid.bandProcessor().generateSpanTable(j,l));this._field("leaves",l);this._onLeavesCreated()};h.prototype._onLeavesCreated=function(){var o=this._field("leaves"),m=this._dataViewWrapper.getFieldsInfo(),n,l=0,j=0,k=this;this._field("visibleLeaves",g.grep(o,function(p,q){p.leavesIdx=q;if(b.grid.validDataKey(p.dataKey)){p.dataIndex=l++}else{p.dataIndex=-1}if(!p.isBand){n=m[p.dataKey];if(n){p._underlyingDataType=n.type;p._underlyingDataFormatString=n.format}if(g.isFunction(p.dataParser)){p.dataParser=new (p.dataParser)()}}if(p.parentVis){p.visLeavesIdx=j++;return true}return false}))};h.prototype._allowVirtualScrolling=function(){var j=this._field("allowVirtualScrolling");if(!j){j=this._field("allowVirtualScrolling",!this.options.allowPaging&&this.options.allowVirtualScrolling&&(this.options.staticRowIndex<0)&&(this.options.scrollMode!=="none")&&!this._hasMerging())}return j};h.prototype._dragndrop=function(k){if(typeof k==="undefined"){k=false}var j=this._field("dragndrop");if(!j&&k){this._field("dragndrop",j=new b.grid.uiDragndrop(this))}return j};h.prototype._headerRows=function(){return this._view().headerRows()};h.prototype._filterRow=function(){return this._view().filterRow()};h.prototype._rows=function(){return this._view().bodyRows()};h.prototype._localizeFilterOperators=function(k){var j=this,l=new b.grid.filterOperatorsCache(this);g.each(k,function(m,p){if(p.name){var n=l.getByName(p.name);if(n){n.displayName=p.displayName}}})};h.prototype._selectionui=function(j){var k=this._field("selectionui");if(!k&&j){this._field("selectionui",k=new b.grid.uiSelection(this))}return k};h.prototype._postset_allowColMoving=function(m,l){var k=this;g.each(this.columns(),function(n,o){if(m){k._dragndrop(true).attach(o)}else{k._dragndrop(true).detach(o)}});var j=this._field("groupedWidgets");if(j){g.each(j,function(n,o){if(m){k._dragndrop(true).attach(o)}else{k._dragndrop(true).detach(o)}})}};h.prototype._postset_allowSorting=function(k,j){this.ensureControl(false)};h.prototype._postset_columns=function(k,j){this._initialized=false;this.ensureControl(true)};h.prototype._postset_allowPaging=function(k,j){this.ensureControl(true)};h.prototype._postset_culture=function(k,j){throw"read-only"};h.prototype._postset_customFilterOperators=function(k,j){var l=this._dataViewWrapper.dataView()};h.prototype._postset_data=function(k,j){this._ownerise(false);b.grid.traverse(this.options.columns,function(n,m){if(n.dynamic){var l=g.inArray(n,m);if(l>=0){m.splice(l,1)}}else{n.dataKey=n._originalDataKey;n.headerText=n._originalHeaderText}});this._initialized=false;if(this._dataViewWrapper){this._dataViewWrapper.dispose()}this._dataViewWrapper=new b.grid.dataViewWrapper(this);this.ensureControl(true)};h.prototype._postset_disabled=function(m,l){var k=this,j=this._view();b.grid.iterateChildrenWidgets(this.outerDiv,function(n,o){if(o!==k){o.option("disabled",m)}});if(j){j.ensureDisabledState()}};h.prototype._postset_groupIndent=function(k,j){this.ensureControl(false)};h.prototype._postset_groupAreaCaption=function(l,k){var j=this._groupedColumns();if(this.$groupArea&&(!j||!j.length)){this.$groupArea.html(l||"&nbsp;")}};h.prototype._postset_highlightCurrentCell=function(k,j){var l=this.currentCell();if(l&&l._isValid()){this._highlightCellPosition(l,k)}};h.prototype._preset_pageIndex=function(n,l){if(isNaN(n)){throw"out of range"}var k=this.pageCount(),m=function(o){if(o>k-1){o=k-1}if(o<0){o=0}return o},j;n=m(n);if(this.options.allowPaging&&n!==l){j={newPageIndex:n};if(!this._onPageIndexChanging(j)){n=l}else{n=m(j.newPageIndex)}}return n};h.prototype._postset_pageIndex=function(l,k){if(this.options.allowPaging){var j={newPageIndex:l};if(this._customPagingEnabled()){this._convertWidgetsToOptions();this._onPageIndexChanged(j)}else{this.ensureControl(true,{afterRefresh:function(){this._onPageIndexChanged(j)}})}}};h.prototype._preset_pageSize=function(k,j){if(isNaN(k)){throw"out of range"}if(k<=0){k=1}return k};h.prototype._postset_pageSize=function(k,j){this._resetDataProperties();if(this.options.allowPaging&&!this._customPagingEnabled()){this.ensureControl(true)}};h.prototype._postset_pagerSettings=function(k,j){this.ensureControl(false)};h.prototype._postset_scrollMode=function(k,j){this.ensureControl(false)};h.prototype._postset_selectionMode=function(m,k){var l=this.selection(),n=this.currentCell(),j=this.selection().selectedCells().length();l.beginUpdate();l.clear();if(n&&n._isValid()&&j){l._selectRange(new b.grid.cellInfoRange(n,n),false,false,0,null)}l.endUpdate();this._view().toggleDOMSelection(m==="none")};h.prototype._postset_showFilter=function(k,j){this.ensureControl(false)};h.prototype._postset_showGroupArea=function(k,j){this.ensureControl(false)};h.prototype._postset_showRowHeader=function(k,j){this.ensureControl(false)};h.prototype._postset_staticRowIndex=function(){if(this.options.scrollMode!=="none"){this.ensureControl(false)}};h.prototype._postset_staticColumnIndex=function(){if(this.options.scrollMode!=="none"){this.ensureControl(false)}};h.prototype._postset_allowVirtualScrolling=function(k,j){this.ensureControl(false)};h.prototype._preset_allowVirtualScrolling=function(k,j){if(isNaN(k)||k<0){throw"out of range"}return k};h.prototype._activateSpinner=function(){if(!this._spinnerIsActivated){var k=this.options.wijCSS,j=this.outerDiv.append('<div class="wijmo-wijgrid-overlay '+k.overlay+'"></div><span class="wijmo-wijgrid-loadingtext '+k.content+" "+k.cornerAll+'"><span class="'+k.icon+' ui-icon-clock"></span>'+this.options.loadingText+"</span>").find("> .wijmo-wijgrid-loadingtext");j.position({my:"center",at:"center center",of:this.outerDiv,collision:"none"});this._spinnerIsActivated=true}};h.prototype._customPagingEnabled=function(){return this.options.allowPaging&&this.options.totalRows>=0};h.prototype._deactivateSpinner=function(){if(this._spinnerIsActivated){try{this.outerDiv.find("> .wijmo-wijgrid-overlay, > .wijmo-wijgrid-loadingtext").remove()}finally{this._spinnerIsActivated=false}}};h.prototype._columnWidgetsFactory=function(j,m){var k,l=m.clientType;if(!l&&m.isBand){l="c1band"}m=g.extend({},m,{disabled:this.options.disabled});try{g.data(j[0],"wijgridowner",this);switch(l){case"c1basefield":k=j.c1basefield(m);break;case"c1band":k=j.c1band(m);break;default:k=j.c1field(m)}}finally{g.removeData(j[0],"wijgridowner")}return k};h.prototype._convertWidgetsToOptions=function(){if(this._initialized&&this._mergeWidgetsWithOptions){this._ownerise(false);this._widgetsToOptions();this._ownerise(true)}};h.prototype._field=function(j,k){return b.grid.dataPrefix(this.element,this._data$prefix,j,k)};h.prototype._removeField=function(j){var k=this._data$prefix+j;this.element.removeData(k)};h.prototype._prepareTotalsRequest=function(k){var m=this._field("leaves"),j,l;if(!m||!this.options.showFooter){return[]}j=g.map((m),function(o,n){if(!o.isBand&&b.grid.validDataKey(o.dataKey)&&o.aggregate&&o.aggregate!=="none"){if(k){return[{column:o,aggregate:o.aggregate}]}else{return[{dataKey:o.dataKey,aggregate:o.aggregate}]}}return null});return j};h.prototype._widgetsToOptions=function(){var j=b.grid.flatten(this.options.columns);g.each(this.columns(),function(m,l){delete l.options.columns;var k=j[l.options.travIdx];g.extend(true,k,l.options);k.filterValue=l.options.filterValue;k.filterOperator=l.options.filterOperator})};h.prototype._recreateColumnWidgets=function(){g.each(this.columns(),function(s,t){t.destroy()});var n=[],p=this._headerRows(),r,o,q,m,l,j,k;if(p&&p.length()){r=[];b.grid.traverse(this.options.columns,function(s){if(s.parentVis){r.push(s)}});for(o=0,q=r.length;o<q;o++){m=r[o];l=p.item(m.thY);j=b.grid.rowAccessor.getCell(l,m.thX);k=this._columnWidgetsFactory(g(j),m);n.push(k.data(b.grid.widgetName(k)))}}this._field("columns",n)};h.prototype._groupedColumns=function(l){var j;l=!(j=this._field("groupedColumns"))||l;if(l){j=[];var n=this._field("leaves")||[],m=false,k=function(o){return o.groupInfo&&o.groupInfo.position&&(o.groupInfo.position!=="none")};g.each(n,function(o,p){if(k(p)){m=m||(p.groupedIndex===undefined);if(!m){j.push(p)}}else{delete p.groupedIndex}});if(m){g.each(n,function(o,p){if(k(p)){p.groupedIndex=j.length;j.push(p)}})}else{j.sort(function(p,o){return p.groupedIndex-o.groupedIndex});g.each(j,function(o,p){p.groupedIndex=o})}this._field("groupedColumns",j)}return j||[]};h.prototype._ownerise=function(j){if(j){var k=this;b.grid.traverse(this.options.columns,function(o){o.owner=k;var n,m,l;if((n=o.groupInfo)){n.owner=o;if(n.expandInfo){for(m=0,l=n.expandInfo.length;m<l;m++){n.expandInfo[m].owner=n}}}})}else{b.grid.traverse(this.options.columns,function(o){delete o.owner;var n,m,l;if((n=o.groupInfo)){delete n.owner;if(n.expandInfo){for(m=0,l=n.expandInfo.length;m<l;m++){delete n.expandInfo[m].owner}}}})}};h.prototype._ensureRenderBounds=function(k){var j=this._totalRowsCount();if(k.start<0){k.start=0}k.start=Math.min(k.start,j-1);if(k.end<0){k.end=0}k.end=Math.min(k.end,j-1);return k};h.prototype._refresh=function(j){new b.grid.grouper().group(this,this.sketchTable,this._field("leaves"));new b.grid.merger().merge(this.sketchTable,this._field("visibleLeaves"));var k=this._field("viewRenderBounds");this._ensureRenderBounds(k);if(this.options.scrollMode!=="none"){this._field("view",new b.grid.fixedView(this,this._field("viewRenderBounds")))}else{this._field("view",new b.grid.flatView(this,this._field("viewRenderBounds")))}this._render();this._ownerise(false);this._recreateColumnWidgets();this._ownerise(true);if(this.options.allowPaging){if(this.$topPagerDiv){this.$topPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5)}if(this.$bottomPagerDiv){this.$bottomPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5)}}};h.prototype._refreshVirtual=function(j){var l=j.virtualScrollData,k={top:0,bottom:0};if(l.data){k=this._processVirtualData(l)}this._updateRowInfos(l,k);this._renderVirtualIntoView(l)};h.prototype._updateRowInfos=function(o,l){var j=this._field("viewRenderBounds"),q=this._view(),m=o.newBounds,s=this._view().bodyRows(),p,n,r,k;switch(o.mode){case"reset":break;case"overlapBottom":p={start:m.start-j.start,end:j.end-j.start};r=m.start-j.start;for(n=p.start;n<=p.end;n++){k=q._getRowInfo(s.item(n),false);k.sectionRowIndex-=r;k.dataItemIndex+=l.top;q._setRowInfo(k.$rows,k)}break;case"overlapTop":p={start:j.start-j.start,end:m.end-j.start};r=j.start-m.start;for(n=p.start;n<=p.end;n++){k=q._getRowInfo(s.item(n),false);k.sectionRowIndex+=r;k.dataItemIndex+=l.top;q._setRowInfo(k.$rows,k)}break}};h.prototype._renderVirtualIntoView=function(p){var n=this._field("viewRenderBounds"),k=this._view(),o=function(r){return(r.rowType&b.grid.rowType.data)?r.originalRowIndex:-1},l,m,q,j;switch(p.mode){case"reset":k._clearBody();for(m=p.newBounds.start;m<=p.newBounds.end;m++){q=this.sketchTable[m-this._dataOffset];k._insertBodyRow(q,-1,o(q),m)}k._rebuildOffsets();break;case"overlapBottom":l={start:p.newBounds.start,end:n.end};for(m=0;m<l.start-n.start;m++){k._removeBodyRow(0,false)}for(m=l.end+1;m<=p.newBounds.end;m++){q=this.sketchTable[m-this._dataOffset];k._insertBodyRow(q,-1,o(q),m)}break;case"overlapTop":l={start:n.start,end:p.newBounds.end};for(m=0;m<n.end-p.newBounds.end;m++){k._removeBodyRow(l.end-l.start+1,false)}j=0;for(m=p.newBounds.start;m<n.start;m++){q=this.sketchTable[m-this._dataOffset];k._insertBodyRow(q,j++,o(q),m)}break;default:break}};h.prototype._processVirtualData=function(q){var r=this._dataViewWrapper,j=r.dataView().getSource(),k,s=this._field("leaves"),p,m,l,o=0,u={top:0,bottom:0},t,n=this._serverSideVirtualScrollingMargin();switch(q.mode){case"reset":this.sketchTable.splice(0,this.sketchTable.length);r._unsafeSplice(0,j.length);this._dataOffset=q.request.index;for(p=0;p<q.data.length;p++){r._unsafePush(k=q.data[p]);this.sketchTable.push(this._buildSketchRow(r._wrapDataItem(k,p),s))}break;case"overlapBottom":for(p=0;p<q.data.length;p++){r._unsafePush(k=q.data[p]);this.sketchTable.push(this._buildSketchRow(r._wrapDataItem(k,j.length-1),s))}u.bottom=q.data.length;break;case"overlapTop":for(p=q.data.length-1;p>=0;p--){r._unsafeSplice(0,0,k=q.data[p]);this.sketchTable.splice(0,0,this._buildSketchRow(r._wrapDataItem(k,p),s))}this._dataOffset=q.request.index;u.top=q.data.length;break}m=this._ensureRenderBounds({start:q.newBounds.start,end:q.newBounds.end});l={start:this._dataOffset,end:this._dataOffset+j.length-1};o=(l.end-m.end)-n;if(o>0){u.bottom-=o;r._unsafeSplice(j.length-o,o);this.sketchTable.splice(this.sketchTable.length-o,o)}o=(m.start-l.start)-n;if(o>0){u.top-=o;r._unsafeSplice(0,o);this.sketchTable.splice(0,o);this._dataOffset+=o}for(p=0;p<this.sketchTable.length;p++){this.sketchTable[p].originalRowIndex=p}r._refreshSilent();return u};h.prototype._needToCreatePagerItem=function(){return this.options.allowPaging===true};h.prototype._isMobileEnv=function(){return this._isMobile};h.prototype._render=function(){var j=this._view(),m=this.options,l=this.options.wijCSS,k;j.render();k=this.outerDiv;if(m.scrollMode!=="none"){k=this.outerDiv.find("div.wijmo-wijgrid-scroller:first")}this.$superPanelHeader=null;if(this.$topPagerDiv){if(this.$topPagerDiv.data("wijmo-wijpager")){this.$topPagerDiv.wijpager("destroy")}this.$topPagerDiv.remove()}this.$topPagerDiv=null;if(this._needToCreatePagerItem()&&((m.pagerSettings.position==="top")||(m.pagerSettings.position==="topAndBottom"))){if(!this.$topPagerDiv){k.prepend(this.$superPanelHeader=g('<div class="wijmo-wijsuperpanel-header"></div>'));this.$superPanelHeader.prepend(this.$topPagerDiv=g('<div class="wijmo-wijgrid-header '+l.header+" "+l.cornerTop+'"></div>'))}}if(m.showGroupArea){this._processGroupArea(k)}else{this.$groupArea=null}if(this.$bottomPagerDiv){if(this.$bottomPagerDiv.data("wijmo-wijpager")){this.$bottomPagerDiv.wijpager("destroy")}this.$bottomPagerDiv.remove()}this.$bottomPagerDiv=null;if(this._needToCreatePagerItem()&&((m.pagerSettings.position==="bottom")||(m.pagerSettings.position==="topAndBottom"))){if(!this.$bottomPagerDiv){k.append(this.$bottomPagerDiv=g('<div class="wijmo-wijgrid-footer wijmo-wijsuperpanel-footer '+l.stateDefault+" "+l.cornerBottom+'"></div>'))}}};h.prototype._processGroupArea=function(l){var j=this,k=this._groupedColumns(),m=[];this.$groupArea=g('<div class="'+this.options.wijCSS.content+" "+this.options.wijCSS.helperClearFix+'"></div>');if(k.length>0){g.each(k,function(n,p){var o=g('<a href="#"></a>').appendTo(j.$groupArea);try{g.data(o[0],"wijgridowner",j);o.c1groupedfield(g.extend({},{allowMoving:p.allowMoving,allowSort:p.allowSort,dataIndex:p.dataIndex,headerText:p.headerText,isBand:p.isBand,isLeaf:p.isLeaf,linearIdx:p.linearIdx,parentIdx:p.parentIdx,sortDirection:p.sortDirection,travIdx:p.travIdx,groupedIndex:p.groupedIndex},{disabled:j.options.disabled}))}finally{g.removeData(o[0],"wijgridowner")}m.push(o.data("wijmo-c1groupedfield"))})}else{this.$groupArea.addClass("wijmo-wijgrid-group-area").css("padding",0).html(this.options.groupAreaCaption||"&nbsp;")}this._field("groupedWidgets",m);if(!this.$superPanelHeader){l.prepend(this.$superPanelHeader=g('<div class="wijmo-wijsuperpanel-header"></div>'))}this.$superPanelHeader.prepend(this.$groupArea);this._dragndrop(true).attachGroupArea(this.$groupArea)};h.prototype._pagerSettings2PagerWidgetSettings=function(){return g.extend({},this.options.pagerSettings,{disabled:this.options.disabled,pageCount:this.pageCount(),pageIndex:this.options.pageIndex,pageIndexChanging:g.proxy(this._onPagerWidgetPageIndexChanging,this),pageIndexChanged:g.proxy(this._onPagerWidgetPageIndexChanged,this)})};h.prototype._showRowHeader=function(){return(this.options.showRowHeader===true)&&(this.options.staticColumnsAlignment!=="right")};h.prototype._attachEvents=function(){var j=this._view(),l=j.focusableElement(),k=this;l.bind("keydown."+this.widgetName,g.proxy(this._onKeyDown,this));l.bind("keypress."+this.widgetName,g.proxy(this._onKeyPress,this));g.each(j.subTables(),function(m,n){var o=n.element();if(o){if(o.tHead){g(o.tHead).bind("click."+k.widgetName,g.proxy(k._onClick,k))}if(o.tBodies.length){g(o.tBodies[0]).bind("click."+k.widgetName,g.proxy(k._onClick,k)).bind("dblclick."+k.widgetName,g.proxy(k._onDblClick,k)).bind("mousemove."+k.widgetName,g.proxy(k._onMouseMove,k)).bind("mouseout."+k.widgetName,g.proxy(k._onMouseOut,k))}}});g(window).bind("resize."+this.widgetName+"."+this._eventUID,g.proxy(this._onWindowResize,this))};h.prototype._detachEvents=function(m){var j=this._view(),l=this,k;this._windowResizeTimer=0;g(window).unbind("resize."+this.widgetName+"."+this._eventUID);if(j){k=j.focusableElement();k.unbind("keydown."+this.widgetName);k.unbind("keypress."+this.widgetName);g.each(j.subTables(),function(){var n=this.element();if(n){if(n.tHead){g(n.tHead).unbind("."+l.widgetName)}if(n.tBodies.length){g(n.tBodies[0]).unbind("."+l.widgetName)}}})}};h.prototype._handleSort=function(o,k){var n=this.options.columns,j=o.travIdx,m,l;if(o&&this.options.allowSorting){m=((o.sortDirection==="none")?"ascending":((o.sortDirection==="ascending")?"descending":"ascending"));l={column:o,sortDirection:m,sortCommand:o.dataKey+" "+(m==="ascending"?"asc":"desc")};if(this._onColumnSorting(l)){o.sortDirection=l.sortDirection;if(k){o.sortOrder=this._customSortOrder++}else{this._customSortOrder=1000;g.each(this.columns(),function(p,q){q.options.sortOrder=0;if(q.options.travIdx!==j&&!(q.options.groupInfo&&q.options.groupInfo.position!=="none")){q.options.sortDirection="none"}});b.grid.traverse(n,function(p){p.sortOrder=0;if(p.travIdx!==j&&!(p.groupInfo&&p.groupInfo.position!=="none")){p.sortDirection="none"}})}l={column:o,sortDirection:o.sortDirection,sortCommand:o.dataKey+" "+(o.sortDirection==="ascending"?"asc":"desc")};if(this._customPagingEnabled()){this._convertWidgetsToOptions();this._onColumnSorted(l)}else{this.ensureControl(true,{afterRefresh:function(){this._onColumnSorted(l)}})}}}};h.prototype._handleDragnDrop=function(n,r,m,j,q){var p=b.grid.getColumnByTravIdx(this.options.columns,n),l=b.grid.getColumnByTravIdx(this.options.columns,r),k=j?"groupArea":"columns",o=q?"groupArea":"columns";if(q){if(this._onColumnGrouping({drag:p.found,drop:l?l.found:null,dragSource:k,dropSource:o,at:m})){this.ensureControl(true,{beforeRefresh:function(){if(!l){p.found.groupedIndex=0}else{switch(m){case"left":p.found.groupedIndex=l.found.groupedIndex-0.5;break;case"right":p.found.groupedIndex=l.found.groupedIndex+0.5;break}}if(!j){g.extend(true,p.found,{groupInfo:{position:"header"}})}},afterRefresh:function(){this._onColumnGrouped({drag:p.found,drop:l?l.found:null,dragSource:k,dropSource:o,at:m})}})}}else{if(this._onColumnDropping({drag:p.found,drop:l.found,at:m})){this.ensureControl(false,{beforeRefresh:function(){p.at.splice(p.found.linearIdx,1);switch(m){case"left":if(p.at===l.at&&p.found.linearIdx<l.found.linearIdx){l.at.splice(l.found.linearIdx-1,0,p.found)}else{l.at.splice(l.found.linearIdx,0,p.found)}break;case"right":if(p.at===l.at&&p.found.linearIdx<l.found.linearIdx){l.at.splice(l.found.linearIdx,0,p.found)}else{l.at.splice(l.found.linearIdx+1,0,p.found)}break;case"center":l.found.columns.push(p.found);break}b.grid.setTraverseIndex(this.options.columns)},afterRefresh:function(){this._onColumnDropped({drag:p.found,drop:l.found,at:m})}})}}};h.prototype._handleFilter=function(m,p,o){var j=(new b.grid.filterOperatorsCache(this)).getByName(p),n,l,k;if(j){if(j.arity>1){n=this.parse(m.options,o);l=(n!==null&&(b.grid.getDataType(m.options)==="string"||!isNaN(n)))}else{l=true}if(l){k={column:m.options,operator:j.name,value:n};if(this._onColumnFiltering(k)){m.options.filterValue=k.value;m.options.filterOperator=k.operator;this._resetDataProperties();if(this._customPagingEnabled()){this._convertWidgetsToOptions();this._onColumnFiltered({column:m.options})}else{this.ensureControl(true,{afterRefresh:function(){this._onColumnFiltered({column:m.options})}})}}}}};h.prototype._handleUngroup=function(l){var k=b.grid.getColumnByTravIdx(this.options.columns,l),j;if(k&&k.found){j=k.found;if(this._onColumnUngrouping({column:j})){this.ensureControl(true,{beforeRefresh:function(){delete j.groupedIndex;g.extend(true,j,{groupInfo:{position:"none"}})},afterRefresh:function(){this._onColumnUngrouped({column:j})}})}}};h.prototype._onVirtualScrolling=function(n,k,o,j,m,l){this.ensureControl(true,{virtualScrollData:{newBounds:n,request:k,mode:o,data:l},afterRefresh:function(p){var q=this._field("viewRenderBounds");g.extend(q,p.virtualScrollData.newBounds);this._view()._adjustRowsHeights();m(j)}})};h.prototype._handleVirtualScrolling=function(j,n){var l=this._field("viewRenderBounds"),m=this._ensureRenderBounds({start:j,end:j+this.options.pageSize-1}),o=this._ensureRenderBounds({start:this._dataOffset,end:this._dataOffset+this._dataViewWrapper.dataView().count()-1}),k=null,p;if(m.start>l.end||m.end<l.start){p="reset"}else{if(m.start>l.start){p="overlapBottom"}else{if(m.start<l.start){p="overlapTop"}else{}}}if(this._serverSideVirtualScrolling()){switch(p){case"reset":k={index:j,maxCount:this.options.pageSize};break;case"overlapBottom":if(m.end>o.end){k={index:o.end+1,maxCount:this.options.pageSize}}break;case"overlapTop":if(m.start<o.start){k={index:Math.max(0,o.start-this.options.pageSize),maxCount:0};k.maxCount=o.start-k.index}break}}if(p!=="none"){this._onVirtualScrolling(m,k,p,j,n)}};h.prototype._serverSideVirtualScrolling=function(){return false};h.prototype._serverSideVirtualScrollingMargin=function(){return this.options.pageSize*2};h.prototype._onColumnDropping=function(j){return this._trigger("columnDropping",null,j)};h.prototype._onColumnDropped=function(j){this._trigger("columnDropped",null,j)};h.prototype._onColumnGrouping=function(j){return this._trigger("columnGrouping",null,j)};h.prototype._onColumnGrouped=function(j){this._trigger("columnGrouped",null,j)};h.prototype._onColumnUngrouping=function(j){return this._trigger("columnUngrouping",null,j)};h.prototype._onColumnUngrouped=function(j){this._trigger("columnUngrouped",null,j)};h.prototype._onColumnFiltering=function(j){return this._trigger("filtering",null,j)};h.prototype._onColumnFiltered=function(j){this._trigger("filtered",null,j)};h.prototype._onFilterOperatorsListShowing=function(j){this._trigger("filterOperatorsListShowing",null,j)};h.prototype._onColumnSorting=function(j){return this._trigger("sorting",null,j)};h.prototype._onColumnSorted=function(j){this._trigger("sorted",null,j)};h.prototype._onCurrentCellChanged=function(k){var m=this.options,l=this._field("currentCell");var j=this._gridDataRowIndexToDataView(l.rowIndex());this._dataViewWrapper.currentPosition(j);if(m.scrollMode!=="none"&&l&&!l.isEqual(b.grid.cellInfo.outsideValue)){(this._view()).scrollTo(l)}this._trigger("currentCellChanged");if(k&&((k.type||"").toLowerCase()==="click")&&this._editBySingleClick()){this._beginEditInternal(k)}};h.prototype._onPageIndexChanging=function(j){return this._trigger("pageIndexChanging",null,j)};h.prototype._onPageIndexChanged=function(j){this._trigger("pageIndexChanged",null,j)};h.prototype._onPagerWidgetPageIndexChanging=function(k,j){j.handled=true};h.prototype._onPagerWidgetPageIndexChanged=function(k,j){this._setOption("pageIndex",j.newPageIndex)};h.prototype._onRendering=function(j){var k=this._view();this._rendered=false;if(j.virtualScrollData){this.selection().clear();if(this.options.highlightCurrentCell){this._highlightCellPosition(this.currentCell(),false)}}else{if(k){k.dispose()}this._detachEvents(false);this.element.detach();this.element.empty();this.outerDiv.empty();this.outerDiv.append(this.element);this._field("currentCell",null);if(this._field("selectionui")){this._field("selectionui").dispose();this._field("selectionui",null)}if(this._field("resizer")){this._field("resizer").dispose();this._field("resizer",null)}if(this._field("frozener")){this._field("frozener").dispose();this._field("frozener",null)}}this._trigger("rendering")};h.prototype._onRendered=function(j){var k=this._view(),m,n,l=this.selection().selectedCells().length()>0;this._rendered=true;this._setAttr(k.focusableElement(),"tabIndex",0);m=this._currentCellFromDataView();m._isEdit(false);if(!m._isValid()||!(m=this.currentCell(m))){m=this.currentCell(this._getFirstDataRowCell(0))}this._field("selection",null);m=this.currentCell();if(m._isValid()&&(l||this.options.showSelectionOnRender)){this.selection()._startNewTransaction(m);this.selection()._selectRange(new b.grid.cellInfoRange(m,m),false,false,0,null)}if(!j.virtualScrollData){this._attachEvents();this._selectionui(true);n=new b.grid.uiResizer(this);g.each(this.columns(),function(q,p){var r=p.options;if(r.visible&&r.parentVis&&r.isLeaf){n.addElement(p)}});this._field("resizer",n);k.updateSplits(this._scrollingState);if(this.options.scrollMode!=="none"){this._field("frozener",new b.grid.uiFrozener(this))}}this._renderCounter++;this._trigger("rendered")};h.prototype._onClick=function(n){if(!this._canInteract()||!n.target){return}var q=this._view(),m=this._findUntilOuterDiv(n.target,{td:true,th:true}),o,j,k=0,p,r;if(m){if(g(n.target).hasClass("wijmo-wijgrid-grouptogglebtn")){this._onGroupBtnClick(n);n.stopPropagation();return false}o=g(m).closest("tr");if(!o.length){return}j=q.getAbsoluteCellInfo(m);if(o.hasClass("wijmo-wijgrid-datarow")||o.hasClass("wijmo-wijgrid-headerrow")){if(j.cellIndex()<0||j.rowIndex()<0){if(j.rowIndex()>=0){j=new b.grid.cellInfo(0,j.rowIndex());k=2}else{j=this._getFirstDataRowCell(j.cellIndex());k=1}}this._changeCurrentCell(n,j,!g(n.target).is(":focus"));p=this.currentCell();r=this.selection();if(!n.shiftKey||(!r._multipleRangesAllowed()&&this.options.selectionMode.toLowerCase()!=="singlerange")){r._startNewTransaction(p)}r.beginUpdate();if(n.shiftKey&&n.ctrlKey){r._clearRange(new b.grid.cellInfoRange(p,p),k)}else{r._selectRange(new b.grid.cellInfoRange(r._anchorCell(),p),n.ctrlKey,n.shiftKey,k,null)}r.endUpdate()}var l={cell:j};this._trigger("cellClicked",null,l)}};h.prototype._onDblClick=function(j){if(!this._editBySingleClick()){this._beginEditInternal(j)}};h.prototype._onGroupBtnClick=function(o){if(!this._canInteract()){return}var j=g(o.target).closest("tr"),k=b.grid.groupHelper,l=k.getGroupInfo(j[0]),m,n;if(l){m=k.getColumnByGroupLevel(this._field("leaves"),l.level);if(m){n=m.groupInfo.expandInfo[l.index];if(n.isExpanded){n.collapse()}else{n.expand(o.shiftKey)}this.setSize()}}};h.prototype._onKeyDown=function(o){if(!this._canInteract()){return true}var j=(o.target).tagName.toLowerCase(),k=false,n,p,m,l=b.grid.getKeyCodeEnum();if((j==="input"||j==="option"||j==="select"||j==="textarea")&&(g(o.target).closest("tr.wijmo-wijgrid-datarow").length===0)){return true}if(this.options.allowEditing){if((o.which===l.ESCAPE||o.which===113)&&(this.currentCell()._isValid()&&this.currentCell()._isEdit())){this._endEditInternal(o);return false}else{if(o.which===113){this._beginEditInternal(o);return false}}}if(!this.options.allowKeyboardNavigation||(o.which===l.TAB)){return true}switch(o.which){case l.LEFT:case l.RIGHT:case l.DOWN:case l.UP:case l.PAGE_DOWN:case l.PAGE_UP:case l.HOME:case l.END:case l.TAB:n=this._getNextCurrencyPos(this._getDataCellsRange(),this.currentCell(),o.keyCode,o.shiftKey);k=this._canMoveToAnotherCell(o.target,o.which);break}if(k){this._changeCurrentCell(o,new b.grid.cellInfo(n.cellIndex,n.rowIndex),true);p=this.currentCell();m=this.selection();if(!o.shiftKey||(!m._multipleRangesAllowed()&&this.options.selectionMode.toLowerCase()!=="singlerange")){m._startNewTransaction(p)}m.beginUpdate();m._selectRange(new b.grid.cellInfoRange(m._anchorCell(),p),false,o.shiftKey,0,null);m.endUpdate();return false}return true};h.prototype._onKeyPress=function(n){if(this._canInteract()&&this.options.allowEditing){var k=n.which,o=this.currentCell(),j,m,l;if(k&&o._isValid()&&!o._isEdit()){j=(n.target).tagName.toLowerCase();if(j!=="input"&&j!=="option"&&j!=="select"&&j!=="textarea"){m=g(n.target).closest(".wijmo-wijgrid-table");if(m.length){l=g.map(this._view().subTables(),function(q,p){return q.element()});if(g.inArray(m[0],l)>=0){if(g.wij.charValidator.isPrintableChar(String.fromCharCode(k))){this._beginEditInternal(n);return false}}}}}}};h.prototype._onMouseMove=function(o){var r=this._view(),m=this._field("frozener"),n,l,s,p,q,j,k=b.grid.renderState;if(!this.options.highlightOnHover||!this._canInteract()||(m&&m.inProgress())){return}n=this._findUntilOuterDiv(o.target,{td:true,th:true});if(n){l=g(n).closest("tr");if(!l.length||!(l.hasClass("wijmo-wijgrid-datarow")||l.hasClass("wijmo-wijgrid-headerrow"))){return}s=r.getAbsoluteCellInfo(n);p=this._field("hoveredRow");if(s.rowIndex()!==p){if(p!==undefined){q=this._rows().item(p);if(q){j=r._getRowInfo(q);r._changeRowRenderState(j,k.hovered,false);this.rowStyleFormatter.format(j)}}p=s.rowIndex();this._field("hoveredRow",p);if(p>=0){q=this._rows().item(p);if(q){j=r._getRowInfo(q);r._changeRowRenderState(j,k.hovered,true);this.rowStyleFormatter.format(j)}}}}};h.prototype._onMouseOut=function(n){if(!this._canInteract()){return}if(g(n.relatedTarget).closest(".wijmo-wijgrid-data").length===0){var l=this._field("hoveredRow"),k,m,j=this._view();if(l>=0){k=this._rows().item(l);if(k){m=j._getRowInfo(k);j._changeRowRenderState(m,b.grid.renderState.hovered,false);this.rowStyleFormatter.format(m)}}}};h.prototype._onWindowResize=function(k){var j=this;if(this._windowResizeTimer>0){window.clearTimeout(this._windowResizeTimer);this._windowResizeTimer=0}if(this._windowResizeTimer!==-1){this._windowResizeTimer=window.setTimeout(function(){j._windowResizeTimer=-1;try{if(!j._destroyed&&j._initialized&&j.element.parent().length){j.setSize()}}finally{j._windowResizeTimer=0}},50)}};h.prototype._fieldResized=function(n,k,m){if(k<0){k=0}if(m<=0){m=1}var l={column:n.options,oldWidth:k,newWidth:m};if(this._trigger("columnResizing",null,l)!==false){if(isNaN(l.newWidth)||l.newWidth<0){l.newWidth=1}n.option("width",l.newWidth);var j={column:n.options};this._trigger("columnResized",null,j)}};h.prototype._changeCurrentCell=function(o,l,n){var q=this.currentCell(),p=this._getDataCellsRange(),m,j,k=this.options.highlightCurrentCell,r;if((p._isValid()&&p._containsCellInfo(l))||(l.isEqual(b.grid.cellInfo.outsideValue))){if(q.cellIndex()!==l.cellIndex()||q.rowIndex()!==l.rowIndex()){m={cellIndex:l.cellIndex(),rowIndex:l.rowIndex(),oldCellIndex:q.cellIndex(),oldRowIndex:q.rowIndex()};if(this._trigger("currentCellChanging",null,m)){j=false;if(!this.options.allowEditing||!q._isEdit()||(j=this._endEditInternal(null))){if(p._containsCellInfo(q)){if(k){this._highlightCellPosition(q,false)}if(r=q.tableCell()){g(r).removeAttr("tabIndex")}}q=l._clone();q._setGridView(this);if(k){this._highlightCellPosition(q,true)}if(r=q.tableCell()){g(r).attr("tabIndex",0);if(n&&!q._isEdit()){}}this._field("currentCell",q);this._onCurrentCellChanged(o)}}}else{if(k){this._highlightCellPosition(q,true)}if(r=q.tableCell()){g(r).attr("tabIndex",0)}if(o&&!q._isEdit()&&this._editBySingleClick()){this._beginEditInternal(o)}}}else{}};h.prototype._highlightCellPosition=function(m,r){if(m&&m._isValid()){var q=m.cellIndexAbs(),o=m.rowIndexAbs(),l=b.grid.renderState,p=this._view(),k,n,j;n=p.getHeaderCell(q);if(n){k=p._getRowInfo(this._headerRows().item(m.column().thY));n=g(n);j=p._changeCellRenderState(n,l.current,r);this.cellStyleFormatter.format(n,q,m.column(),k,j)}n=p.getJoinedRows(o,0);if(n){k=p._getRowInfo(n);p._changeRowRenderState(k,l.current,r);this.rowStyleFormatter.format(k)}n=p.getCell(q,o);if(n){n=g(n);j=p._changeCellRenderState(n,l.current,r);this.cellStyleFormatter.format(n,q,m.column(),k,j)}}};h.prototype._beginEditInternal=function(l){if(this._canInteract()&&this.options.allowEditing){var k=this.currentCell().column(),j;if(k&&!k.readOnly){j=new b.grid.cellEditorHelper().currentCellEditStart(this,l);if(j){}return j}}return false};h.prototype._endEditInternal=function(k){if(this._canInteract()&&this.options.allowEditing){var j=new b.grid.cellEditorHelper().currentCellEditEnd(this,k);if(j&&!this._allowVirtualScrolling()){this._view().ensureHeight(this.currentCell().rowIndex())}return j}return false};h.prototype._onViewInsertEmptyRow=function(n,j,k,l,m){return null};h.prototype._onViewCreateEmptyCell=function(l,j,k){return null};h.prototype._onViewCellRendered=function(m,l,j,k){};h.prototype._onViewRowRendered=function(j){};h.prototype._getDataParser=function(j){return j.dataParser||b.data.defaultParsers[j.dataType]||b.data.defaultParsers.string};h.prototype.parse=function(k,m){var l=b.grid.getDataType(k),j=b.grid.getDataType(k);if(g.isFunction(m)){m=m()}m=b.data.convert(m,l,j,{culture:this._field("closestCulture"),format:k.dataFormatString||k._underlyingDataFormatString,nullString:this.options.nullString,parser:k.dataParser});return m};h.prototype.toStr=function(k,m){var n=this._dataViewWrapper.dataView(),l=b.grid.getDataType(k),j="string";m=b.data.convert(m,l,j,{culture:this._field("closestCulture"),format:k.dataFormatString||k._underlyingDataFormatString,nullString:this.options.nullString,parser:k.dataParser});return m};h.prototype.parseFailed=function(l,m,k,j){return m};h.prototype._funcOptions=function(){return["cellStyleFormatter","rowStyleFormatter","afterCellEdit","afterCellUpdate","beforeCellEdit","beforeCellUpdate","cellClicked","columnDragging","columnDragged","columnDropping","columnDropped","columnResizing","columnResized","columnGrouping","columnGrouped","columnUngrouping","columnUngrouped","currentCellChanging","currentCellChanged","filtering","filtered","filterOperatorsListShowing","groupAggregate","groupText","invalidCellValue","pageIndexChanging","pageIndexChanged","selectionChanged","sorting","sorted","dataLoading","dataLoaded","loading","loaded","rendering","rendered"]};h.prototype._canInteract=function(){return !this.options.disabled};h.prototype._canMoveToAnotherCell=function(p,o){var k=p.tagName.toLowerCase(),j,q,n,m;switch(k){case"input":if(g(p).hasClass("wijgridinput")){var l=p;if(l.type==="text"){j=l.value.length;q=new b.grid.domSelection(l).getSelection();n=b.grid.getKeyCodeEnum();m=((o===n.UP||o===n.DOWN||o===n.PAGE_DOWN||o===n.PAGE_UP)||(q.length===0&&((q.start===0&&(o===n.LEFT||o===n.HOME))||(q.end>=j&&(o===n.RIGHT||o===n.END)))));return m}return true}return false;case"textarea":case"select":return false}return true};h.prototype._editBySingleClick=function(){var j=(this.options.editingInitOption||"").toLowerCase();switch(j){case"click":case"doubleclick":break;case"auto":default:j=this._isMobileEnv()?"click":"doubleclick";break}return j==="click"};h.prototype._getDataToAbsOffset=function(){var j=0,l=0,k=this._headerRows();if(this._showRowHeader()){j++}if(k){l+=k.length()}if(this._filterRow()){l++}return{x:j,y:l}};h.prototype._gridDataRowIndexToDataView=function(l){var k=-1,j=b.grid.rowType,m;if(l<0){return k}m=this._view()._getRowInfo(this._rows().item(l));return(m.type&b.grid.rowType.data)?m.dataItemIndex:-1};h.prototype._currentCellFromDataView=function(){var j=this._dataViewWrapper.currentPosition(),k=new b.grid.cellInfo(this.currentCell().cellIndex(),this._dataViewDataRowIndexToGrid(j),null);if(k.rowIndex()<0){k.cellIndex(-1)}else{if(k.cellIndex()<0){k.cellIndex(0)}}return k};h.prototype._dataViewDataRowIndexToGrid=function(o){var k=b.grid.rowType,l=this._view(),n=this._rows(),m,j,p;if(o<0){return -1}for(m=0,j=n.length();m<j;m++){p=l._getRowInfo(n.item(m));if((p.type&k.data)&&(p.dataItemIndex===o)){return p.sectionRowIndex}}return -1};h.prototype._getDataCellsRange=function(){var l=0,j=0,k=this._field("visibleLeaves").length-1,m=(this._rendered)?this._rows().length()-1:this.sketchTable.length-1;if(this._showRowHeader()){k--}if(k<0||m<0){l=j=k=m=-1}return new b.grid.cellInfoRange(new b.grid.cellInfo(l,j,null),new b.grid.cellInfo(k,m,null))};h.prototype._getDataItem=function(j){return this.dataView().item(j)};h.prototype._getFirstDataRowCell=function(o){var p,k,n,l=this._view(),m=this._rows(),j=b.grid.rowType;for(p=0,k=m.length();p<k;p++){n=l._getRowInfo(m.item(p));if(n.type&j.data){return new b.grid.cellInfo(o,p)}}return b.grid.cellInfo.outsideValue};h.prototype._getNextCurrencyPos=function(n,m,p,j){var l=m.cellIndex(),q=m.rowIndex(),o,k=b.grid.getKeyCodeEnum();switch(p){case k.PAGE_UP:if(this._reverseKey&&q===n.topLeft().rowIndex()){q=n.bottomRight().rowIndex()}else{q-=this._pageSizeKey;if(q<(o=n.topLeft().rowIndex())){q=o}}break;case k.PAGE_DOWN:if(this._reverseKey&&q===n.bottomRight().rowIndex()){q=n.topLeft().rowIndex()}else{q+=this._pageSizeKey;if(q>(o=n.bottomRight().rowIndex())){q=o}}break;case k.END:l=(this._reverseKey&&l===n.bottomRight().cellIndex())?n.topLeft().cellIndex():n.bottomRight().cellIndex();break;case k.HOME:l=(this._reverseKey&&l===n.topLeft().cellIndex())?n.bottomRight().cellIndex():n.topLeft().cellIndex();break;case k.LEFT:if(l>n.topLeft().cellIndex()){l--}else{if(this._reverseKey){l=n.bottomRight().cellIndex()}}break;case k.UP:if(q>n.topLeft().rowIndex()){q--}else{if(this._reverseKey){q=n.bottomRight().rowIndex()}}break;case k.RIGHT:if(l<n.bottomRight().cellIndex()){l++}else{if(this._reverseKey){l=n.topLeft().cellIndex()}}break;case k.ENTER:case k.DOWN:if(q<n.bottomRight().rowIndex()){q++}else{if(this._reverseKey){q=n.topLeft().rowIndex()}}break;case k.TAB:if(false){if(j){l--;if(l<n.topLeft().cellIndex()){l=n.bottomRight().cellIndex();q--;if(q<n.topLeft().rowIndex()){q=n.bottomRight().rowIndex()}}}else{l++;if(l>n.bottomRight().cellIndex()){l=n.topLeft().cellIndex();q++;if(q>n.bottomRight().rowIndex()){q=n.topLeft().rowIndex()}}}}break}return{cellIndex:l,rowIndex:q}};h.prototype._findUntilOuterDiv=function(o,j){var m=o,k,n,l=null;for(;m;m=m.parentNode){n=m.nodeName.toLowerCase();if(n){if(m===this.outerDiv[0]){k=m;break}if(j[n]){l=m}}}return k?l:null};h.prototype._getStaticIndex=function(l){var j,k=this._getDataCellsRange();if(this._hasSpannedCells()){return -1}if(l){j=Math.min(this.options.staticRowIndex,k.bottomRight().rowIndex())}else{j=Math.min(this.options.staticColumnIndex,k.bottomRight().cellIndex())}if(j<-1){j=-1}return j};h.prototype._getStaticOffsetIndex=function(j){var k=0;if(j){if(this._showRowHeader()){k++}}else{k=this._columnsHeadersTable().length;if(this.options.showFilter){k++}}return k};h.prototype._getRealStaticColumnIndex=function(){var o,k,m=this._getStaticOffsetIndex(true),n=this._getStaticIndex(false),j,l;j=n+m;if(n>=0){o=this._field("visibleLeaves");k=o.length;l=j;for(;j<k;j++){if(o[j].parentIdx===-1){if(j>l){j--}break}}if(j>=k){j=k-1}}return j};h.prototype._getRealStaticRowIndex=function(){var j=this._getStaticOffsetIndex(false);return this._getStaticIndex(true)+j};h.prototype._hasMerging=function(){var n=this._field("leaves"),m,k,l,j=false;if(n){for(m=0,k=n.length;(m<k)&&!j;m++){l=n[m];j=j||(l.parentVis&&(l.rowMerge!=="none"))}}return j};h.prototype._hasGrouping=function(){var n=this._field("leaves"),m,k,l,j=false;for(m=0,k=n.length;(m<k)&&!j;m++){l=n[m];j=l.groupInfo&&(l.groupInfo.position!=="none")}return j};h.prototype._hasSpannedCells=function(){return this._hasGrouping()||this._hasMerging()};h.prototype._columnsHeadersTable=function(j){if(arguments.length){this._field("columnsHeadersTable",j)}return this._field("columnsHeadersTable")};h.prototype._view=function(){return this._field("view")};h.prototype._originalFooterRowData=function(){var j=this._field("tfoot");return(j&&j.length)?j[0]:null};h.prototype._originalHeaderRowData=function(){var j=this._field("thead");return(j&&j.length)?j[0]:null};h.prototype._setAttr=function(j,l,m){var k=this;if(j===this.element){if(arguments.length===2){g.each(l,function(o,n){if(!(o in k._originalAttr)){k._originalAttr[o]=j.attr(o)}});return j.attr(l)}else{if(!(l in this._originalAttr)){this._originalAttr[l]=j.attr(l)}return j.attr(l,m)}}else{return(arguments.length===3)?j.attr(l,m):j.attr(l)}return this};h.prototype._totalRowsCount=function(){return this.sketchTable.length};h.prototype._trackScrollingPosition=function(j,k){this._scrollingState.x=j;this._scrollingState.y=k};h.prototype._trackScrollingIndex=function(j){this._scrollingState.index=j};h.prototype._uid=function(){if(this.__uid===undefined){this.__uid=b.grid.getUID()}return"wijgrid"+this.__uid};return h})(b.wijmoWidget);e.wijgrid=d;d.prototype.widgetEventPrefix="wijgrid";d.prototype._data$prefix="wijgrid";d.prototype._customSortOrder=1000;d.prototype._reverseKey=false;d.prototype._pageSizeKey=10;d.prototype._mergeWidgetsWithOptions=true;var c=(function(){function h(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"};this.allowColMoving=false;this.allowColSizing=false;this.allowEditing=false;this.allowKeyboardNavigation=true;this.allowPaging=false;this.allowSorting=false;this.allowVirtualScrolling=false;this.cellStyleFormatter=undefined;this.columns=[];this.columnsAutogenerationMode="merge";this.culture="";this.customFilterOperators=[];this.data=null;this.editingInitOption="auto";this.ensureColumnsPxWidth=false;this.filterOperatorsSortMode="alphabeticalCustomFirst";this.groupAreaCaption="Drag a column here to group by that column.";this.groupIndent=10;this.highlightCurrentCell=false;this.highlightOnHover=true;this.loadingText="Loading...";this.nullString="";this.pageIndex=0;this.pageSize=10;this.pagerSettings={mode:"numeric",pageButtonCount:10,position:"bottom"};this.readAttributesFromData=false;this.rowStyleFormatter=undefined;this.scrollMode="none";this.selectionMode="singleRow";this.showFilter=false;this.showFooter=false;this.showGroupArea=false;this.showSelectionOnRender=true;this.showRowHeader=false;this.staticColumnIndex=-1;this.staticColumnsAlignment="left";this.staticRowIndex=-1;this.totalRows=-1;this.afterCellEdit=null;this.afterCellUpdate=null;this.beforeCellEdit=null;this.beforeCellUpdate=null;this.cellClicked=null;this.columnDragging=null;this.columnDragged=null;this.columnDropping=null;this.columnDropped=null;this.columnGrouping=null;this.columnGrouped=null;this.columnResizing=null;this.columnResized=null;this.columnUngrouping=null;this.columnUngrouped=null;this.currentCellChanging=null;this.currentCellChanged=null;this.filterOperatorsListShowing=null;this.filtering=null;this.filtered=null;this.groupAggregate=null;this.groupText=null;this.invalidCellValue=null;this.pageIndexChanging=null;this.pageIndexChanged=null;this.selectionChanged=null;this.sorting=null;this.sorted=null;this.dataLoading=null;this.dataLoaded=null;this.loading=null;this.loaded=null;this.rendering=null;this.rendered=null}return h})();d.prototype.options=b.grid.extendWidgetOptions(b.wijmoWidget.prototype.options,new c());g.wijmo.registerWidget("wijgrid",d.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(e){var f=jQuery;var d=(function(h){__extends(g,h);function g(){h.apply(this,arguments)}g.prototype._create=function(){var i=f.data(this.element[0],"wijgridowner");this._field("owner",i);b.grid.widgetName(this.element[0],this.widgetFullName);this._destroyed=false;this.element.addClass(i.options.wijCSS.widget+" wijmo-c1basefield "+i.options.wijCSS.stateDefault);if(this.options.disabled){this.disable()}if(i.options.allowColMoving){i._dragndrop(true).attach(this)}};g.prototype._init=function(){this.element.wrapInner("<div class='wijmo-wijgrid-innercell'></div>");this._refreshHeaderCell()};g.prototype.destroy=function(){try{h.prototype.destroy.apply(this,arguments)}finally{this._destroyed=true}};g.prototype._destroy=function(){if(this._isDestroyed()){return}var i=this._owner();if(i&&i._dragndrop(false)){i._dragndrop(false).detach(this)}b.grid.remove$dataByPrefix(this.element,this._data$prefix);this.element.removeClass(i.options.wijCSS.widget+" wijmo-c1basefield "+i.options.wijCSS.stateDefault).html(this.element.find(".wijmo-wijgrid-headertext").html())};g.prototype._field=function(i,j){return b.grid.dataPrefix(this.element,this._data$prefix,i,j)};g.prototype._removeField=function(i){var j=this._data$prefix+i;this.element.removeData(j)};g.prototype._setOption=function(k,m){var o=this["_preset_"+k],j=this.options[k],l,i;if(o!==undefined){m=o.apply(this,[m,j])}l=(m!==j);h.prototype._setOption.apply(this,[k,m]);if(l){if(this.options.groupedIndex!==undefined){var n=this._owner()._field("groupedWidgets")[this.options.groupedIndex];if(n&&(k in n.options)){n._setOption(k,m)}}i=this["_postset_"+k];if(i!==undefined){i.apply(this,[m,j])}}};g.prototype._postset_allowMoving=function(j,i){};g.prototype._preset_clientType=function(j,i){throw"read-only"};g.prototype._postset_headerText=function(j,i){this._refreshHeaderCell()};g.prototype._postset_visible=function(j,i){this._owner().ensureControl(false)};g.prototype._postset_width=function(l,i){var j=this._owner();if(j){this.options.ensurePxWidth=true;var k=b.grid.getColumnByTravIdx(j.options.columns,this.options.travIdx);if(k){k.found.width=l;k.found.ensurePxWidth=true}j.setSize()}};g.prototype._owner=function(){return this._field("owner")};g.prototype._canSize=function(){return this.options.allowSizing&&this._owner().options.allowColSizing};g.prototype._canDrag=function(){return this.options.allowMoving===true};g.prototype._canDropTo=function(i){if(b.grid.isChildOf(this._owner().options.columns,i,this)){return false}return true};g.prototype._createHeaderContent=function(i){return i.html(this.options.headerText||"&nbsp;")};g.prototype._decorateHeaderContent=function(i){return i.wrapInner('<span class="wijmo-wijgrid-headertext" />')};g.prototype._refreshHeaderCell=function(){var i=this.element.children(".wijmo-wijgrid-innercell").empty();this._createHeaderContent(i);this._decorateHeaderContent(i)};g.prototype._isDestroyed=function(){return this._destroyed};return g})(b.wijmoWidget);e.c1basefield=d;d.prototype._data$prefix="c1basefield";var c=(function(){function g(){this.allowMoving=true;this.allowSizing=true;this.cellFormatter=undefined;this.dataKey=undefined;this.ensurePxWidth=undefined;this.footerText=undefined;this.headerText=undefined;this.textAlignment=undefined;this.visible=true;this.width=undefined}return g})();e.c1basefield_options=c;d.prototype.options=b.grid.extendWidgetOptions(b.wijmoWidget.prototype.options,new c());f.wijmo.registerWidget("c1basefield",d.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var e=jQuery;var f=(function(g){__extends(h,g);function h(){g.apply(this,arguments)}h.prototype._create=function(){g.prototype._create.apply(this,arguments);var i=this._owner();this.element.addClass(i.options.wijCSS.widget+" wijmo-c1field")};h.prototype._destroy=function(){if(this._isDestroyed()){return}var i=this._owner();this.element.find("*").unbind("."+this.widgetName);if(this.$filterEditor){this.$filterEditor.closest("td").find("*").unbind("."+this.widgetName);switch(this._getInputEditorType(this.options)){case"date":if(this.$filterEditor.data("wijmo-wijinputdate")){this.$filterEditor.wijinputdate("destroy")}break;case"mask":if(this.$filterEditor.data("wijmo-wijinputmask")){this.$filterEditor.wijinputmask("destroy")}break;case"numberCurrency":case"numberNumber":case"numberPercent":if(this.$filterEditor.data("wijmo-wijinputnumber")){this.$filterEditor.wijinputnumber("destroy")}break}this.$filterEditor=null}this.element.removeClass(i.options.wijCSS.widget+" wijmo-c1field");this._removeDropDownFilterList();g.prototype._destroy.apply(this,arguments)};h.prototype._init=function(){g.prototype._init.apply(this,arguments);this.$filterEditor=null;var i=this._owner();this.filterRow=i._filterRow();if(i.options.showFilter&&this.options.showFilter&&(this.options.dataIndex>=0)){this._prepareFilterCell()}};h.prototype._postset_aggregate=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_allowSort=function(j,i){this._refreshHeaderCell()};h.prototype._postset_dataType=function(j,i){throw"read-only"};h.prototype._postset_dataParser=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_dataFormatString=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_filterOperator=function(j,i){this._owner().ensureControl(true)};h.prototype._postset_filterValue=function(j,i){this._owner().ensureControl(true)};h.prototype._postset_groupInfo=function(j,i){this._owner().ensureControl(true)};h.prototype._postset_rowMerge=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_showFilter=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_sortDirection=function(j,i){this.options.sortOrder=0;this._owner().ensureControl(true)};h.prototype._postset_width=function(j,i){g.prototype._postset_width.apply(this,arguments)};h.prototype._canDropTo=function(i){if(g.prototype._canDropTo.apply(this,arguments)){if(this.options.groupedIndex!==undefined&&(i instanceof e.wijmo.c1groupedfield)){return false}return true}return false};h.prototype._canSort=function(){var i=this._owner();return(i&&i.options.allowSorting&&this.options.allowSort&&(this.options.dataIndex>=0))};h.prototype._decorateHeaderContent=function(k){if(this._canSort()){var i=this._owner(),j=k.wrapInner('<a class="wijmo-wijgrid-headertext" href="#" role="button" />').children("a");j.bind("click."+this.widgetName,this,e.proxy(this._onHrefClick,this));switch(this.options.sortDirection){case"ascending":k.append(e('<span class="wijmo-wijgrid-sort-icon '+i.options.wijCSS.icon+" "+i.options.wijCSS.iconArrowUp+'">ascending</span>'));break;case"descending":k.append(e('<span class="wijmo-wijgrid-sort-icon '+i.options.wijCSS.icon+" "+i.options.wijCSS.iconArrowDown+'">descending</span>'));break}}else{g.prototype._decorateHeaderContent.apply(this,arguments)}};h.prototype._prepareFilterCell=function(){var p=this.options.visLeavesIdx,l=this._owner(),j=null,n,o,k=this,i,m=b.grid.HTML5InputSupport.getDefaultInputType(l._isMobileEnv(),this.options);if(p>=0){l=this._owner();if(this.filterRow){j=e(b.grid.rowAccessor.getCell(this.filterRow,p))}else{throw"exception"}this.$filterEditor=j.find("input");j.bind(((e.support).selectstart?"selectstart":"mousedown"),function(q){q.stopPropagation()});n=l.parse(this.options,b.grid.filterHelper.getSingleValue(this.options.filterValue));if(n===null||n==="undefined"){switch(b.grid.getDataType(this.options)){case"boolean":n=false;break;case"number":case"currency":case"datetime":n=0;break;default:n=""}}o={culture:l.options.culture,disabled:l.options.disabled,decimalPlaces:(function(q){var r=/^(n|p|c){1}(\d*)$/.exec(q);if(r&&r[2]){return parseInt(r[2],10)}r=/^(d){1}(\d*)$/.exec(q);if(r){return 0}return 2})(this.options.dataFormatString)};switch(i=this._getInputEditorType(this.options)){case"date":if(m==="text"){this.$filterEditor.wijinputdate(e.extend(o,{date:n,dateFormat:this.options.dataFormatString||undefined,showTrigger:true}))}else{this._createHtmlEditor(this.$filterEditor,m,b.grid.HTML5InputSupport.toStr(n||new Date(),m))}break;case"mask":this.$filterEditor.wijinputmask({text:n+""});break;case"numberCurrency":this.$filterEditor.wijinputnumber(e.extend(o,{type:"currency",value:n}));break;case"numberNumber":if(m==="text"){this.$filterEditor.wijinputnumber(e.extend(o,{value:n}))}else{this._createHtmlEditor(this.$filterEditor,m,b.grid.HTML5InputSupport.toStr(n,m))}break;case"numberPercent":this.$filterEditor.wijinputnumber(e.extend(o,{type:"percent",value:n*100}));break;default:throw b.grid.stringFormat('Unsupported editor type: "{0}"',i)}j.find(".wijmo-wijgrid-filter-trigger").attr({role:"button","aria-haspopup":"true"}).bind("mouseenter."+this.widgetName,function(q){if(!k.options.disabled){e(this).addClass(l.options.wijCSS.stateHover)}}).bind("mouseleave."+this.widgetName,function(q){if(!k.options.disabled){e(this).removeClass(l.options.wijCSS.stateHover+" "+l.options.wijCSS.stateActive)}}).bind("mouseup."+this.widgetName,this,function(q){if(!k.options.disabled){e(this).removeClass(l.options.wijCSS.stateActive)}}).bind("mousedown."+this.widgetName,{column:this},this._onFilterBtnClick).bind("click."+this.widgetName,function(q){q.preventDefault()})}};h.prototype._createHtmlEditor=function(i,j,k){return i.wrap('<span class="wijgrid-input-wrapper"></span').attr("type",j).val(k)};h.prototype._onFilterBtnClick=function(q){var m=q.data.column,n=8,p=m._owner(),o,r,s,t,v,j,i,l,u,k=b.grid.HTML5InputSupport.getDefaultInputType(p._isMobileEnv(),m.options);if(m.options.disabled){return false}if(m.$dropDownFilterList){m._removeDropDownFilterList();return false}q.target.focus();o=b.grid.filterHelper.getSingleOperatorName(m.options.filterOperator).toLowerCase();r=p.getFilterOperatorsByDataType(b.grid.getDataType(m.options));s={operators:e.extend(true,[],r),column:m.options};p._onFilterOperatorsListShowing(s);t=[];if(s.operators){e.each(s.operators,function(x,w){t.push({label:w.displayName||w.name,value:w.name,selected:w.name.toLowerCase()===o})})}m.$dropDownFilterList=e('<div class="wijmo-wijgrid-filterlist"></div').appendTo(document.body).wijlist({autoSize:true,maxItemsCount:n,selected:function(y,x){var z,w;switch(w=m._getInputEditorType(m.options)){case"date":if(k==="text"){z=m.$filterEditor.wijinputdate("option","date")||new Date()}else{z=b.grid.HTML5InputSupport.parse(m.$filterEditor.val(),k)||new Date()}break;case"mask":z=m.$filterEditor.wijinputmask("option","text");break;case"numberNumber":if(k!=="text"){z=b.grid.HTML5InputSupport.parse(m.$filterEditor.val(),k)||0;break}case"numberCurrency":case"numberPercent":z=m.$filterEditor.wijinputnumber("option","value");if(w==="numberPercent"){z/=100}break}m._removeDropDownFilterList();p._handleFilter(m,x.item.value,z)}});if(e.ui&&e.fn.zIndex){u=p.outerDiv.zIndex();if(u){u++}}m.$dropDownFilterList.css("z-index",Math.max(u||0,9999));m.$dropDownFilterList.wijlist("setItems",t).wijlist("renderList");i=m.$dropDownFilterList.width()|150;m.$dropDownFilterList.width(t.length>n?i+20:i).wijlist("refreshSuperPanel").position({of:e(this),my:"left top",at:"left bottom"});(m.$dropDownFilterList).$button=e(this);l=(m.$dropDownFilterList).eventUID=b.grid.getUID();e(document).bind("mousedown."+m.widgetName+"."+l,{column:m},m._onDocMouseDown)};h.prototype._onDocMouseDown=function(l){var i=e(l.target),j=i.parents(".wijmo-wijgrid-filterlist:first"),k=i.is(".wijmo-wijgrid-filter-trigger")?i:i.parents(".wijmo-wijgrid-filter-trigger:first");if((k.length&&(k[0]===l.data.column.$dropDownFilterList.$button[0]))||(j.length&&(j[0]===l.data.column.$dropDownFilterList[0]))){}else{l.data.column._removeDropDownFilterList()}};h.prototype._onHrefClick=function(i){if(i.data.options.disabled){return false}if(i.data.options.allowSort){var j=i.data._owner();j._handleSort(i.data.options,i.ctrlKey)}return false};h.prototype._removeDropDownFilterList=function(){if(this.$dropDownFilterList){var i=(this.$dropDownFilterList).eventUID;this.$dropDownFilterList.remove();this.$dropDownFilterList=null;e(document).unbind("mousedown."+this.widgetName+"."+i,this._onDocMouseDown)}};h.prototype._getInputEditorType=function(i){switch(b.grid.getDataType(i)){case"number":return(i.dataFormatString&&i.dataFormatString.indexOf("p")===0)?"numberPercent":"numberNumber";case"currency":return"numberCurrency";case"datetime":return"date";default:return"mask"}};return h})(c.c1basefield);c.c1field=f;var d=(function(g){__extends(h,g);function h(){g.apply(this,arguments);this.aggregate="none";this.allowSort=true;this.dataType=undefined;this.inputType=undefined;this.dataParser=undefined;this.dataFormatString=undefined;this.filterOperator="nofilter";this.filterValue=undefined;this.groupInfo={expandInfo:[],level:undefined,groupSingleRow:true,collapsedImageClass:e.wijmo.wijCSS.iconArrowRight,expandedImageClass:e.wijmo.wijCSS.iconArrowRightDown,position:"none",outlineMode:"startExpanded",headerText:undefined,footerText:undefined};this.readOnly=false;this.rowMerge="none";this.showFilter=true;this.sortDirection="none";this.valueRequired=false}return h})(c.c1basefield_options);c.c1field_options=d;f.prototype.options=b.grid.extendWidgetOptions(c.c1basefield.prototype.options,new d());e.wijmo.registerWidget("c1field",e.wijmo.c1basefield,f.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(g){__extends(h,g);function h(){g.apply(this,arguments)}h.prototype._create=function(){g.prototype._create.apply(this,arguments);var i=this._owner();this.element.addClass(i.options.wijCSS.widget+" wijmo-c1band")};h.prototype._canDropTo=function(i){if(g.prototype._canDropTo.apply(this,arguments)){return !(i instanceof d.wijmo.c1groupedfield)}return false};return h})(c.c1basefield);c.c1band=e;var f=(function(g){__extends(h,g);function h(){g.apply(this,arguments);this.columns=[]}return h})(c.c1field_options);e.prototype.options=b.grid.extendWidgetOptions(c.c1basefield.prototype.options,new f());d.wijmo.registerWidget("c1band",d.wijmo.c1basefield,e.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(f){__extends(g,f);function g(){f.apply(this,arguments)}g.prototype._create=function(){var h=d.data(this.element[0],"wijgridowner");this._field("owner",h);b.grid.widgetName(this.element[0],this.widgetFullName);this._destroyed=false;this.element.addClass("wijmo-wijgrid-group-button "+h.options.wijCSS.stateDefault+" "+h.options.wijCSS.cornerAll);if(this.options.disabled){this.disable()}if(h.options.allowColMoving){h._dragndrop(true).attach(this)}};g.prototype._init=function(){this._refreshHeaderCell()};g.prototype.destroy=function(){try{f.prototype.destroy.apply(this,arguments)}finally{this._destroyed=true}};g.prototype._destroy=function(){if(this._isDestroyed()){return}this.element.find("*").unbind("."+this.widgetName);var h=this._owner();if(h&&h._dragndrop(false)){h._dragndrop(false).detach(this)}b.grid.remove$dataByPrefix(this.element,this._data$prefix)};g.prototype._field=function(h,i){return b.grid.dataPrefix(this.element,this._data$prefix,h,i)};g.prototype._removeField=function(h){var i=this._data$prefix+h;this.element.removeData(i)};g.prototype._setOption=function(j,l){var m=this["_preset_"+j],i=this.options[j],k,h;if(m!==undefined){l=m.apply(this,[l,i])}k=(l!==i);f.prototype._setOption.apply(this,[j,l]);if(k){h=this["_postset_"+j];if(h!==undefined){h.apply(this,[l,i])}}};g.prototype._postset_headerText=function(j,i,h){this._refreshHeaderCell()};g.prototype._postset_allowSort=function(j,i,h){this._refreshHeaderCell()};g.prototype._owner=function(){return this._field("owner")};g.prototype._canSize=function(){return this.options.allowSizing&&this._owner().options.allowColSizing};g.prototype._canDrag=function(){return this.options.allowMoving===true};g.prototype._canDropTo=function(h){if(!(h instanceof d.wijmo.c1groupedfield)){return false}if(b.grid.isChildOf(this._owner().options.columns,h,this)){return false}return true};g.prototype._canSort=function(){var h=this._owner();return(h&&h.options.allowSorting&&this.options.allowSort&&(this.options.dataIndex>=0))};g.prototype._refreshHeaderCell=function(){var i=this._owner().options.wijCSS,h=d('<span class="wijmo-wijgrid-group-button-close '+i.stateDefault+" "+i.cornerAll+'"><span class="'+i.icon+" "+i.iconClose+'"></span></span>').bind("click."+this.widgetName,this,this._onCloseClick);this.element.html(this.options.headerText||"").prepend(h).bind("click."+this.widgetName,this,d.proxy(this._onHrefClick,this));if(this._canSort()){switch(this.options.sortDirection){case"ascending":this.element.append(d('<span class="wijmo-wijgrid-group-button-sort '+i.icon+" "+i.iconArrowUp+'"></span>'));break;case"descending":this.element.append(d('<span class="wijmo-wijgrid-group-button-sort '+i.icon+" "+i.iconArrowDown+'"></span>'));break}}};g.prototype._onCloseClick=function(i){var h=i.data.options;if(!h.disabled){(i.data._owner())._handleUngroup(i.data.options.travIdx)}return false};g.prototype._onHrefClick=function(i){var j=i.data._owner(),h=i.data.options,k;if(!(h).disabled&&h.allowSort){k=b.grid.search(j.columns(),function(l){return l.options.travIdx===h.travIdx});k=(!k.found)?b.grid.getColumnByTravIdx(j.options.columns,h.travIdx).found:k.found.options;if(k){j._handleSort(k,i.ctrlKey)}}return false};g.prototype._isDestroyed=function(){return this._destroyed};return g})(b.wijmoWidget);c.c1groupedfield=e;e.prototype._data$prefix="c1groupedfield";e.prototype.options=d.extend(true,{},b.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},allowMoving:true,allowSort:true,headerText:undefined,sortDirection:"none"});d.wijmo.registerWidget("c1groupedfield",e.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var j=jQuery;var o=(function(){function p(){}p.prototype.generateSpanTable=function(q,s){this._height=this._width=this._inc=this._shift=0;this._table=[];this._traverseList=[];this._savedXPos=[];var r=this._generateSpanTable(q,s,true);return r};p.prototype._generateSpanTable=function(q,v,t){var u,s,r=this;this._height=this.getVisibleHeight(q,t);v=v||[];b.grid.traverse(q,function(w){if(w.isLeaf){v.push(w)}r._traverseList.push(w)});this._width=v.length;for(u=0;u<this._height;u++){this._table[u]=[];for(s=0;s<this._width;s++){this._table[u][s]={column:null,colSpan:0,rowSpan:0}}}this._setTableValues(q,0,0);return this._table};p.prototype.getVisibleHeight=function(s,t){var v,r,w,u,q=0;if(j.isArray(s)){for(v=0,r=s.length;v<r;v++){u=this.getVisibleHeight(s[v],t);q=Math.max(q,u)}}else{w=(s.visible===undefined)?true:s.visible;s.parentVis=w&&t;if(s.isBand){for(v=0,r=s.columns.length;v<r;v++){u=this.getVisibleHeight(s.columns[v],s.parentVis);q=Math.max(q,u)}if(!s.parentVis){return q}s.isLeaf=(q===0);q++}else{s.isLeaf=true;if(s.parentVis){q=1}}}return q};p.prototype._getVisibleParent=function(q){while(q){q=this._traverseList[q.parentIdx];if(q&&(q.parentVis||q.parentVis===undefined)){return q}}return null};p.prototype._setTableValues=function(w,v,z){var s,u,t,r,A,q;if(j.isArray(w)){for(s=0,u=w.length;s<u;s++){this._setTableValues(w[s],v,z)}}else{if(w.travIdx===undefined){throw"undefined travIdx"}t=z+this._shift;if(w.parentVis){r=t+this._inc;this._table[v][r].column=w;this._savedXPos[w.travIdx]=r}if(w.isBand){for(s=0,u=w.columns.length;s<u;s++){this._setTableValues(w.columns[s],v+1,z)}}if(w.parentVis){if(this._shift-t===0){this._table[v][this._savedXPos[w.travIdx]].rowSpan=this._height-v;this._shift++}else{this._table[v][this._savedXPos[w.travIdx]].colSpan=this._shift-t}}else{if(!w.isBand&&this._height>0){q=this._getVisibleParent(w);A=(q)?q.isLeaf:false;if(A){this._inc++}if(v>=this._height){v=this._height-1}r=z+this._shift+this._inc;this._table[v][r].column=w;if(!A){if(q&&(this._savedXPos[q.travIdx]===r)){this._shiftTableElements(r,v)}this._inc++}}}}};p.prototype._shiftTableElements=function(q,r){var s;for(s=0;s<r;s++){this._table[s][q+1]=this._table[s][q];this._table[s][q]={column:null,colSpan:0,rowSpan:0};if(this._table[s][q+1].column){this._savedXPos[this._table[s][q+1].column.travIdx]++}}};return p})();d.bandProcessor=o;function h(p){var q=[];k(p,q);return q}d.getAllLeaves=h;function k(s,u){var r,q,t,p;if(s){for(r=0,q=s.length;r<q;r++){t=s[r];if(t.options){t=t.options}p=t.columns;if(p&&p.length){k(p,u)}else{u.push(t)}}}}function i(t,r){var s,q,u,p=null;if(t&&r>=0){for(s=0,q=t.length;s<q&&!p;s++){u=t[s];if(u.options){u=u.options}if(u.travIdx===r){return{found:u,at:t}}if(u.columns){p=this.getColumnByTravIdx(u.columns,r)}}}return p}d.getColumnByTravIdx=i;function m(p,s,q){if(s.options){s=s.options}if(q.options){q=q.options}if(q.isBand&&s.parentIdx>=0){if(s.parentIdx===q.travIdx){return true}if(s.parentIdx>q.travIdx){var r=this.flatten(p);while(true){s=r[s.parentIdx];if(s.travIdx===q.travIdx){return true}if(s.parentIdx===-1){break}}}}return false}d.isChildOf=m;function g(p){var q=[];f(p,q);return q}d.getLeaves=g;function f(r,t){var q,p,s;if(r){for(q=0,p=r.length;q<p;q++){s=r[q];if(s.isLeaf){t.push(s)}if(s.columns){f(s.columns,t)}}}}function n(p){return e(p,0,-1)}d.setTraverseIndex=n;function e(s,q,u){var r,p,t;if(s){for(r=0,p=s.length;r<p;r++){t=s[r];if(t.options){t=t.options}t.linearIdx=r;t.travIdx=q++;t.parentIdx=u;if(t.columns){q=e(t.columns,q,q-1)}}}return q}function c(q){var p=[];b.grid.traverse(q,function(r){p.push(r)});return p}d.flatten=c;function l(r,t){var q,p,s;if(r&&(j.isFunction(t))){for(q=0;q<r.length;q++){s=r[q];if(s.options){s=s.options}p=r.length;t(s,r);if(r.length!==p){q--;continue}if(s.columns){b.grid.traverse(s.columns,t)}}}}d.traverse=l})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g){this._dvFilteringSettings=undefined;this._dvPagingSettings=undefined;this._dvSortingSettings=undefined;this._wgFilteringSettings=undefined;this._wgPagingSettings=undefined;this._wgSortingSettings=undefined;if(!g){throw"exception"}this._wijgrid=g;this._dataView=g._dataViewWrapper.dataView();this._filterCache=new b.grid.filterOperatorsCache(g)}f.prototype.compareSettings=function(){var j=true,k,h,l,g;j=((k=this.DVPagingSettings())===(h=this.WGPagingSettings()));if(!j&&k&&h){j=(k.pageSize===h.pageSize&&k.pageIndex===h.pageIndex)}if(j){j=((k=this.DVSortingSettings())===(h=this.WGSortingSettings()));if(!j&&k&&h&&((g=k.length)===h.length)){j=true;for(l=0;l<g&&j;l++){j=((k[l].dataKey===h[l].dataKey)&&(k[l].sortDirection===h[l].sortDirection))}}}if(j){k=this.DVFilteringSettings();h=this.WGFilteringSettings();j=b.grid.compareObj(k,h)}return j};f.prototype.DVFilteringSettings=function(){function h(j,k){var l;e.each(j,function(m,n){if(typeof(n)==="string"){l=n}else{if(e.isArray(n)){h(n,k)}else{k.filterValue.push(n.value);k.filterOperator.push({name:n.originalOperator||n.operator,condition:l})}}})}if(this._dvFilteringSettings===undefined){var i=[],g=this._dataView.filter();if(g){e.each(g,function(l,j){var k={dataKey:l};if(e.isArray(j)){k.filterValue=[];k.filterOperator=[];h(j,k)}else{if(e.isPlainObject(j)){k.filterValue=j.value;k.filterOperator=j.originalOperator||j.operator||"Equals"}else{k.filterValue=j;k.filterOperator="Equals"}}i.push(k)})}this._dvFilteringSettings=(i.length)?i:null}return this._dvFilteringSettings};f.prototype.DVPagingSettings=function(){if(this._dvPagingSettings===undefined){var h=b.grid.asPagedDataView(this._dataView);if(h){var g=h.pageSize();this._dvPagingSettings=(g>0)?{pageSize:h.pageSize(),pageIndex:h.pageIndex()}:null}}return this._dvPagingSettings};f.prototype.DVSortingSettings=function(){if(this._dvSortingSettings===undefined){var h=[];if(true){var g=b.data.sorting.compile(this._dataView.sort()).normalized;if(g){e.each(g,function(i,j){if(j!==null){h.push({dataKey:(typeof(j)==="string")?j:j.property,sortDirection:j.asc||j.asc===undefined?"ascending":"descending"})}})}}this._dvSortingSettings=(h.length)?h:null}return this._dvSortingSettings};f.prototype.WGFilteringSettings=function(){if(this._wgFilteringSettings===undefined){var i=[],h=this._wijgrid._field("leaves"),g=this;if(h){e.each(h,function(l,j){if(b.grid.validDataKey(j.dataKey)&&j.filterOperator){var m=(b.grid.deepExtend({},{foo:j.filterValue})).foo,k=(b.grid.deepExtend({},{foo:j.filterOperator})).foo,n=b.grid.filterHelper.verify(k,m,j.dataType,g._filterCache);if(n){i.push({owner:j,dataKey:j.dataKey,filterValue:n.filterValue,filterOperator:n.filterOperator})}}})}this._wgFilteringSettings=(i.length)?i:null}return this._wgFilteringSettings};f.prototype.WGPagingSettings=function(){if(this._wgPagingSettings===undefined){this._wgPagingSettings=this._wijgrid.options.allowPaging?{pageSize:this._wijgrid.options.pageSize,pageIndex:this._wijgrid.options.pageIndex}:null}return this._wgPagingSettings};f.prototype.WGSortingSettings=function(){if(this._wgSortingSettings===undefined){var h={},i=[],g=this._wijgrid._groupedColumns(true),l=this._wijgrid._field("leaves")||[],k=function(m){return(!m.isBand&&m.allowSort&&b.grid.validDataKey(m.dataKey))},j=0;if(this._wijgrid.options.allowSorting){e.each(g,function(n,m){if(k(m)){if(m.sortDirection==="none"){m.sortDirection="ascending"}h[m.dataKey]={dataKey:m.dataKey,sortDirection:m.sortDirection,sortOrder:j++}}});j++;e.each(l,function(n,m){if(k(m)){if(m.sortDirection==="ascending"||m.sortDirection==="descending"){if(!h[m.dataKey]){h[m.dataKey]={dataKey:m.dataKey,sortDirection:m.sortDirection,sortOrder:(m.sortOrder||0)+j}}}}});e.each(h,function(m,n){i.push(n)});i.sort(function(n,m){return n.sortOrder-m.sortOrder});e.each(i,function(m,n){delete n.sortOrder})}this._wgSortingSettings=(i.length)?i:null}return this._wgSortingSettings};f.prototype.MapWGToDV=function(){var j=this;var g={},i,h;if(this._mapPagingParams()&&(i=this.WGPagingSettings())){g.pageIndex=i.pageIndex;g.pageSize=i.pageSize}else{g.pageSize=-1}if(this._mapSortingParams()){g.sort=[];if(i=this.WGSortingSettings()){g.sort=[];e.each(i,function(k,l){g.sort.push({property:l.dataKey,asc:l.sortDirection==="ascending"})})}}this._wijgrid.deficientFilters={};if(this._mapFilteringParams()){e.each(this._wijgrid._field("leaves"),function(l,k){if(b.grid.validDataKey(k.dataKey)&&((k.filterOperator===undefined)^(k.filterValue===undefined))){j._wijgrid.deficientFilters[k.dataKey]={filterOperator:k.filterOperator,filterValue:k.filterValue}}});g.filter={};if(i=this.WGFilteringSettings()){g.filter=this._convertFilterToDV(i)}if(e.isEmptyObject(g.filter)){g.filter=null}}return g};f.prototype.MapDVToWG=function(){var m,k={},g=this._mapSortingParams(),l=this._mapPagingParams(),j=this._mapFilteringParams(),i=b.grid.asPagedDataView(this._dataView),h=this;e.each(this._wijgrid._field("leaves"),function(o,n){if(g){n.sortOrder=0;n.sortDirection="none"}if(j){n.filterOperator="nofilter";n.filterValue=undefined}k[n.dataKey]=n});if(l&&i){this._wijgrid.options.pageSize=i.pageSize();this._wijgrid.options.pageIndex=i.pageIndex()}if(g&&(m=this.DVSortingSettings())){e.each(m,function(n,q){var p;if((p=k[q.dataKey])){p.sortDirection=q.sortDirection;p.sortOrder=n}})}if(j){if(m=this.DVFilteringSettings()){e.each(m,function(p,q){var n;if((n=k[q.dataKey])){n.filterValue=q.filterValue;n.filterOperator=q.filterOperator;if(e.isPlainObject(n.filterOperator)){n.filterOperator=n.filterOperator.name}delete h._wijgrid.deficientFilters[n.dataKey]}})}e.each(this._wijgrid.deficientFilters,function(o,n){k[o].filterOperator=n.filterOperator;k[o].filterValue=n.filterValue})}};f.prototype._mapPagingParams=function(){return this._wijgrid.options.allowPaging&&!this._wijgrid._customPagingEnabled()&&!this._wijgrid._serverShaping()};f.prototype._mapSortingParams=function(){return this._wijgrid.options.allowSorting&&!this._wijgrid._serverShaping()};f.prototype._mapFilteringParams=function(){return !this._wijgrid._serverShaping()};f.prototype.makeProxyFilter=function(j,h,i,m){i=i.toLowerCase();var n=this,k=(j.dataType==="datetime"),p={originalOperator:undefined,property:h,operator:i,value:m};var o=this._filterCache.getByNameInt(i);var l=b.data.filtering.ops[i];if((i!=="nofilter")&&(o.isCustom||k)){p.originalOperator=p.operator;if(o.isCustom){p.operator=e.extend(true,{},o.op);p.operator.apply=p.operator.operator}else{p.operator=e.extend(true,{},l);var g=j.inputType?b.grid.TimeUnitConverter.convertInputType(j.inputType):b.grid.TimeUnitConverter.convertFormatString(j.dataFormatString||"d");p.operator.apply=function(r,q){if(!(r instanceof Date)){r=n._wijgrid.parse(j,r)}if(!(q instanceof Date)){q=n._wijgrid.parse(j,q)}b.grid.TimeUnitConverter.cutDate(r,g);b.grid.TimeUnitConverter.cutDate(q,g);return l.apply(r,q)}}}return p};f.prototype._convertFilterToDV=function(i){var g={},h=this;e.each(i,function(n,q){var k=q.dataKey,j=[],o="and",l,m,r,p;if(!e.isPlainObject(q)){return}m=q.filterOperator;r=q.filterValue;if(m==null){return}if(!e.isArray(m)){m=[m]}if(!e.isArray(r)){r=[r]}if(m.length!=r.length){throw"The number of filter operators must match the number of filter values"}if(m.length==0){return}e.each(m,function(u,s){var v;if(typeof s==="string"){s={name:s}}if(!e.isPlainObject(s)||!s.name){throw"Invalid filter operator"}v=r[u];if(!e.isArray(v)){v=[v]}p=e.map(v,function(x){return h.makeProxyFilter(q.owner,k,s.name,x)});function t(){if(p.length>1){p.splice(0,0,"or")}else{p=p[0]}}function w(){if(o==null){o=l;j.splice(0,0,l)}}o=null;l=s.condition||"or";if(j.length<=1||o==l){if(p.length==1||j.length<=1||o=="or"){j=j.concat(p);w()}else{t();j.push(p);w()}}else{t();j=[j,p];w()}});e.each(j,function(s,t){if(e.isArray(t)&&t.length==2){j[s]=t[1]}});if(j.length==2&&typeof(j[0]==="string")){j.shift()}if(j.length==1){j=j[0]}g[k]=j});return g};return f})();d.settingsManager=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var g=jQuery;var f=(function(){function j(k){this._domSource=null;this._ignoreAllEvents=false;this._ignoreChangeEvent=false;this._ignoreCurrentChangedEvent=false;this._sharedDataItems=null;this._userData=null;this._totals=null;this._changeTimer=0;this._toDispose=[];this._isOwnDataView=false;this._isWijdatasource=false;this._isDynamicWijdatasource=false;this._wijgrid=k;this._createDataViewWrapper()}j.prototype.data=function(){var l=this._getDataViewInst(),k=b.grid.asPagedDataView(l);return{data:this._getSharedDataItems(),totalRows:k!=null?k.totalItemCount():(l.getSource()||[]).length,totals:this._getTotals(),emptyData:this.isBoundedToDOM()?this._domSource.emptyData:null}};j.prototype.dataView=function(){return this._getDataViewInst()};j.prototype.dispose=function(){var k=this._getDataViewInst();this._propChangeListener.dispose();g.each(this._toDispose,function(l,m){m.dispose()});if(k&&this._isOwnDataView){k.dispose()}this._wijgrid._wijDataView=null};j.prototype.ignoreChangeEvent=function(k){if(arguments.length){this._ignoreChangeEvent=(k===true)}else{return this._ignoreChangeEvent}};j.prototype.ignoreCurrentChangedEvent=function(k){if(arguments.length){this._ignoreCurrentChangedEvent=(k===true)}else{return this._ignoreCurrentChangedEvent}};j.prototype.isDataLoaded=function(){var k=this._getDataViewInst();return k.isLoaded()};j.prototype.isOwnDataView=function(){return this._isOwnDataView};j.prototype.getFieldsInfo=function(){var k=this._getDataViewInst();return this._propDescriptorsToFieldsInfo(k.getProperties())};j.prototype._propDescriptorsToFieldsInfo=function(l){var k={};if(l){g.each(l,function(m,n){if(n.name==="$$hash"){return}k[n.name]={name:n.name,type:n.type||"string"}})}return k};j.prototype.isBoundedToDOM=function(){return this._domSource!==null};j.prototype.load=function(k){this._userData=k;var n=this._getDataViewInst();if(!n){this._createDataViewWrapper();n=this._getDataViewInst()}this._onDataViewLoading();var o=new b.grid.settingsManager(this._wijgrid);if(this._needToLoad(o)){var l=o.MapWGToDV(),m=false;if(this._isWijdatasource&&!this._isDynamicWijdatasource&&n.isLoaded()){m=true}this.ignoreCurrentChangedEvent(true);n.refresh(l,m)}else{if(this.isDataLoaded()){this._onDataViewLoaded();this._onDataViewReset()}}};j.prototype.currentPosition=function(l){var k=this._getDataViewInst();if(!arguments.length){return k.currentPosition()}this.ignoreCurrentChangedEvent(true);try{k.currentPosition(l)}finally{this.ignoreCurrentChangedEvent(false)}};j.prototype.getValue=function(l,k){var m=this._getDataViewInst();if(typeof(k)==="number"){k=k+""}return m.getProperty(l,k)};j.prototype.setValue=function(l,k,m){var n=this._getDataViewInst();this.ignoreChangeEvent(true);try{if(typeof(k)==="number"){k=k+""}n.setProperty(l,k,m)}finally{this.ignoreChangeEvent(false)}};j.prototype.makeDirty=function(){this._propChangeListener.removeAll();this._totals=null;this._sharedDataItems=null};j.prototype._createDataViewWrapper=function(){var l,n=this._wijgrid.options.data,o=this._getDataViewInst(),m=false;if(o){return}if(!n){this._domSource=this._processDOM(this._wijgrid.element,this._wijgrid.options.readAttributesFromData);n=this._domSource.items}m=(typeof(wijdatasource)!=="undefined"&&(n instanceof wijdatasource));this._isOwnDataView=(g.isArray(n)||m);this._isWijdatasource=!!(this._isOwnDataView&&m);this._isDynamicWijdatasource=!!(this._isOwnDataView&&m&&n.dynamic);if(this._isOwnDataView){if(!this._domSource&&this._wijgrid.options.readAttributesFromData){this._moveAttributesToExpando(n)}var k=this.isBoundedToDOM()&&b.grid.getTableSection(this._wijgrid.element,b.grid.rowScope.body);o=b.grid.GridDataView.create(b.data.asDataView(this._parseOwnData(n,k)))}else{o=n}this._wijgrid._wijDataView=o;this._toDispose.push(o.isLoading.subscribe(g.proxy(this._onDataViewLoadingInternal,this)));this._toDispose.push(o.isLoaded.subscribe(g.proxy(this._onDataViewLoadedInternal,this)));this._toDispose.push(o.subscribe(g.proxy(this._onDataViewChangeInternal,this)));this._toDispose.push(o.currentPosition.subscribe(g.proxy(this._onDataViewCurrentChangedInternal,this)));this._propChangeListener=new b.grid.propChangeListener(g.proxy(this._onPropertyChanged,this))};j.prototype._parseOwnData=function(q,m){var l=this;if(q&&q.length){var n=g.extend(true,[],this._wijgrid.options.columns),o=b.data.ArrayDataViewBase._getProps(q[0])||[],p=this._propDescriptorsToFieldsInfo(o),k=[];this._wijgrid._prepareColumnOptions(n,"merge",p,true,true);b.grid.traverse(n,function(r){if(b.grid.validDataKey(r.dataKey)){k.push(r)}});if(n.length){g.each(q,function(s,r){b.grid.dataViewWrapper._parseDataItem(l._wijgrid,r,(m&&m.rows[s]),k)})}}return q};j._parseDataItem=function i(m,k,l,n){g.each(n,function(p,o){if((b.grid.getDataType(o)!=="string")&&b.grid.validDataKey(o.dataKey)){var q=k[o.dataKey],r=m.parse(o,q);if(isNaN(r)){var s=null;if(l){s=l.cells[o.dataKey]}r=m.parseFailed(o,q,k,s)}k[o.dataKey]=r}});return k};j.prototype._getDataViewInst=function(){return this._wijgrid._wijDataView};j.prototype._needToLoad=function(k){var l=this._getDataViewInst();if(this._isDynamicWijdatasource||(this._isWijdatasource&&!l.isLoaded())){return true}if(this._isOwnDataView&&!this._isWijdatasource&&this.isDataLoaded()){return true}if(this.isDataLoaded()||l.isLoading()){return !k.compareSettings()}return true};j.prototype._validateSettings=function(k){if(!this._isOwnDataView&&this._wijgrid.options.allowPaging&&((k.DVPagingSettings()||{}).pageSize!==(k.WGPagingSettings()||{}).pageSize)){throw"The pageSize option of the external dataView can't be changed."}};j.prototype._onDataViewLoadingInternal=function(k){if(this._ignoreAllEvents){return}if(k){if(!this._userData){this._onDataViewLoading()}}};j.prototype._onDataViewLoadedInternal=function(k){if(this._ignoreAllEvents){return}if(k){this._onDataViewLoaded()}};j.prototype._onDataViewChangeInternal=function(l){var k=this;if(this._ignoreAllEvents||this._ignoreChangeEvent){return}if(l.changes){if(l.length&&l[0].entityState()==="detached"){return}g.each(l.changes,function(m,n){switch(n.changeType){case"remove":k._propChangeListener.remove(n.index);break;case"add":k._propChangeListener.insert(n.index,n.element);break}})}this._onDataViewChange.apply(this,arguments)};j.prototype._onDataViewCurrentChangedInternal=function(){if(this._ignoreAllEvents||this._ignoreCurrentChangedEvent){return}this._onDataViewCurrentChanged.apply(this,arguments)};j.prototype._onDataViewReset=function(){try{this.ignoreCurrentChangedEvent(false);this.makeDirty();this._wijgrid._onDataViewReset(this._userData)}finally{this._userData=null}};j.prototype._onPropertyChanged=function(l){var k=this;if(this._changeTimer>0){window.clearTimeout(this._changeTimer);this._changeTimer=0}if(this._changeTimer!=-1){this._changeTimer=window.setTimeout(function(){k._changeTimer=-1;if(!k._wijgrid._destroyed){k._onDataViewChange()}k._changeTimer=0},100)}};j.prototype._onDataViewChange=function(k){this._onDataViewReset()};j.prototype._onDataViewCurrentChanged=function(l,k){this._wijgrid._onDataViewCurrentPositionChanged(l,k)};j.prototype._onDataViewLoading=function(){this._wijgrid._onDataViewLoading()};j.prototype._onDataViewLoaded=function(){this._wijgrid._onDataViewLoaded()};j.prototype._getSharedDataItems=function(){if(!this._sharedDataItems){var n=this._getDataViewInst(),k=n.count();this._sharedDataItems=[];for(var m=0;m<k;m++){var l=n.item(m);this._propChangeListener.insert(m,l);this._sharedDataItems.push(this._wrapDataItem(l,m))}}if(!this._sharedDataItems){this._sharedDataItems=[]}return this._sharedDataItems};j.prototype._getTotals=function(){if(!this._totals){var k=this._getDataViewInst();this._totals=this._prepareTotals(k,this._wijgrid._prepareTotalsRequest(true))}if(!this._totals){this._totals={}}return this._totals};j.prototype._prepareTotals=function(r,q){if(!q||q.length===0){return{}}var p,l,o,m,n=[],k={};for(p=0,l=q.length;p<l;p++){n.push(new b.grid.tally())}for(p=0,l=r.count();p<l;p++){for(o=0,m=n.length;o<m;o++){n[o].add(this._wijgrid.parse(q[o].column,this.getValue(p,q[o].column.dataKey)))}}for(p=0,l=n.length;p<l;p++){k[q[p].column.dataKey]=n[p].getValueString(q[p].column)}return k};j.prototype._processDOM=function(m,l){var k={items:[],emptyData:[],header:b.grid.readTableSection(m,b.grid.rowScope.head)};if(b.grid.getTableSectionLength(m,2)===1&&g(b.grid.getTableSectionRow(m,2,0)).hasClass("wijmo-wijgrid-emptydatarow")){k.emptyData=b.grid.readTableSection(m,b.grid.rowScope.body)}else{k.items=b.grid.readTableSection(m,b.grid.rowScope.body,l)}return k};j.prototype._moveAttributesToExpando=function(k){g.each(k,function(l,m){var o=(b).data.Expando.getFrom(m,true),n;n=o[b.grid.EXPANDO]={cellsAttributes:{},rowAttributes:{}};if(m.rowAttributes){n.rowAttributes=m.rowAttributes;delete m.rowAttributes}g.each(m,function(q,p){if(g.isArray(p)){n.cellsAttributes[q]=p[1];m[q]=p[0]}})})};j.prototype._wrapDataItem=function(k,l){return{values:k,originalRowIndex:l}};j.prototype._refreshSilent=function(){var k=this._getDataViewInst();if(k){try{this._ignoreAllEvents=true;k.refresh()}finally{this._ignoreAllEvents=false}}};j.prototype._unsafeReplace=function(k,l){var m=this._getDataViewInst();if(!(m instanceof b.grid.GridDataView)){"operation is not supported"}m._unsafeReplace(k,l)};j.prototype._unsafeSplice=function(k,m,l){var n=this._getDataViewInst();if(!(n instanceof b.grid.GridDataView)){"operation is not supported"}if(arguments.length===2){n._unsafeSplice(k,m)}else{n._unsafeSplice(k,m,l)}};j.prototype._unsafePush=function(k){var l=this._getDataViewInst();if(!(l instanceof b.grid.GridDataView)){"operation is not supported"}l._unsafePush(k)};return j})();d.dataViewWrapper=f;function c(i){return i&&("pageCount" in i)?i:null}d.asPagedDataView=c;function e(i){return i&&("commitEdit" in i)?i:null}d.asEditableDataView=e;var h=(function(){function i(j){this._subscriptions=[];this._callback=j}i.prototype.insert=function(k,l){var m=[],j=this;this._subscriptions.splice(k,0,m);g.each(l,function(n,o){if(j._isValidPropName(n)&&o&&g.isFunction(o.subscribe)){m.push(o.subscribe(j._callback))}})};i.prototype.remove=function(k){var j=this._subscriptions[k];if(j){g.each(j,function(l,m){m.dispose();j[l]=null})}this._subscriptions[k]=null;this._subscriptions.splice(k,1)};i.prototype.removeAll=function(){var j,k;while(j=this._subscriptions.length){this.remove(j-1)}this._subscriptions=[]};i.prototype.dispose=function(){this.removeAll()};i.prototype._isValidPropName=function(j){if(j&&(typeof(j)==="string")){return j.match("^entityState|jQuery")===null}return true};return i})();d.propChangeListener=h})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var f=jQuery;var e=(function(){function g(j,i,k,h,l){this.cr=new b.grid.cellRange(-1,-1);this.isExpanded=false;this._value=-1;this._sum=-1;this._position="none";this._hasHeaderOrFooter=true;if(j!==undefined){this.isExpanded=j}if(i!==undefined){this.cr=i}if(k!==undefined){this._sum=k}if(h!==undefined){this._position=h}if(l!==undefined){this._hasHeaderOrFooter=l}}g.prototype.isSubRange=function(h){return((this.cr.r1>=h.cr.r1)&&(this.cr.r2<=h.cr.r2))};g.prototype.toString=function(){return this.cr.r1+"-"+this.cr.r2};g.prototype.getHeaderImageClass=function(h){var i=this.owner;if(i){return h?i.expandedImageClass||d.c1field.prototype.options.groupInfo.expandedImageClass:i.collapsedImageClass||d.c1field.prototype.options.groupInfo.collapsedImageClass}return null};g.prototype.collapse=function(){var j,k,i,l,h;if((j=this.owner)&&(k=j.owner)&&(i=k.owner)){l=i._field("leaves");if(b.grid.groupHelper.isParentExpanded(l,this.cr,j.level)){if((j.position!=="footer")&&(j.outlineMode!=="none")){h=b.grid.groupHelper.getGroupedColumnsCount(l);this._collapse(i._rows(),l,this,h,i._field("viewRenderBounds").start)}}}};g.prototype.expand=function(l){var j,k,i,m,h;if((j=this.owner)&&(k=j.owner)&&(i=k.owner)){m=i._field("leaves");if(b.grid.groupHelper.isParentExpanded(m,this.cr,j.level)){h=b.grid.groupHelper.getGroupedColumnsCount(m);this._expand(i._rows(),m,this,h,l,true,i._field("viewRenderBounds").start)}}};g.prototype._collapse=function(l,s,t,u,q){var h=t.owner,m=t.cr.r1,v=t.cr.r2,p,r,o,k,n;switch(h.position){case"header":case"headerAndFooter":this._toggleRowVisibility(l.item(t.cr.r1-q),undefined,false);m++;break}for(p=m;p<=v;p++){this._toggleRowVisibility(l.item(p-q),false)}t.isExpanded=false;this._updateHeaderIcon(l,t,q);for(p=h.level+1;p<=u;p++){o=b.grid.groupHelper.getChildGroupRanges(s,t.cr,p-1);for(n=0,r=o.length;n<r;n++){k=o[n];k.isExpanded=false;switch(k.owner.position){case"header":case"headerAndFooter":this._toggleRowVisibility(l.item(k.cr.r1-q),undefined,false);break}this._updateHeaderIcon(l,k,q)}}};g.prototype._expand=function(n,s,u,v,h,l,q){var j=u.owner,m=u.cr.r1,w=u.cr.r2,p,r,o,k,t;switch(j.position){case"header":this._toggleRowVisibility(n.item(m-q),true,l||h);m++;break;case"footer":this._toggleRowVisibility(n.item(w-q),true);w--;break;case"headerAndFooter":this._toggleRowVisibility(n.item(m-q),true,l||h);if(l){this._toggleRowVisibility(n.item(w-q),true)}m++;w--;break}if(l){u.isExpanded=true;this._updateHeaderIcon(n,u,q)}else{return}if(u.owner.level===v){for(p=m;p<=w;p++){this._toggleRowVisibility(n.item(p-q),true)}}else{o=b.grid.groupHelper.getChildGroupRanges(s,u.cr,u.owner.level);if(o.length&&(m!==o[0].cr.r1)){for(p=m;p<o[0].cr.r1;p++){this._toggleRowVisibility(n.item(p-q),true)}}if(h){for(p=0,r=o.length;p<r;p++){k=o[p];this._expand(n,s,k,v,h,true,q)}}else{for(p=0,r=o.length;p<r;p++){k=o[p];t=(k.owner.position==="footer"||k.owner.outlineMode==="none")?true:false;this._expand(n,s,k,v,false,t,q)}}}};g.prototype._toggleRowVisibility=function(i,j,h){if(i){if(i[0]){if(j!==undefined){i[0].style.display=j?"":"none";i[0]["aria-hidden"]=j?"false":"true"}if(h!==undefined){i[0]["aria-expanded"]=h?"true":"false"}}if(i[1]){if(j!==undefined){i[1].style.display=j?"":"none";i[1]["aria-hidden"]=j?"false":"true"}if(h!==undefined){i[1]["aria-expanded"]=h?"true":"false"}}}};g.prototype._updateHeaderIcon=function(i,k,j){if(k.owner.position!=="footer"){var h=i.item(k.cr.r1-j);if(h){f.each(h,function(l,m){if(m){var n=f(m).find("div.wijmo-wijgrid-grouptogglebtn:first-child");if(n&&n.length){n.toggleClass(k.getHeaderImageClass(!k.isExpanded),false);n.toggleClass(k.getHeaderImageClass(k.isExpanded),true)}}})}}};return g})();d.groupRange=e;var c=(function(){function g(){this._groupRowIdx=0}g.prototype.group=function(i,j,m){var l=this;this._grid=i;this._data=j;this._leaves=m;this._groupRowIdx=0;f.each(m,function(n,o){if(o.groupInfo){delete o.groupInfo.level;delete o.groupInfo.expandInfo}});var h=this._grid._groupedColumns(true),k=1;f.each(h,function(n,o){l._groupRowIdx=0;if(o.groupInfo&&(o.groupInfo.position&&(o.groupInfo.position!=="none"))&&(o.dataIndex>=0)){o.groupInfo.level=k;o.groupInfo.expandInfo=[];l._processRowGroup(o,k++)}});delete this._grid;delete this._data;delete this._leaves};g.prototype._processRowGroup=function(q,j){var v,p,h,o,k,r,l,n,s,m,t=0,u=true;f.each(this._leaves,function(x,w){if(w.parentVis){t=x;return false}});for(v=0;v<this._data.length;v++){if(!(this._data[v].rowType&b.grid.rowType.data)){continue}p=this._getGroupCellRange(v,q,j);h=true;o=(q.groupInfo.outlineMode==="startCollapsed");if(o||b.grid.groupHelper.isParentCollapsed(this._leaves,p,j)){if((q.groupInfo.groupSingleRow===false)&&(p.r1===p.r2)){continue}h=false}if(j&&this._grid.options.groupIndent){for(k=p.r1;k<=p.r2;k++){this._addIndent(this._data[k][t],j)}}u=!(q.groupInfo.groupSingleRow===false&&(p.r1===p.r2));switch(q.groupInfo.position){case"header":r=this._addGroupRange(q.groupInfo,p,h,u);for(m=p.r1;m<=p.r2;m++){this._data[m].__attr["aria-level"]=j+1;if(!h){this._data[m].__style.display="none";this._data[m].__attr["aria-hidden"]=true}}if(!u){break}this._updateByGroupRange(r,j);l=b.grid.groupHelper.isParentCollapsed(this._leaves,r.cr,j);n=this._buildGroupRow(r,p,true,l);this._data.splice(p.r1,0,n);n.__attr["arial-level"]=j;n.__attr["aria-expanded"]=h;if(l){n.__style.display="none";n.__attr["aria-hidden"]=true}v=p.r2+1;break;case"footer":r=this._addGroupRange(q.groupInfo,p,true,u);if(!u){break}this._updateByGroupRange(r,j);s=this._buildGroupRow(r,p,false,false);s.__attr["aria-level"]=j;this._data.splice(p.r2+1,0,s);v=p.r2+1;l=b.grid.groupHelper.isParentCollapsed(this._leaves,r.cr,j);if(l){s.__style.display="none";s.__attr["aria-hidden"]=true}break;case"headerAndFooter":r=this._addGroupRange(q.groupInfo,p,h,u);for(m=p.r1;m<=p.r2;m++){this._data[m].__attr["aria-level"]=j+1;if(!h){this._data[m].__style.display="none";this._data[m].__attr["aria-hidden"]=true}}if(!u){break}this._updateByGroupRange(r,j);l=b.grid.groupHelper.isParentCollapsed(this._leaves,r.cr,j);n=this._buildGroupRow(r,p,true,l);s=this._buildGroupRow(r,p,false,false);this._data.splice(p.r2+1,0,s);s.__attr["aria-level"]=j;if(l||!h){s.__style.display="none";s.__attr["aria-hidden"]=true}this._data.splice(p.r1,0,n);n.__attr["aria-level"]=j;n.__attr["aria-expanded"]=h;if(l){n.__style.display="none";n.__attr["aria-hidden"]=true}v=p.r2+2;break;default:throw b.grid.stringFormat('Unknown Position value: "{0}"',q.groupInfo.position)}this._groupRowIdx++}};g.prototype._buildGroupRow=function(p,t,j,w){var n=p.owner,v=n.owner,o=v.owner,l=[],m="",s="",y,h,x,i,u,k,r,q;(l).__style={};(l).__attr={};(l).__attr.id=((j)?"GH":"GF")+this._groupRowIdx+"-"+n.level;(l).rowType=(j)?b.grid.rowType.groupHeader:b.grid.rowType.groupFooter;if((v.dataIndex>=0)&&((y=this._data[t.r1][v.dataIndex].value)!==null)){m=o.toStr(v,y)}if(this._grid._showRowHeader()){l.push({html:"&nbsp;"})}h={html:"",__attr:{},__style:{}};if(j&&n.outlineMode!=="none"){if(p.isExpanded){h.html='<div class="'+o.options.wijCSS.icon+" "+p.getHeaderImageClass(true)+' wijmo-wijgrid-grouptogglebtn">&nbsp;</div>'}else{h.html='<div class="'+o.options.wijCSS.icon+" "+p.getHeaderImageClass(false)+' wijmo-wijgrid-grouptogglebtn">&nbsp;</div>'}}l.push(h);if(v.aggregate&&(v.aggregate!=="none")){s=this._getAggregate(t,v,v,j,m)}x=(j)?n.headerText:n.footerText;if(x==="custom"){i={data:this._data,column:v,groupByColumn:n.owner,groupText:m,text:"",groupingStart:t.r1,groupingEnd:t.r2,isGroupHeader:j,aggregate:s};if(this._grid._trigger("groupText",null,i)){x=i.text}}else{if((x===undefined)||(x===null)){if(j){x="{1}: {0}"}if(s||(s===0)){x=x?x+" {2}":"{2}"}}x=b.grid.stringFormat(x,m,v&&v.headerText?v.headerText:"",s.toString())}if(!x){x="&nbsp;"}h.html+="<span>"+x+"</span>";this._addIndent(h,n.level-1);u=1;k=(this._grid._showRowHeader())?1:0;r=true;for(;k<this._leaves.length;k++){y=this._leaves[k];if(y.parentVis){if(r){r=false;continue}if((y.dynamic!==true)&&y.aggregate&&(y.aggregate!=="none")){break}u++}}for(;k<this._leaves.length;k++){y=this._leaves[k];if(y.parentVis){q=this._getAggregate(t,y,n.owner,j,m);if(!q&&(q!==0)){q="&nbsp;"}l.push({html:q.toString(),__attr:{groupInfo:{leafIndex:y.leavesIdx,purpose:b.grid.groupRowCellPurpose.aggregateCell}}})}}h.__attr.colSpan=u;h.__attr.groupInfo={leafIndex:v.leavesIdx,purpose:b.grid.groupRowCellPurpose.groupCell};return l};g.prototype._getAggregate=function(l,k,i,o,n){var h="",m,j,p;if(!k.aggregate||(k.aggregate==="none")){return h}if(k.aggregate==="custom"){m={data:this._data,column:k,groupByColumn:i,groupText:n,text:"",groupingStart:l.r1,groupingEnd:l.r2,isGroupHeader:o};if(this._grid._trigger("groupAggregate",null,m)){h=m.text}}else{j=new b.grid.tally();for(p=l.r1;p<=l.r2;p++){j.add(this._data[p][k.dataIndex].value)}h=j.getValueString(k)}return h};g.prototype._getGroupCellRange=function(p,l,h){var o=l.leavesIdx,j=new b.grid.cellRange(p,o),i=b.grid.groupHelper.getParentGroupRange(this._leaves,j,h),n,m,k;if(this._data[p].rowType&b.grid.rowType.data){n=this._data[p][l.dataIndex].value;if(n instanceof Date){n=n.getTime()}for(j.r2=p,k=this._data.length-1;j.r2<k;j.r2++){if(!(this._data[j.r2+1].rowType&b.grid.rowType.data)||(i&&(j.r2+1>i.cr.r2))){break}m=this._data[j.r2+1][l.dataIndex].value;if(m instanceof Date){m=m.getTime()}if(n!==m){break}}}return j};g.prototype._addGroupRange=function(j,n,h,p){var q=null,o=b.grid.groupHelper.getChildGroupIndex(n,j.expandInfo),m,i,l,k;if(o>=0&&o<j.expandInfo.length){q=j.expandInfo[o]}else{m=new b.grid.cellRange(n.r1,n.r1,n.r2,n.r2);i=(j.position==="footer"||!p)?true:h&&(j.outlineMode!=="startCollapsed");q=new b.grid.groupRange(i,m,-1,j.position,p);q.owner=j;j.expandInfo.push(q)}if(q&&p){l=n.r1;k=n.r2;if(j.position==="headerAndFooter"){k+=2}if(j.position!=="headerAndFooter"){k++}q.cr.r2=k}return q};g.prototype._updateByGroupRange=function(p,h){var n,o,k,l,m,r,q;for(n=0,o=this._leaves.length;n<o;n++){k=this._leaves[n].groupInfo;if(k&&(k.level<h)){l=(k.expandInfo)?k.expandInfo.length:0;for(m=0;m<l;m++){r=k.expandInfo[m];q=(p.position==="headerAndFooter")?2:1;if(r.cr.r1>=p.cr.r1&&!((r.cr.r1===p.cr.r1)&&(r.position==="footer"))){r.cr.r1+=q}if(r.cr.r2>=p.cr.r1){r.cr.r2+=q}}}}};g.prototype._addIndent=function(i,j){var h;if(j>0&&(h=this._grid.options.groupIndent)){i.__style.paddingLeft=(h*j)+"px"}};return g})();d.grouper=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(){}f._getGroupInfoRegExp=new RegExp(".*G([HF]){1}(\\d+)-(\\d+)$");f.getGroupInfo=function m(s){if(s){var r=b.grid.groupHelper._getGroupInfoRegExp.exec(s.id),t,p,q;if(r){t=parseInt(r[3],10);p=parseInt(r[2],10);q=(r[1]==="H");return{level:t,index:p,isHeader:q,toString:function(){return(q?"GH":"GF")+p+"-"+t}}}}return null};f.getColumnByGroupLevel=function j(t,s){var r,p,q;for(r=0,p=t.length;r<p;r++){q=t[r];if(q.groupInfo&&(q.groupInfo.level===s)){return q}}return null};f.getGroupedColumnsCount=function l(t){var q=0,s,p,r;for(s=0,p=t.length;s<p;s++){r=t[s].groupInfo;if(r&&(r.position==="header"||r.position==="headerAndFooter"||r.position==="footer")){q++}}return q};f.getChildGroupIndex=function n(q,p){var u=0,r=p.length-1,s,t;while(u<=r){s=((r-u)>>1)+u;t=p[s].cr.r1-q.r1;if(t===0){return s}if(t<0){u=s+1}else{r=s-1}}return u};f.getParentGroupIndex=function h(q,r){var p=b.grid.groupHelper.getChildGroupIndex(q,r);if(p>0){p--}return(p<r.length)?p:-1};f.getChildGroupRanges=function k(t,v,p){var y=[],r,q,s,u,w,x=b.grid.groupHelper.getColumnByGroupLevel(t,p+1);if(x){r=x.groupInfo.expandInfo;w=b.grid.groupHelper.getChildGroupIndex(v,r);for(s=w,u=r.length;s<u;s++){q=r[s];if(q.cr.r2<=v.r2){y.push(q)}else{break}}}return y};f.getParentGroupRange=function g(u,q,t){var s,r,p;if(t===undefined){t=65535}if(t-2>=0){for(s=u.length-1;s>=0;s--){r=u[s].groupInfo;if(!r||!r.expandInfo||(r.level<0)||(r.level!==t-1)){continue}p=b.grid.groupHelper.getParentGroupIndex(q,r.expandInfo);if(p>=0){return r.expandInfo[p]}}}return null};f.isParentCollapsed=function i(t,p,s){var q,r;if(s===1){return false}for(q=s;q>1;q--){r=b.grid.groupHelper.getParentGroupRange(t,p,q);if(r&&!r.isExpanded){return true}p=r.cr}return false};f.isParentExpanded=function o(t,p,s){var q,r;if(s===1){return true}for(q=s;q>1;q--){r=b.grid.groupHelper.getParentGroupRange(t,p,q);if(r&&r.isExpanded){return true}p=r.cr}return false};return f})();c.groupHelper=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function g(j,k,h,i){switch(arguments.length){case 2:this.r1=this.r2=j;this.c1=this.c2=k;break;case 4:this.r1=j;this.r2=h;this.c1=k;this.c2=i;break;default:this.r1=0;this.r2=0;this.c1=0;this.c2=0}}g.prototype.isSingleCell=function(){return((this.r1===this.r2)&&(this.c1===this.c2))};return g})();d.cellRange=c;var f=(function(){function g(){}g.prototype.merge=function(m,j){this._leaves=j;this._data=m;var l,h,k;for(l=0,h=this._leaves.length;l<h;l++){k=this._leaves[l];if((k.dataIndex>=0)&&!k.isBand&&(k.rowMerge==="free"||k.rowMerge==="restricted")){this._mergeColumn(k)}}delete this._data;delete this._leaves};g.prototype._mergeColumn=function(n){var m=n.dataIndex,k,h,j,l,o;for(k=0,h=this._data.length;k<h;k++){if(!(this._data[k].rowType&b.grid.rowType.data)){continue}j=this._getCellRange(k,n);if(j.r1!==j.r2){l=j.r2-j.r1+1;this._data[j.r1][m].__attr.rowSpan=l;for(o=j.r1+1;o<=j.r2;o++){this._data[o][m].visible=false}}k=j.r2}};g.prototype._getCellRange=function(i,l){var k=l.dataIndex,n=new b.grid.cellRange(i,k),p=(this._data[i][k].value||"").toString(),j=this._data.length,h,o,m,q;for(n.r2=i;n.r2<j-1;n.r2++){h=this._data[n.r2+1];if(!(h.rowType&b.grid.rowType.data)||((h[k].value||"").toString()!==p)){break}}o=l.leavesIdx;if(o>0&&l.rowMerge==="restricted"){m=this._leaves[o-1];if(m.dataIndex>=0){q=this._getCellRange(i,m);n.r1=Math.max(n.r1,q.r1);n.r2=Math.min(n.r2,q.r2)}}return n};return g})();d.merger=f})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var m=jQuery;c.EXPANDO="__wijgrid";(function(I){I._map=[];I.header=1;I.data=2;I.dataAlt=4;I.filter=8;I.groupHeader=16;I.groupFooter=32;I.footer=64;I.emptyDataRow=128})(c.rowType||(c.rowType={}));var w=c.rowType;(function(I){I._map=[];I.none=0;I.rendering=1;I.current=2;I.hovered=4;I.selected=8})(c.renderState||(c.renderState={}));var G=c.renderState;(function(I){I._map=[];I.table=0;I.head=1;I.body=2;I.foot=3})(c.rowScope||(c.rowScope={}));var l=c.rowScope;(function(I){I._map=[];I.none=0;I.toColumn=1;I.toRow=2})(c.cellRangeExtendMode||(c.cellRangeExtendMode={}));var r=c.cellRangeExtendMode;(function(I){I._map=[];I.createIfNull=0;I.createAlways=1;I.dispose=2})(c.objectMode||(c.objectMode={}));var E=c.objectMode;(function(I){I._map=[];I.groupCell=0;I.aggregateCell=1})(c.groupRowCellPurpose||(c.groupRowCellPurpose={}));var p=c.groupRowCellPurpose;function i(L,J){var M,I,K;if(m.isArray(L)&&m.isArray(J)){if(L.length===J.length){K=true;for(M=0,I=L.length;M<I&&K;M++){K=b.grid.compareObj(L[M],J[M])}return K}}else{if(m.isPlainObject(L)&&m.isPlainObject(J)){for(M in L){if(L.hasOwnProperty(M)){if(!b.grid.compareObj(L[M],J[M])){return false}}}for(M in J){if(J.hasOwnProperty(M)){if(!b.grid.compareObj(L[M],J[M])){return false}}}return true}else{if(L instanceof Date){L=L.getTime()}if(J instanceof Date){J=J.getTime()}}}return L===J}c.compareObj=i;function e(L){var M=[];for(var K=0;K<(arguments.length-1);K++){M[K]=arguments[K+1]}var J,I;if(!L){return""}for(J=0,I=M.length;J<I;J++){L=L.replace(new RegExp("\\{"+J+"\\}","gm"),M[J])}return L}c.stringFormat=e;function o(I){return(I&&!(I<0))||(I===0)}c.validDataKey=o;function q(I){if(I&&(I instanceof Date)){return !isNaN(I.getTime())}return false}c.validDate=q;function y(I){return I.dataType||I._underlyingDataType||"string"}c.getDataType=y;function d(I,J){if(I&&J){I.find(".ui-widget").each(function(K,L){m.each(m(L).data(),function(N,M){if(M.widgetName){J(K,M)}});return true})}}c.iterateChildrenWidgets=d;function H(I,J){var K=[];m.each(I.data(),function(L){if(L.indexOf(J)===0){K.push(L)}});m.each(K,function(L,M){I.removeData(M)})}c.remove$dataByPrefix=H;var A=(function(){function I(J){this._dom=J}I.prototype.getSelection=function(){var L=0,J=0,K;if(this._dom.selectionStart!==undefined){L=this._dom.selectionStart;J=this._dom.selectionEnd}else{if(document.selection){K=document.selection.createRange().duplicate();J=K.text.length;L=Math.abs(K.moveStart("character",-this._dom.value.length));J+=L}}return{start:L,end:J,length:J-L}};I.prototype.setSelection=function(J){if(this._dom.selectionStart!==undefined){this._dom.setSelectionRange(J.start,J.end)}else{var K=this._dom.createTextRange();K.collapse(true);K.moveStart("character",J.start);K.moveEnd("character",J.end);K.select()}};I.prototype.toggleSelection=function(L){var J=m(this._dom),K="onselectstart" in this._dom;if(L){if(K){J.unbind(".wijgrid-disableSelection")}else{J.css({MozUserSelect:"",WebkitUserSelect:""})}}else{if(K){J.bind("selectstart.wijgrid-disableSelection",function(M){M.preventDefault()})}else{J.css({MozUserSelect:"-moz-none",WebkitUserSelect:"none"})}}};return I})();c.domSelection=A;function h(I){return m.extend(true,{},c.c1basefield.prototype.options,c.c1field.prototype.options,{dynamic:true,isLeaf:true,isBand:false,parentIdx:-1},I)}c.createDynamicField=h;function n(K,J){if(K){var I=K.nodeType?m(K):K,L=I.offset();if(L){if(J){return{top:L.top,left:L.left,width:I[0].clientWidth||0,height:I[0].clientHeight||0}}return{top:L.top,left:L.left,width:I.outerWidth(),height:I.outerHeight()}}}return null}c.bounds=n;function t(L,N,K){if(N===undefined){N=3}if(L&&N!==0){if(!K&&L.nodeType===3){return L.nodeValue}if(L.nodeType===1){switch((L).type){case"button":case"text":case"textarea":case"select-one":return(L).value;case"checkbox":return(L).checked.toString()}var I="",J=0,M;while(M=L.childNodes[J++]){I+=b.grid._getDOMText(M,N-1)}return I}}return""}c._getDOMText=t;function F(K,O,I,Q){var N=(K.jquery||m.isArray(K)),L,P,M,J=O+I;if(arguments.length===3){if(N){return m.data(K[0],J)}return m.data(K,J)}else{if(N){for(L=0,P=K.length;L<P;L++){M=m.data(K[L],J,Q)}return M}return m.data(K,J,Q)}}c.dataPrefix=F;function B(L,M){if(M&&L){var I,K,J;for(I in M){if(M.hasOwnProperty(I)){K=M[I];J=typeof(K);if((J==="string"||J==="boolean"||J==="number")&&(L[I]===undefined)){L[I]=K}}}}}c.shallowMerge=B;function D(I){return(I&&(typeof(I)==="object")&&!(I instanceof Date))}c.isCustomObject=D;function s(K,M){var I,L,J=m.isFunction(M);for(I in K){if(K.hasOwnProperty(I)){L=J?M(K[I]):(K[I]===M);if(L===true){return{at:I,found:K[I]}}}}return{at:null,found:null}}c.search=s;function x(P,K){if(P){var N,J,M=0,I={},O,L;for(N=0,J=P.attributes.length;N<J;N++){L=P.attributes[N].name;if(L&&(!K||!K(L))){O=P.getAttribute(L);if(L==="style"){O=(typeof(O)==="object")?O.cssText:O}if(!O&&L==="class"){O=P.getAttribute("className")}if(O&&(typeof(O)!=="function")){I[L]=O;M++}}}if(M){return I}}return null}c.getAttributes=x;function u(K,L){var J,M,O,I,N;if(K){if(typeof(L)!=="object"&&!m.isFunction(L)){L={}}for(J in K){M=K[J];O=L[O];if(M===L){continue}if(M&&(m.isPlainObject(M)||(I=m.isArray(M)))){if(I){I=false;N=O&&m.isArray(O)?O:[]}else{N=O&&m.isPlainObject(O)?O:{}}L[J]=b.grid.deepExtend(M,N)}else{L[J]=M}}}return L}c.deepExtend=u;function z(){if(m.ui&&m.ui.keyCode){return m.ui.keyCode}if(m.mobile&&m.mobile.keyCode){return m.mobile.keyCode}throw"keyCode object is not found"}c.getKeyCodeEnum=z;function j(J,I){if(J&&J.jquery){J=J[0]}if(J){return(arguments.length===1)?m.data(J,"wijgridwidgetName"):m.data(J,"wijgridwidgetName",I)}return undefined}c.widgetName=j;var g=(function(){function J(){}J._requiresExtendedSupport={date:"",datetime:"","datetime-local":"",month:"",time:""};J.isExtendSupportRequired=function I(O){O=(O||"").toLowerCase();return(O in b.grid.HTML5InputSupport._requiresExtendedSupport)};J.getDefaultInputType=function M(Q,P){var O=P.inputType;if(!O){O="text";if(Q){switch(b.grid.getDataType(P)){case"number":case"currency":O="number";break;case"datetime":O="datetime";break}}}return O};J.toStr=function K(Q,P){var O=Q;P=(P||"").toLowerCase();if(b.grid.HTML5InputSupport.isExtendSupportRequired(P)){switch(P){case"datetime":O=(Q)?O=Globalize.format(Q,"yyyy-MM-ddTHH:mm:ssZ"):"";break;case"datetime-local":O=(Q)?O=Globalize.format(Q,"yyyy-MM-ddTHH:mm:ss"):"";break;case"date":O=(Q)?O=Globalize.format(Q,"yyyy-MM-dd"):"";break;case"month":O=(Q)?O=Globalize.format(Q,"yyyy-MM"):"";break;case"time":O=(Q)?O=Globalize.format(Q,"HH:mm:ss"):"";break}}else{O=Q+""}return O};J.parse=function L(Q,P){var O,R=function(S){S=new Date(S);if(!b.grid.validDate(S)){S=null}return S};P=(P||"").toLowerCase();if(b.grid.HTML5InputSupport.isExtendSupportRequired(P)){switch(P){case"datetime":O=Globalize.parseDate(Q,"yyyy-MM-ddTHH:mm:ssZ")||Globalize.parseDate(Q,"yyyy-MM-ddTHH:mmZ")||R(Q);break;case"datetime-local":O=Globalize.parseDate(Q,"yyyy-MM-ddTHH:mm:ss")||Globalize.parseDate(Q,"yyyy-MM-ddTHH:mm")||R(Q);break;case"date":O=Globalize.parseDate(Q,"yyyy-MM-dd")||R(Q);break;case"month":O=Globalize.parseDate(Q,"yyyy-MM");break;case"time":O=Globalize.parseDate(Q,"HH:mm:ss")||Globalize.parseDate(Q,"HH:mm");break;case"number":O=parseFloat(Q)}}else{O=Q}return O};J.extend=function N(Q,P,O){if(!Q){Q=P}else{O=(O||"").toLowerCase();switch(O){case"date":Q.setFullYear(P.getFullYear(),P.getMonth(),P.getDate());break;case"month":Q.setFullYear(P.getFullYear(),P.getMonth());break;case"time":Q.setHours(P.getHours());Q.setMinutes(P.getMinutes());Q.setSeconds(P.getSeconds());break;default:Q=P}}return Q};return J})();c.HTML5InputSupport=g;function k(J,I,K){return(J>I)&&(J<(I+K))}c.isOverAxis=k;function C(N,J,M,L,I,K){return b.grid.isOverAxis(N,M,I)&&b.grid.isOverAxis(J,L,K)}c.isOver=C;var f=0;function v(){return"uid"+f++}c.getUID=v;m.extend(m.wijmo.wijgrid,{rowType:b.grid.rowType,renderState:b.grid.renderState,bounds:b.grid.bounds})})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){(function(f){f._map=[];f.Millisecond=1;f.Second=2;f.Minute=4;f.Hour=8;f.Day=16;f.Month=32;f.Year=64;f.DATE=f.Year|f.Month|f.Day;f.TIME=f.Hour|f.Minute|f.Second|f.Millisecond;f.ALL=f.DATE|f.TIME})(c.TimeUnit||(c.TimeUnit={}));var e=c.TimeUnit;var d=(function(){function j(){}j.convertInputType=function h(m){var l=b.grid.TimeUnitConverter.convertInputTypeToFormatString(m),k=b.grid.TimeUnitConverter.convertFormatString(l);return k};j.convertInputTypeToFormatString=function f(k){switch((k||"").toLowerCase()){case"datetime":case"datetime-local":return"f";case"date":return"d";case"month":return"Y";case"time":return"t"}return""};j.convertFormatString=function i(p){var l=0;if(p){if(p.length===1){switch(p[0]){case"t":return e.Hour|e.Minute;case"T":return e.TIME;case"d":case"D":return e.DATE;case"Y":return e.Month|e.Year;case"M":return e.Month|e.Day;case"f","F","S":return e.ALL}}var n,o;if(((n=p.indexOf("'"))>=0)&&((o=p.lastIndexOf("'"))>=0)&&(n!==o)){p=p.substr(0,n)+p.substring(o+1,p.length-1)}for(var m=0,k=p.length;m<k;m++){switch(p[m]){case"d":l|=e.Day;break;case"M":l|=e.Month;break;case"y":l|=e.Year;break;case"m":l|=e.Minute;break;case"h":case"H":l|=e.Hour;break;case"s":l|=e.Second;break;case"f":l|=e.Millisecond;break}}}return l||e.ALL};j.cutDate=function g(k,l){if(k){l=~l;if(l&e.Millisecond){k.setMilliseconds(0)}if(l&e.Second){k.setSeconds(0)}if(l&e.Minute){k.setMinutes(0)}if(l&e.Hour){k.setHours(0)}if(l&e.Day){k.setDate(1)}if(l&e.Month){k.setMonth(0)}if(l&e.Year){k.setFullYear(0)}}return k};return j})();c.TimeUnitConverter=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var f=(function(){function h(){}h.NoFilterOp={applicableTo:null,name:"NoFilter",arity:1,operator:function(){return true}};return h})();var c=(function(){function h(j){this._cache={};var i=this;this._wijgrid=j;this._addOperator(null,f.NoFilterOp);e.each(b.data.filtering.ops,function(k,l){i._addOperator(k,l)});e.each(j.options.customFilterOperators,function(k,l){i._addOperator(null,l,true)})}h.prototype.getByName=function(i){var j=this.getByNameInt(i);return(j)?j.op:null};h.prototype.getByNameInt=function(i){return this._cache[(i||"").toLowerCase()]};h.prototype.getByDataType=function(j){var k=[],i;e.each(this._cache,function(l,n){var m=n.op;if(!m.applicableTo||e.inArray(j,m.applicableTo)>=0){k.push(n)}});switch(this._wijgrid.options.filterOperatorsSortMode.toLowerCase()){case"alphabetical":k.sort(this._sortAlpha);break;case"alphabeticalcustomfirst":k.sort(this._sortAlphaCustomFirst);break;case"alphabeticalembeddedFirst":k.sort(this._sortAlphaEmbeddedFirst);break;case"none":break;default:break}i=e.map(k,function(m,l){return m.op});return i};h.prototype._addOperator=function(i,k,j){if(typeof j==="undefined"){j=false}if(i&&!k.name){k.name=i}i=(i||k.name).toLowerCase();if(!this._cache[i]){this._cache[i]={op:k,isCustom:(j===true)}}};h.prototype._sortAlpha=function(j,i){var l=j.op.name.toLowerCase(),k=i.op.name.toLowerCase();if(l!==k){if(l==="nofilter"){return -1}if(k==="nofilter"){return 1}}if(l===k){return 0}return(l<k)?-1:1};h.prototype._sortAlphaEmbeddedFirst=function(j,i){var l=j.op.name.toLowerCase(),k=i.op.name.toLowerCase();if(l!==k){if(l==="nofilter"){return -1}if(k==="nofilter"){return 1}}if(j.isCustom!==i.isCustom){if(j.isCustom){return 1}if(i.isCustom){return -1}}if(l===k){return 0}return(l<k)?-1:1};h.prototype._sortAlphaCustomFirst=function(j,i){var l=j.op.name.toLowerCase(),k=i.op.name.toLowerCase();if(l!==k){if(l==="nofilter"){return -1}if(k==="nofilter"){return 1}}if(j.isCustom!==i.isCustom){if(j.isCustom){return -1}if(i.isCustom){return 1}}if(l===k){return 0}return(l<k)?-1:1};return h})();d.filterOperatorsCache=c;var g=(function(){function l(){}l.marker="_wijgrid";l.getSingleValue=function i(m){if(e.isArray(m)){m=m[0];if(e.isArray(m)){m=m[0]}}return m};l.getSingleOperatorName=function h(m){if(e.isArray(m)){m=m[0]}return m.name||m||""};l.verify=function k(o,t,q,p){if(o){if(e.isArray(o)){var r,n,s=[],m=[];if(!e.isArray(t)){t=[t]}for(r=0,n=o.length;r<n;r++){if(b.grid.filterHelper._verifySingleOp(o[r],t[r],q,p)){s.push({name:o[r].name||o[r],condition:o[r].condition||"or"});m.push(t?t[r]:undefined)}}if(s.length){return{filterOperator:s,filterValue:m}}}else{if(b.grid.filterHelper._verifySingleOp(o,t,q,p)){return{filterOperator:o,filterValue:t}}}}return null};l._verifySingleOp=function j(m,q,o,n){if(m&&(m=(m.name||m))){var p;m=(m||"").toLowerCase();if((m!=="nofilter"||q!==undefined)&&(p=n.getByName(m))){if(p.applicableTo===null||e.inArray(o||"string",p.applicableTo)>=0){if(p.arity===1||(p.arity>1&&b.grid.filterHelper.getSingleValue(q)!==undefined)){return true}}}}return false};return l})();d.filterHelper=g})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var f=jQuery;function e(k,j){if(k&&!k.nodeType){k=k[0]}if(k){switch(j){case b.grid.rowScope.head:return k.tHead;case b.grid.rowScope.body:if(k.tBodies){return k.tBodies[0]||null}break;case b.grid.rowScope.foot:return k.tFoot;default:return k}}return null}d.getTableSection=e;function i(k,j){var l;if(k&&!k.nodeType){k=k[0]}return(k&&(l=this.getTableSection(k,j)))?l.rows.length:0}d.getTableSectionLength=i;function h(k,j,m){var l;if(k&&!k.nodeType){k=k[0]}return(k&&(l=this.getTableSection(k,j)))?(l.rows[m]||null):null}d.getTableSectionRow=h;function c(s,t,n){var o,q,w,j,k,v,r,l,u=[],m=function(x){x=x.toLowerCase();return x==="rowspan"||x==="colspan"},p;if(s&&!s.nodeType){s=s[0]}if(s&&(p=this.getTableSection(s,t))){for(o=0,q=p.rows.length;o<q;o++){k=p.rows[o];v=[];if(n){r=(b).data.Expando.getFrom(v,true);l=r[b.grid.EXPANDO]={cellsAttributes:{},rowAttributes:b.grid.getAttributes(k)||{}}}for(w=0,j=k.cells.length;w<j;w++){v[w]=f.trim((k.cells[w]).innerHTML);if(n){l.cellsAttributes[w]=b.grid.getAttributes(k.cells[w],m)||{}}}u[o]=v}}return u}d.readTableSection=c;var g=(function(){function j(l,m,k,n){this._width=0;this._table=l;this._offsets=[];if(n){this.ensureColGroup()}if(k){this.ensureTBody()}if(!m){this._buildOffsets()}}j.prototype.element=function(){return this._table};j.prototype.width=function(){return this._width};j.prototype.getCellIdx=function(l,k){return(l<this._width)?this._offsets[k][l].cellIdx:-1};j.prototype.getColumnIdx=function(l,k){if(typeof(l)!=="number"){var m=l;l=m.cellIndex;k=m.parentNode.rowIndex}return(l<this._width)?this._offsets[k][l].colIdx:-1};j.prototype.clearSection=function(l){var n,k,m=b.grid.getTableSection(this._table,l);switch(l){case b.grid.rowScope.body:n=this.getSectionLength(b.grid.rowScope.table);k=n+this.getSectionLength(l)-1;break;case b.grid.rowScope.foot:n=this.getSectionLength(b.grid.rowScope.table)+this.getSectionLength(b.grid.rowScope.head);k=n+this.getSectionLength(l)-1;break;default:n=0;k=this.getSectionLength(l)-1}while(m.rows.length){m.deleteRow(0)}this._offsets.splice(n,k-n+1)};j.prototype.getSectionLength=function(k){return b.grid.getTableSectionLength(this._table,k)};j.prototype.getSectionRow=function(l,k){return b.grid.getTableSectionRow(this._table,k,l)};j.prototype.forEachColumnCellNatural=function(n,q,p){var l,m,o,k;for(l=0,m=this._table.rows.length;l<m;l++){o=this._table.rows[l];if(n<o.cells.length){k=q(o.cells[n],l,p);if(k!==true){return k}}}return true};j.prototype.forEachColumnCell=function(o,r,q){var l,n,p,m,k;for(l=0,n=this._offsets.length;l<n;l++){p=this._table.rows[l];m=this.getCellIdx(o,l);if(m>=0){k=r(p.cells[m],l,q);if(k!==true){return k}}}return true};j.prototype.forEachRowCell=function(q,p,o){var n=this._table.rows[q],l,m,k;for(l=0,m=n.cells.length;l<m;l++){k=p(n.cells[l],l,o);if(k!==true){return k}}return true};j.prototype.colGroupTag=function(){var k=this._table.getElementsByTagName("colgroup");return((k&&k[0]))||null};j.prototype.colTags=function(){var k=this.colGroupTag();return(k&&k.getElementsByTagName("col"))||[]};j.prototype.ensureTBody=function(){return((this._table.tBodies&&this._table.tBodies[0])||this._table.appendChild(document.createElement("tbody")))};j.prototype.ensureTHead=function(){return(this._table.tHead&&this._table.tHead[0])||this._table.createTHead()};j.prototype.ensureTFoot=function(){return(this._table.tFoot&&this._table.tFoot[0])||this._table.createTFoot()};j.prototype.ensureColGroup=function(){var k=this._table.getElementsByTagName("colgroup");return((k&&k[0])||this._table.appendChild(document.createElement("colgroup")))};j.prototype.appendCol=function(l){var k=this.ensureColGroup();return((l&&k.appendChild(l))||k.appendChild(document.createElement("col")))};j.prototype.removeOffset=function(k){if(k>=0&&k<this._offsets.length){if(k<0||(!k&&k!==0)){k=this._offsets.length-1}this._offsets.splice(k,1)}};j.prototype.insertOffset=function(k){var m,l;if(this._width>0){m=[];for(l=0;l<this._width;l++){m.push({cellIdx:l,colIdx:l})}if(k<0||(!k&&k!==0)){k=this._offsets.length}this._offsets.splice(k,0,m)}};j.prototype.rebuildOffsets=function(){this._offsets=[];this._width=0;this._buildOffsets()};j.prototype._buildOffsets=function(){var q=[],l,o,s,u,n,t,k,r,p,m;for(o=0,s=this._table.rows.length;o<s;o++){l=[];this._offsets[o]=l;u=this._table.rows[o];for(n=0,t=0,k=u.cells.length;n<k;n++,t++){r=u.cells[n];for(;q[t]>1;t++){q[t]--;l[t]={cellIdx:-1,colIdx:-1}}if(!(q[t]>1)){q[t]=r.rowSpan}l[t]={cellIdx:n,colIdx:-1};l[n].colIdx=t;p=r.colSpan;for(;p>1;p--){l[++t]={cellIdx:-1,colIdx:-1}}}m=q.length;for(;t<m;t++){q[t]--;l[t]={cellIdx:-1,colIdx:-1}}this._width=Math.max(this._width,m)}};return j})();d.htmlTableAccessor=g})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function g(h,k,i,j){if(typeof i==="undefined"){i=null}if(typeof j==="undefined"){j=false}this.__isEdit=false;this._wijgrid=i;if(j){this._cia=h;this._ria=k}else{this._ci=h;this._ri=k}}g.outsideValue=new g(-1,-1,null,true);g.prototype.cellIndexAbs=function(h){if(arguments.length===0){this._ensureCia();return this._cia}this._ci=undefined;this._cia=h};g.prototype.rowIndexAbs=function(h){if(arguments.length===0){this._ensureRia();return this._ria}this._ri=undefined;this._ria=h};g.prototype.cellIndex=function(h){if(arguments.length===0){this._ensureCi();return this._ci}this._cia=undefined;this._ci=h};g.prototype.column=function(){if(this._wijgrid&&this._isValid()){return this._wijgrid._field("visibleLeaves")[this.cellIndexAbs()]}return null};g.prototype.container=function(){var i=this.tableCell(),h;if(i){h=e(i).children("div.wijmo-wijgrid-innercell");if(h){return h}}return null};g.prototype.isEqual=function(h){return(h&&(h.rowIndex()===this.rowIndex())&&(h.cellIndex()===this.cellIndex()))};g.prototype.row=function(){var i=null,h=null;if(this._wijgrid){i=this._wijgrid._view().rows().item(this.rowIndexAbs());if(i&&i.length){h=this._wijgrid._view()._getRowInfo(i)}}return h};g.prototype.rowIndex=function(h){if(arguments.length===0){this._ensureRi();return this._ri}this._ria=undefined;this._ri=h};g.prototype.tableCell=function(){if(this._wijgrid&&this._isValid()){return this._wijgrid._view().getCell(this.cellIndexAbs(),this.rowIndexAbs())}return null};g.prototype.value=function(i){var h,k,j;if(this._wijgrid&&this._isValid()){k=this._wijgrid._view()._getRowInfo(this._wijgrid._rows().item(this.rowIndex()));if(k.type&b.grid.rowType.data){h=this.column();if(arguments.length===0){j=this._wijgrid._dataViewWrapper.getValue(k.data,h.dataKey);return this._wijgrid.parse(h,j)}else{i=this._wijgrid.parse(h,i);if((i===null&&h.valueRequired)||((b.grid.getDataType(h)!=="string")&&isNaN(i))){throw"invalid value"}this._wijgrid._dataViewWrapper.setValue(k.dataItemIndex,h.dataKey,i)}}}};g.prototype.toString=function(){return this.cellIndex()+":"+this.rowIndex()};g.prototype._clip=function(i,k){if(typeof k==="undefined"){k=false}var h=false,j;if(k){if(this.cellIndexAbs()<(j=i.topLeft().cellIndexAbs())){h=true;this._cia=j;this._ci=undefined}if(this.cellIndexAbs()>(j=i.bottomRight().cellIndexAbs())){h=true;this._cia=j;this._ci=undefined}if(this.rowIndexAbs()<(j=i.topLeft().rowIndexAbs())){h=true;this._ria=j;this._ri=undefined}if(this.rowIndexAbs()>(j=i.bottomRight().rowIndexAbs())){h=true;this._ria=j;this._ri=undefined}}else{if(this.cellIndex()<(j=i.topLeft().cellIndex())){h=true;this._ci=j;this._cia=undefined}if(this.cellIndex()>(j=i.bottomRight().cellIndex())){h=true;this._ci=j;this._cia=undefined}if(this.rowIndex()<(j=i.topLeft().rowIndex())){h=true;this._ri=j;this._ria=undefined}if(this.rowIndex()>(j=i.bottomRight().rowIndex())){h=true;this._ri=j;this._ria=undefined}}return h};g.prototype._clone=function(){return new b.grid.cellInfo(this.cellIndex(),this.rowIndex(),this._wijgrid)};g.prototype._isValid=function(){return this.cellIndex()>=0&&this.rowIndex()>=0};g.prototype._isEdit=function(h){if(!arguments.length){return this.__isEdit}this.__isEdit=h};g.prototype._setGridView=function(h){this._wijgrid=h};g.prototype._ensureCia=function(){if(this._cia===undefined){if(this._ci===null){throw"relative index value is undefined"}if(this._ci>=0){if(!this._wijgrid){throw"wijgrid is null"}this._cia=this._ci+this._wijgrid._getDataToAbsOffset().x}else{this._cia=this._ci}if(this._cia<0){this._cia=-1}}};g.prototype._ensureRia=function(){if(this._ria===undefined){if(this._ri===undefined){throw"relative index value is undefined"}if(this._ri>=0){if(!this._wijgrid){throw"wijgrid is null"}this._ria=this._ri+this._wijgrid._getDataToAbsOffset().y}else{this._ria=this._ri}if(this._ria<0){this._ria=-1}}};g.prototype._ensureCi=function(){if(this._ci===undefined){if(this._cia===undefined){throw"absolute index value is undefined"}if(this._cia>=0){if(!this._wijgrid){throw"wijgrid is null"}this._ci=this._cia-this._wijgrid._getDataToAbsOffset().x}else{this._ci=this._cia}if(this._ci<0){this._ci=-1}}};g.prototype._ensureRi=function(){if(this._ri===undefined){if(this._ria===undefined){throw"relative index value is undefined"}if(this._ria>=0){if(!this._wijgrid){throw"wijgrid is null"}this._ri=this._ria-this._wijgrid._getDataToAbsOffset().y}else{this._ri=this._ria}if(this._ri<0){this._ri=-1}}};return g})();d.cellInfo=c;var f=(function(){function g(i,h){if(!i||!h){throw"invalid arguments"}this._topLeft=i._clone();this._bottomRight=h._clone()}g.prototype.bottomRight=function(){return this._bottomRight};g.prototype.isEqual=function(h){return(h&&this._topLeft.isEqual(h.topLeft())&&this._bottomRight.isEqual(h.bottomRight()))};g.prototype.topLeft=function(){return this._topLeft};g.prototype.toString=function(){return this._topLeft.toString()+" - "+this._bottomRight.toString()};g.prototype._isIntersect=function(j){var i,h,l,k;if(j){i=j.bottomRight().rowIndex()-j.topLeft().rowIndex()+1;h=this._bottomRight.rowIndex()-this._topLeft.rowIndex()+1;if((j.topLeft().rowIndex()+i)-this._topLeft.rowIndex()<i+h){l=j.bottomRight().cellIndex()-j.topLeft().cellIndex()+1;k=this._bottomRight.cellIndex()-this._topLeft.cellIndex()+1;return((j.topLeft().cellIndex()+l)-this._topLeft.cellIndex()<l+k)}}return false};g.prototype._isValid=function(){return this._topLeft._isValid()&&this._bottomRight._isValid()};g.prototype._clip=function(j,k){if(typeof k==="undefined"){k=false}var i=this._topLeft._clip(j,k);var h=this._bottomRight._clip(j,k);return i||h};g.prototype._clone=function(){return new g(this._topLeft._clone(),this._bottomRight._clone())};g.prototype._containsCellInfo=function(h){return(h&&h.cellIndex()>=this._topLeft.cellIndex()&&h.cellIndex()<=this._bottomRight.cellIndex()&&h.rowIndex()>=this._topLeft.rowIndex()&&h.rowIndex()<=this._bottomRight.rowIndex())};g.prototype._containsCellRange=function(h){return(h&&this._containsCellInfo(h.topLeft())&&this._containsCellInfo(h.bottomRight()))};g.prototype._extend=function(i,h){if(i===b.grid.cellRangeExtendMode.toColumn){this._topLeft.rowIndex(h.topLeft().rowIndex());this._bottomRight.rowIndex(h.bottomRight().rowIndex())}else{if(i===b.grid.cellRangeExtendMode.toRow){this._topLeft.cellIndex(h.topLeft().cellIndex());this._bottomRight.cellIndex(h.bottomRight().cellIndex())}}return this};g.prototype._normalize=function(){var i=this._topLeft.cellIndex(),k=this._topLeft.rowIndex(),h=this._bottomRight.cellIndex(),j=this._bottomRight.rowIndex();this._topLeft.cellIndex(Math.min(i,h));this._topLeft.rowIndex(Math.min(k,j));this._bottomRight.cellIndex(Math.max(i,h));this._bottomRight.rowIndex(Math.max(k,j))};return g})();d.cellInfoRange=f;e.extend(e.wijmo.wijgrid,{cellInfo:b.grid.cellInfo,cellInfoRange:b.grid.cellInfoRange})})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g,h){this._rowHeaderSize=22;this._sizesAdjCache={th:0,col:0,subTable:0};if(!g){throw"'wijgrid' must be specified"}this._wijgrid=g;this._bounds=h;this._wijgrid.element.addClass("wijmo-wijgrid-table")}f.prototype.dispose=function(){this.toggleDOMSelection(true);this._wijgrid.element.removeClass("wijmo-wijgrid-table")};f.prototype.ensureDisabledState=function(){var i="wijmo-wijgrid-disabled "+this._wijgrid.options.wijCSS.stateDisabled,h=this._wijgrid.options.disabled,g=this;e.each(this.subTables(),function(k,l){if(l){var j=e(l.element());if(h){j.addClass(i);g._wijgrid._setAttr(j,"aria-disabled",true)}else{j.removeClass(i);g._wijgrid._setAttr(j,"aria-disabled",false)}}})};f.prototype.ensureWidth=function(h,i,g){this._setColumnWidth(h,i)};f.prototype.ensureHeight=function(g){};f.prototype.getScrollValue=function(){return null};f.prototype.getVisibleAreaBounds=function(){throw"not implemented"};f.prototype.getFixedAreaVisibleBounds=function(){throw"not implemented"};f.prototype.render=function(){this._ensureRenderBounds();this._preRender();var g=this._wijgrid.outerDiv.css("display");this._wijgrid.outerDiv.css("display","none");this._renderContent();this._wijgrid.outerDiv.css("display",g);this._postRender()};f.prototype.toggleDOMSelection=function(g){e.each(this.subTables(),function(h,i){(new b.grid.domSelection(i.element())).toggleSelection(g)});(new b.grid.domSelection(this._wijgrid.outerDiv)).toggleSelection(g)};f.prototype.updateSplits=function(g){throw"not implemented"};f.prototype.bodyRows=function(){if(!this._bodyRowsAccessor){this._bodyRowsAccessor=new b.grid.rowAccessor(this,b.grid.rowScope.body,0,0)}return this._bodyRowsAccessor};f.prototype.filterRow=function(){if(this._wijgrid.options.showFilter){var g=new b.grid.rowAccessor(this,b.grid.rowScope.head,0,0);return g.item(g.length()-1)}return null};f.prototype.headerRows=function(){var g;if(!this._headerRowsAccessor){g=this._wijgrid.options.showFilter?1:0;this._headerRowsAccessor=new b.grid.rowAccessor(this,b.grid.rowScope.head,0,g)}return this._headerRowsAccessor};f.prototype.rows=function(){if(!this._rowsAccessor){this._rowsAccessor=new b.grid.rowAccessor(this,b.grid.rowScope.table,0,0)}return this._rowsAccessor};f.prototype.focusableElement=function(){throw"not implemented"};f.prototype.forEachColumnCell=function(g,i,h){throw"not implemented"};f.prototype.forEachRowCell=function(i,h,g){throw"not implemented"};f.prototype.getAbsoluteCellInfo=function(g){throw"not implemented"};f.prototype.getAbsoluteRowIndex=function(g){throw"not implemented"};f.prototype.getCell=function(h,g){throw"not implemented"};f.prototype.getColumnIndex=function(g){throw"not implemented"};f.prototype.getHeaderCell=function(g){throw"not implemented"};f.prototype.getJoinedCols=function(g){throw"not implemented"};f.prototype.getJoinedRows=function(h,g){throw"not implemented"};f.prototype.getJoinedTables=function(g,h){throw"not implemented"};f.prototype.subTables=function(){throw"not implemented"};f.prototype._getMappedScrollMode=function(){var i=this._wijgrid.options.scrollMode,g="auto",h="auto";switch(i){case"horizontal":g="hidden";h="visible";break;case"vertical":g="visible";h="hidden";break;case"both":g="visible";h="visible";break}return{vScrollBarVisibility:g,hScrollBarVisibility:h}};f.prototype._postRender=function(){this.toggleDOMSelection(this._wijgrid.options.selectionMode==="none");this.ensureDisabledState();this._sizesAdjCache.col=0;this._sizesAdjCache.th=0;this._sizesAdjCache.subTable=0;var j=this._wijgrid._field("visibleLeaves");if(j.length>0){var h=this.getHeaderCell(0),i=this.getJoinedCols(0);if(h){this._sizesAdjCache.th=e(h).leftBorderWidth()+e(h).rightBorderWidth()}if(i&&i.length){this._sizesAdjCache.col=e(i[0]).leftBorderWidth()+e(i[0]).rightBorderWidth()}}var g=this.subTables()[0];this._sizesAdjCache.subTable=e(g.element()).leftBorderWidth()+e(g.element()).rightBorderWidth()};f.prototype._preRender=function(){throw"not implemented"};f.prototype._ensureRenderBounds=function(){var g=this._wijgrid._getDataCellsRange();this._bounds.start=0;this._bounds.end=g.bottomRight().rowIndex()};f.prototype._renderContent=function(){this._renderCOLS();this._renderHeader();if(this._wijgrid.options.showFilter){this._renderFilter()}this._renderBody();if(this._wijgrid.options.showFooter){this._renderFooter()}};f.prototype._renderCOLS=function(){var h=this._wijgrid._field("visibleLeaves"),j,l,k,g;for(k=0,g=h.length;k<g;k++){j=h[k];l=this._createCol(j,k);this._appendCol(l,j,k)}};f.prototype._renderHeader=function(){var h=b.grid.rowType,j=this._wijgrid._columnsHeadersTable(),k,g,l;if(j&&(g=j.length)){for(k=0;k<g;k++){l=this._insertEmptyRow(h.header,k,-1,-1,-1);this._renderRow(l,null,j[k])}}};f.prototype._renderFilter=function(){var g=this._insertEmptyRow(b.grid.rowType.filter,-1,-1,-1,-1);this._renderRow(g,this._wijgrid._field("visibleLeaves"),null)};f.prototype._renderBody=function(){var k=b.grid.rowType,p=this._wijgrid._field("visibleLeaves"),q=this._wijgrid.sketchTable,j=-1,r=0,l=0,o,h,m,g,n=this._wijgrid._dataOffset;if(this._bounds.start>=0){for(o=this._bounds.start;o<=this._bounds.end;o++){m=q[o-n];g=(m.rowType&k.data)!==0;h=this._insertEmptyRow(m.rowType,l++,g?++j:-1,g?m.originalRowIndex:-1,g?r+m.originalRowIndex:-1);this._renderRow(h,p,m)}}};f.prototype._renderFooter=function(){var g=this._insertEmptyRow(b.grid.rowType.footer,-1,-1,-1,-1);this._renderRow(g,this._wijgrid._field("visibleLeaves"),null)};f.prototype._insertEmptyRow=function(m,g,h,j,l){var i=this._wijgrid._onViewInsertEmptyRow.apply(this._wijgrid,arguments),k=this._insertRow(m,g,i);return this._createRowInfo(k,m,b.grid.renderState.rendering,g,h,j,l)};f.prototype._createEmptyCell=function(j,g,i){var h=b.grid.rowType,k=this._wijgrid._onViewCreateEmptyCell.apply(this._wijgrid,arguments);return this._createCell(j.type,k)};f.prototype._insertRow=function(i,g,h){throw"not implemented"};f.prototype._createCell=function(i,j){var h=b.grid.rowType,g;if(!j){if(i===h.header){j=document.createElement("th")}else{j=document.createElement("td")}}if(i!==h.filter){g=document.createElement("div");g.className="wijmo-wijgrid-innercell";if(j.firstChild){while(j.firstChild){g.appendChild(j.firstChild)}}j.appendChild(g)}return e(j)};f.prototype._appendCell=function(i,g,h){throw"not implemented"};f.prototype._createCol=function(h,g){throw"not implemented"};f.prototype._appendCol=function(i,h,g){throw"not implemented"};f.prototype._renderRow=function(l,i,k){var h=b.grid.rowType,g,j;switch(l.type){case h.filter:this._renderFilterRow(l,i);break;case h.footer:this._renderFooterRow(l,i);break;case h.header:this._renderHeaderRow(l,k);break;case h.data:case h.data|h.dataAlt:this._renderDataRow(l,i,k);g=k.__attr;j=k.__style;break;case h.emptyDataRow:case h.groupHeader:case h.groupFooter:this._renderSpannedRow(l,i,k);g=k.__attr;j=k.__style;break;default:throw"unknown rowType"}this._rowRendered(l,g,j)};f.prototype._renderCell=function(g,l,n,k,i,j,h){var m=this._createEmptyCell(g,i.dataIndex,i);var o=(g.type===b.grid.rowType.filter)?m:e(m[0].firstChild);this._appendCell(g,l,m);if(k){o.html(n)}else{this._wijgrid.cellFormatter.format(o,i,n,g)}this._cellRendered(g,m,l,i,j,h)};f.prototype._renderDataRow=function(g,q,j){var k,l,m,p,r,o,h,n=false;for(k=0,l=q.length;k<l;k++){m=q[k];p=m.dataIndex;r=null;if(p>=0&&(!j[p]||(j[p].visible===false))){continue}r=(p>=0)?this._wijgrid.toStr(m,j[p].value):null;o=(p>=0)?j[p].__attr:null;h=(p>=0)?j[p].__style:null;this._renderCell(g,k,r,n,m,o,h)}};f.prototype._renderFilterRow=function(l,h){var k,g,j;for(k=0,g=h.length;k<g;k++){j=h[k];this._renderCell(l,k,b.grid.filterHelper.getSingleValue(j.filterValue),false,j)}};f.prototype._renderFooterRow=function(k,h){var j,g;for(j=0,g=h.length;j<g;j++){this._renderCell(k,j,"",false,h[j])}};f.prototype._renderHeaderRow=function(m,k){var j,g,l=0,h;for(j=0,g=k.length;j<g;j++){h=k[j];if(h.column&&h.column.parentVis){h.column.thX=l++;h.column.thY=m.sectionRowIndex;this._renderCell(m,j,h.column.headerText,false,h.column,{colSpan:h.colSpan,rowSpan:h.rowSpan})}}};f.prototype._renderSpannedRow=function(l,h,m){var k,j,g=Math.min(h.length,m.length);for(k=0;k<g;k++){this._renderCell(l,k,m[k].html,true,h[k],m[k].__attr,m[k].__style)}};f.prototype._cellRendered=function(l,k,i,h,g,j){this._wijgrid.cellStyleFormatter.format(k,i,h,l,b.grid.renderState.rendering,g,j);this._changeCellRenderState(k,b.grid.renderState.rendering,false);this._wijgrid._onViewCellRendered(l,k,i,h)};f.prototype._rowRendered=function(i,g,h){this._wijgrid.rowStyleFormatter.format(i,g,h);i.state&=~b.grid.renderState.rendering;this._setRowInfo(i.$rows,i);this._wijgrid._onViewRowRendered(i)};f.prototype._isBodyRow=function(i){var g=b.grid.rowType,h=i.type;return((h&g.data)||(h===g.groupHeader)||(h===g.groupFooter)||(h===g.emptyDataRow))};f.prototype._changeRowRenderState=function(h,g,i){if(i){h.state|=g}else{h.state&=~g}this._setRowInfo(h.$rows,h)};f.prototype._changeCellRenderState=function(l,h,k){var j=b.grid.dataPrefix,g=this._wijgrid._data$prefix,i=j(l,g,"renderState");if(k){h=i|h;j(l,g,"renderState",h)}else{h=i&~h;j(l,g,"renderState",h)}return h};f.prototype._adjustWidthArray=function(i,q,o,k){var r=this._sumWidthArray(i),j=this._sumWidthArray(q),p=[],m,n=0,h,g,l=true;if(r<=o){e.extend(true,p,i);if(r===o||k){return p}else{m=o-r}}else{e.extend(true,p,q);if(j>=o){return p}else{m=o-j}}e.each(p,function(s,t){if(!t.real){n++}});if(n!==0){h=Math.floor(m/n);g=m-h*n;e.each(p,function(s,t){if(!t.real){t.width+=h;if(l){t.width+=g;l=false}}})}return p};f.prototype._getColumnWidth=function(m){var u,n,o,q,k,r,t,p,s,h,l;n=this._wijgrid._field("visibleLeaves")[m];if(n._realWidth!==undefined){u={width:n._realWidth,real:true}}else{if(n.isRowHeader){u={width:this._rowHeaderSize,real:true}}else{var g=0;o=this.getJoinedTables(true,m);q=o[2];for(k=0;k<2;k++){r=o[k];if(r!==null){t=r.element().rows;if(l=t.length){for(h=l-1,s=null;h>=0;h--){if(t[h].cells.length===r.width()){s=t[h];break}}if(s){p=s.cells[q];g=Math.max(g,e(p).outerWidth())}}}}u={width:g,real:false}}}return u};f.prototype._setColumnWidth=function(h,i){var j=this.getHeaderCell(h),l=this.getJoinedCols(h),k;if(i){var g=this;if(j){k=i-this._sizesAdjCache.th;if(k<0){k=0}j.style.width=k+"px"}e.each(l,function(n,m){if(m){k=i-g._sizesAdjCache.col;if(k<0){k=0}m.style.width=k+"px"}})}};f.prototype._setTableWidth=function(i,g,m,j){var l,k,h=this;e.each(i,function(n,o){o[0].style.tableLayout="fixed";o[0].style.width=(g-h._sizesAdjCache.subTable)+"px"});l=i[0].outerWidth();k=l-g;if(k!==0){this._setColumnWidth(j,m-k)}};f.prototype._sumWidthArray=function(j,i,h){var g=0;e.each(j,function(k,l){if(i!==undefined&&h!==undefined&&(k<i||k>h)){return true}g+=l.width});return g};f.prototype._clearBody=function(){e.each(this.subTables(),function(g,h){h.clearSection(2)})};f.prototype._rebuildOffsets=function(){e.each(this.subTables(),function(g,h){h.rebuildOffsets()})};f.prototype._removeBodyRow=function(l,k){var j=b.grid.rowType,r=this._wijgrid._rows(),m,n,h,p,q,g,o;if((l>=0)&&(l<(n=r.length()))){if(k){for(m=0;m<n;m++){h=this._getRowInfo(r.item(m));q=h.sectionRowIndex-l;if(h.sectionRowIndex>l){h.sectionRowIndex--;if(h.type&j.data){if(h.type&j.dataAlt){h.type&=~j.dataAlt}else{h.type|=j.dataAlt}h.dataItemIndex--;h.dataRowIndex--;h.virtualDataItemIndex--}this._setRowInfo(h.$rows,h)}}}h=this._getRowInfo(r.item(l),false);g=this.getAbsoluteRowIndex(h.$rows[0]);h.$rows.remove();o=this.getJoinedTables(false,g);if(o[0]){o[0].removeOffset(o[2])}if(o[1]){o[1].removeOffset(o[2])}}};f.prototype._insertBodyRow=function(l,m,h,r){var q=this._wijgrid._field("visibleLeaves"),k=b.grid.rowType,p=this._wijgrid._view(),s=this._wijgrid._rows(),n=s.length(),j=((l.rowType&k.data)!==0),i,g,o;if(m<0||m>=n||(!m&&m!==0)){m=n}i=this._insertEmptyRow(l.rowType,m,-1,h,r);this._renderRow(i,q,l);g=this.getAbsoluteRowIndex(i.$rows[0]);o=this.getJoinedTables(false,g);if(o[0]){o[0].insertOffset(g)}if(o[1]){o[1].insertOffset(g)}return i};f.prototype._findRowInfo=function(l){var h=this.bodyRows(),j=0,g=h.length(),k;if(e.isFunction(l)){for(j=0;j<g;j++){k=this._getRowInfo(h.item(j));if(l(k)===true){return k}}}return null};f.prototype._setRowInfo=function(l,k){var h="$rows" in k,g="data" in k,j,i;if(h){j=k.$rows;delete k.$rows}if(g){i=k.data;delete k.data}b.grid.dataPrefix(l,this._wijgrid._data$prefix,"rowInfo",k);if(h){k.$rows=j}if(g){k.data=i}};f.prototype._getRowInfo=function(i,g){if(typeof g==="undefined"){g=true}var k=this._wijgrid,h=i[1]?e(i):e(i[0]),l=b.grid.dataPrefix(h,k._data$prefix,"rowInfo"),j;l.$rows=h;if(g&&(l.dataItemIndex>=0)&&(l.type&b.grid.rowType.data)){l.data=k._getDataItem(l.dataItemIndex)}return l};f.prototype._createRowInfo=function(o,m,i,k,j,g,n){var l,h={type:m,state:i,sectionRowIndex:k,dataRowIndex:j,dataItemIndex:g,virtualDataItemIndex:n,$rows:e(o)};if((g>=0)&&(m&b.grid.rowType.data)){h.data=this._wijgrid._getDataItem(g)}return h};return f})();d.baseView=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(f){__extends(g,f);function g(h,i){f.call(this,h,i);this._dataTable=null;this._contentArea=null}g.prototype.dispose=function(){this._wijgrid.outerDiv.unbind("scroll",this._onScroll);f.prototype.dispose.call(this)};g.prototype.ensureWidth=function(k,l,j){var i=e(this._dataTable.element()),h=i.width()+l-j;f.prototype.ensureWidth.call(this,k,l,j);this._setTableWidth([i],h,l,k)};g.prototype.getVisibleAreaBounds=function(){var h=b.grid.bounds(this._dataTable.element()),i;if(this._wijgrid.options.scrollMode==="none"){return h}else{i=b.grid.bounds(this._wijgrid.outerDiv.find(".wijmo-wijgrid-split-area-se:first")[0]);return{top:h.top,left:h.left,width:Math.min(i.width,h.width),height:Math.min(i.height,h.height)}}};g.prototype.updateSplits=function(j){var t=this,n=this._wijgrid,i=n.options,l=n.element,h=[],q=[],k=[],p=n._field("visibleLeaves"),r=n.outerDiv,s,m;l.css({"table-layout":"",width:""});e.each(p,function(v,u){var x,o=u.width;if(o||(o===0)){x=((typeof(o)==="string")&&(o.length>1)&&(o[o.length-1]==="%"));if(x){o=r.width()*parseFloat(o)/100}else{o=parseFloat(o)}if(u.ensurePxWidth||(u.ensurePxWidth===undefined&&i.ensureColumnsPxWidth)){u._realWidth=o}t._setColumnWidth(v,o)}});e.each(p,function(u,o){h.push(t._getColumnWidth(u))});l.css("width","1px");e.each(p,function(u,o){q.push(t._getColumnWidth(u))});s=r.width();k=this._adjustWidthArray(h,q,s,i.ensureColumnsPxWidth);e.each(k,function(u,v){var o=p[u];if(o._realWidth!==undefined){delete o._realWidth;return}t._setColumnWidth(u,v.width)});m=k.length-1;if(m!==-1){this._setTableWidth([l],this._sumWidthArray(k,0,m),k[m].width,m)}};g.prototype.focusableElement=function(){return e(this._dataTable.element())};g.prototype.forEachColumnCell=function(h,j,i){return this._dataTable.forEachColumnCell(h,j,i)};g.prototype.forEachRowCell=function(j,i,h){return this._dataTable.forEachRowCell(j,i,h)};g.prototype.getAbsoluteCellInfo=function(h){return new b.grid.cellInfo(this.getColumnIndex(h),(h.parentNode).rowIndex,this._wijgrid,true)};g.prototype.getAbsoluteRowIndex=function(h){return h.rowIndex};g.prototype.getCell=function(k,j){var i=this._dataTable.getCellIdx(k,j),h;if(i>=0){h=this.getJoinedRows(j,0);if(h[0]){return h[0].cells[i]}}return null};g.prototype.getColumnIndex=function(h){return this._dataTable.getColumnIdx(h)};g.prototype.getHeaderCell=function(j){var h=this._wijgrid._field("visibleLeaves")[j],i;if(h&&(i=this._wijgrid._headerRows())){return b.grid.rowAccessor.getCell(i.item(h.thY),h.thX)}return null};g.prototype.getJoinedCols=function(h){var i=e(this._dataTable.element()).find("> colgroup");if(i.length){if(h<i[0].childNodes.length){return[i[0].childNodes[h],null]}}return[null,null]};g.prototype.getJoinedRows=function(i,h){return[this._dataTable.getSectionRow(i,h),null]};g.prototype.getJoinedTables=function(h,i){return[this._dataTable,null,i]};g.prototype.subTables=function(){return[this._dataTable]};g.prototype._preRender=function(){this._dataTable=new b.grid.htmlTableAccessor(this._wijgrid.element[0],true,true,true)};g.prototype._postRender=function(){this._wijgrid.element.find("> tbody").addClass(this._wijgrid.options.wijCSS.content+" wijmo-wijgrid-data");this._dataTable=new b.grid.htmlTableAccessor(this._wijgrid.element[0]);this._wijgrid._setAttr(this._wijgrid.element,{role:"grid",cellpadding:"0",border:"0",cellspacing:"0"});this._wijgrid.element.css("border-collapse","separate");this._wijgrid.outerDiv.bind("scroll",{wijgrid:this._wijgrid},e.proxy(this._onScroll,this));f.prototype._postRender.call(this)};g.prototype._insertRow=function(l,i,j){var h=b.grid.rowType,k;switch(l){case h.header:case h.filter:k=this._dataTable.ensureTHead();break;case h.footer:k=this._dataTable.ensureTFoot();break;default:k=this._dataTable.ensureTBody()}if(j){return[k.appendChild(j)]}else{if(i>k.rows.length){i=-1}return[k.insertRow(i)]}};g.prototype._rowRendered=function(k,h,i){var j=k.$rows[0];if(!j.cells.length&&this._isBodyRow(k)){j.parentNode.removeChild(j)}else{f.prototype._rowRendered.call(this,k,h,i)}};g.prototype._appendCell=function(j,h,i){j.$rows[0].appendChild(i[0])};g.prototype._createCol=function(i,h){return[document.createElement("col")]};g.prototype._appendCol=function(j,i,h){this._dataTable.appendCol(j[0])};g.prototype._onScroll=function(h){if(h.data.wijgrid.$superPanelHeader){h.data.wijgrid.$superPanelHeader.css("left",h.target.scrollLeft)}if(h.data.wijgrid.$bottomPagerDiv){h.data.wijgrid.$bottomPagerDiv.css("left",h.target.scrollLeft)}};return g})(c.baseView);c.flatView=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(g){__extends(f,g);function f(h,i){g.call(this,h,i);this._verScrollBarSize=18;this._viewTables={};this._splitAreas={};this.element=h.element;this._allowVirtualScrolling=h._allowVirtualScrolling(),this._staticDataRowIndex=h._getStaticIndex(true);this._staticRowIndex=h._getRealStaticRowIndex();this._staticColumnIndex=h._getRealStaticColumnIndex();this._staticAllColumnIndex=(this._staticColumnIndex===-1)?-1:h._field("visibleLeaves")[this._staticColumnIndex].leavesIdx;this._mouseWheelHandler=e.proxy(this._onMouseWheel,this)}f.prototype.dispose=function(){g.prototype.dispose.call(this);this._wijgrid.outerDiv.unbind("mousewheel",this._mouseWheelHandler)};f.prototype.ensureWidth=function(s,x,i){var q=this._wijgrid,k=q.options,l=this._staticColumnIndex,v=s<=l,r=e(this._viewTables.nw.element()),m=e(this._viewTables.ne.element()),w=e(this._viewTables.sw.element()),t=e(this._viewTables.se.element()),h=v?[r,w]:[m,t],p=(v?r.width():m.width())+x-i,n=q._field("frozener"),j=this.getScrollValue();this._destroySuperPanel();g.prototype.ensureWidth.call(this,s,x,i);this._setTableWidth(h,p,x,s);try{if(l>=0){k.splitDistanceX=r[0].offsetWidth}else{k.splitDistanceX=0}}catch(u){}this._updateSplitAreaBounds(0);this._adjustRowsHeights();try{if(this._staticRowIndex>=0){k.splitDistanceY=Math.max(r[0].offsetHeight,m[0].offsetHeight)}else{k.splitDistanceY=0}}catch(u){}this._updateSplitAreaBounds(1);this.refreshPanel(j);n.refresh()};f.prototype.ensureHeight=function(r){var l,m=this._wijgrid,i=m.options,n=e(this._viewTables.nw.element()),j=e(this._viewTables.ne.element()),s=e(this._viewTables.sw.element()),p=e(this._viewTables.se.element()),k=m._field("frozener"),h=this.getScrollValue(),t;this._destroySuperPanel();if(arguments.length>0){l=this.getJoinedRows(r,2);this._setRowHeight(l,this._getRowHeight(l))}p.css("height","");s.css("height","");t=Math.max(p.height(),s.height());p.height(t);s.height(t);try{if(this._staticRowIndex>=0){i.splitDistanceY=Math.max(n[0].offsetHeight,j[0].offsetHeight)}else{i.splitDistanceY=0}}catch(q){}this._updateSplitAreaBounds(1);this.refreshPanel(h);k.refresh()};f.prototype.getScrollValue=function(){var h=this._getSuperPanel();return h?{x:h.options.hScroller.scrollValue,y:h.options.vScroller.scrollValue}:null};f.prototype.getVisibleAreaBounds=function(){var h=b.grid.bounds(this._wijgrid.outerDiv.find(".wijmo-wijsuperpanel-contentwrapper:first"));if(!h){h=b.grid.bounds(this._wijgrid.outerDiv)}return h};f.prototype.getFixedAreaVisibleBounds=function(){var k=this.getVisibleAreaBounds(),j=b.grid.bounds(this._splitAreas.ne),h=b.grid.bounds(this._splitAreas.nw),i=null,l=null;if(j.height||h.height){i={left:k.left,top:k.top,width:k.width,height:Math.min(j.height||h.height,k.height)}}if(h.width){l={left:h.left,top:k.top,width:Math.min(h.width,k.width),height:k.height}}return[i,l]};f.prototype.refreshPanel=function(j){var q=this,m=this._wijgrid,r=m.options,o=this._getGridWidth(r.scrollMode),i=this._getMappedScrollMode(),l=this._testNeedVBar(m.outerDiv,m.element,e(this._viewTables.ne.element()),r.scrollMode,m._autoHeight),p=l&&!k,n=j?j.x:null,h=j?j.y:null,k=(e.support.isTouchEnabled&&e.support.isTouchEnabled());this._scroller.width(o);this._splitAreas.ne.width(o-r.splitDistanceX-(p?this._verScrollBarSize:0));if(r.staticColumnsAlignment==="right"){this._splitAreas.nw.css({left:"",right:p?this._verScrollBarSize:0});this._splitAreas.sw.css({left:"",right:p?this._verScrollBarSize:0})}if(!this._scroller.data("wijmo-wijsuperpanel")){if(this._allowVirtualScrolling){this.vsUI=new b.grid.uiVirtualScroller(m,this._splitAreas.se,r.splitDistanceY)}this._scroller.wijsuperpanel({disabled:m.options.disabled,scroll:e.proxy(this._onScroll,this),bubbleScrollingEvent:true,customScrolling:this._allowVirtualScrolling,vScroller:{scrollBarVisibility:i.vScrollBarVisibility,scrollValue:j?j.y:null},hScroller:{scrollBarVisibility:i.hScrollBarVisibility,scrollValue:j?j.x:null},hScrollerActivating:function(u,s){var t;if(m._autoHeight){t=m.element.height()+r.splitDistanceY-s.contentLength;if(t>0){q._scroller.height(q._scroller.height()+t);q._scroller.wijsuperpanel("paintPanel");return false}}q._splitAreas.sw.height(s.contentLength-r.splitDistanceY)}});if(this._allowVirtualScrolling){this.vsUI.attach(this._scroller)}}else{this._scroller.wijsuperpanel("paintPanel")}this._scroller.find(".wijmo-wijsuperpanel-hbarcontainer, .wijmo-wijsuperpanel-vbarcontainer").css("zIndex",5)};f.prototype.scrollTo=function(x){if(!x.tableCell()){return}var j=this._wijgrid,z=j.options,t=this._getSuperPanel(),k=x.tableCell(),h=k.nodeType?e(k):k,n=null,s=null;if(t&&h.is(":visible")){var m=(t).getContentElement(),B=m.parent(),p=parseInt((m.css("left")+"").replace("px",""),10)*-1,r=parseInt((m.css("top")+"").replace("px",""),10)*-1,C=B.outerWidth()-z.splitDistanceX,v=B.outerHeight()-z.splitDistanceY,u=h.position(),A=u.left,i=u.top,D=h.outerWidth(),w=h.outerHeight(),l=j._getStaticIndex(true),y=j._getStaticIndex(false),E=x.rowIndex(),q=x.cellIndex();if(E<=l){if(q<=y){n=0;s=0}else{A+=p;if(A+D>p+C){p=n=A+D-C}if(A<p){n=A}s=0}}else{if(q<=y){i+=this._splitAreas.sw.scrollTop();if(i+w>r+v){r=s=i+w-v}if(i<r){s=i}n=0}else{A-=z.splitDistanceX;if(i+w>r+v){r=s=i+w-v}if(A+D>p+C){p=n=A+D-C}if(i<r){s=i}if(A<p){n=A}}}if(n!==null){(t).hScrollTo(n)}if(s!==null){if(this._allowVirtualScrolling){}else{(t).vScrollTo(s)}}}};f.prototype.updateSplits=function(t){var j=this._wijgrid,y=j.options,m,w=this,r=[],p=[],q=[],x=this._staticColumnIndex,v,u=y.scrollMode,k=j._field("visibleLeaves"),h=e(this._viewTables.se.element()),n=e(this._viewTables.ne.element()),z=e(this._viewTables.sw.element()),D=e(this._viewTables.nw.element()),l=j.outerDiv,C,A,s;this._destroySuperPanel();l.unbind("mousewheel",this._mouseWheelHandler);if((C=w._viewTables.se.element().tBodies)&&(C=C[0])){s=false;for(A=0;A<C.rows.length;A++){if(!e(C.rows[A]).hasClass("wijmo-wijgrid-groupheaderrow")){s=true;break}}if(!s){j.element.css("width","100%")}}e.each([h,n,z,D],function(i,o){o.css({"table-layout":"",width:""})});e.each(k,function(E,o){var F,i=o.width;if(i||(i===0)){F=((typeof(i)==="string")&&(i.length>1)&&(i[i.length-1]==="%"));if(F){i=l.width()*parseFloat(i)/100}else{i=parseFloat(i)}if(o.ensurePxWidth||(o.ensurePxWidth===undefined&&y.ensureColumnsPxWidth)){o._realWidth=i}w._setColumnWidth(E,i)}});e.each(k,function(o,i){q.push(w._getColumnWidth(o))});e.each([D,n,z,h],function(i,o){o.css({width:"1px"})});e.each(k,function(o,i){p.push(w._getColumnWidth(o))});m=l.width();r=this._adjustWidthArray(q,p,m,y.ensureColumnsPxWidth);e.each(r,function(o,E){var i=k[o];if(i._realWidth!==undefined){delete i._realWidth;return}w._setColumnWidth(o,E.width)});if(x>=0){v=x;this._setTableWidth([D,z],this._sumWidthArray(r,0,v),r[v].width,v)}try{if(x>=0){y.splitDistanceX=D[0].offsetWidth}else{y.splitDistanceX=0}}catch(B){}this._updateSplitAreaBounds(0);if(!y.ensureColumnsPxWidth){n.parent().width(m-y.splitDistanceX)}v=r.length-1;if(v!==-1){this._setTableWidth([n,h],this._sumWidthArray(r,x+1,v),r[v].width,v)}this._adjustRowsHeights();try{if(this._staticRowIndex>=0){y.splitDistanceY=Math.max(D[0].offsetHeight,n[0].offsetHeight)}else{y.splitDistanceY=0}}catch(B){}this._updateSplitAreaBounds(1);if(!y.ensureColumnsPxWidth){if(this._testNeedVBar(j.outerDiv,h,n,u,j._autoHeight)){m-=this._verScrollBarSize;r=this._adjustWidthArray(q,p,m,y.ensureColumnsPxWidth);e.each(r,function(i,o){if(!o.real){w._setColumnWidth(i,o.width)}});if(x>=0){v=x;this._setTableWidth([D,z],this._sumWidthArray(r,0,v),r[v].width,v)}try{if(x>=0){y.splitDistanceX=D[0].offsetWidth}else{y.splitDistanceX=0}}catch(B){}this._updateSplitAreaBounds(0);n.parent().width(m-y.splitDistanceX);v=r.length-1;if(v!==-1){this._setTableWidth([n,h],this._sumWidthArray(r,x+1,v),r[v].width,v)}this._adjustRowsHeights();try{if(this._staticRowIndex>=0){y.splitDistanceY=Math.max(D[0].offsetHeight,n[0].offsetHeight)}else{y.splitDistanceY=0}}catch(B){}this._updateSplitAreaBounds(1)}}this.refreshPanel(t);l.bind("mousewheel",e.proxy(this._mouseWheelHandler,this))};f.prototype._clearBody=function(){g.prototype._clearBody.call(this)};f.prototype.bodyRows=function(){var h=g.prototype.bodyRows.call(this);return h};f.prototype.focusableElement=function(){return this._wijgrid.outerDiv};f.prototype.forEachColumnCell=function(j,m,l){var k=this.getJoinedTables(true,j),i,h;if(k[0]!==null){i=k[2];h=k[0].forEachColumnCell(i,m,l);if(h!==true){return h}if(k[1]!==null){h=k[1].forEachColumnCell(i,m,l);if(h!==true){return h}}}return true};f.prototype.forEachRowCell=function(o,n,m){var l=this.getJoinedTables(false,o),k=l[0],j=l[1],h,i;if(k!==null){h=l[2];if(h<k.element().rows.length){i=k.forEachRowCell(h,n,m);if(i!==true){return i}}if((j!==null)&&(h<j.element().rows.length)){i=j.forEachRowCell(h,n,m);if(i!==true){return i}}}HTMLTableCellElement;return true};f.prototype.getAbsoluteCellInfo=function(h){return new b.grid.cellInfo(this.getColumnIndex(h),this.getAbsoluteRowIndex(h.parentNode),this._wijgrid,true)};f.prototype.getAbsoluteRowIndex=function(i){var h=i.rowIndex,j=i.parentNode;while(j.tagName.toLowerCase()!=="table"){j=j.parentNode}return(j===this._viewTables.nw.element()||j===this._viewTables.ne.element())?h:h+this._staticRowIndex+1};f.prototype.getCell=function(o,m){var h=this.getJoinedTables(false,m),l,k,n,j,i;if(h[0]!==null){l=this.getJoinedTables(true,o);if(l[0]!==null){k=h[2];n=l[2];j=null;if(h[1]!==null){j=(o===n)?h[0]:h[1]}else{j=h[0]}i=j.getCellIdx(n,k);if(i>=0){return j.element().rows[k].cells[i]}}}return null};f.prototype.getColumnIndex=function(l){var h=null,j=null,i=false,k;for(h=l.parentNode;h.tagName.toLowerCase()!=="table";h=h.parentNode){}if(h!==null){if(h===this._viewTables.nw.element()){j=this._viewTables.nw}else{if(h===this._viewTables.ne.element()){j=this._viewTables.ne;i=true}else{if(h===this._viewTables.sw.element()){j=this._viewTables.sw}else{if(h===this._viewTables.se.element()){j=this._viewTables.se;i=true}}}}if(j!==null){k=j.getColumnIdx(l);if(i){k+=this._staticColumnIndex+1}return k}}return -1};f.prototype.getHeaderCell=function(j){var h=this._wijgrid._field("visibleLeaves")[j],i;if(h&&(i=this._wijgrid._headerRows())){return b.grid.rowAccessor.getCell(i.item(h.thY),h.thX)}return null};f.prototype.getJoinedCols=function(j){var h=[],k=this.getJoinedTables(true,j),i=k[2];k.splice(k.length-1,1);e.each(k,function(l,m){h.push(m?e(m.element()).find("col")[i]:null)});return h};f.prototype.getJoinedRows=function(o,j){var u=null,t=null,s=null,q=null,p=this._staticRowIndex,h=this._staticColumnIndex,i=this._wijgrid._field("visibleLeaves").length-1,r=this._rowsCountRaw()-1,l=(p===r),n=(p<0),k=!l&&!n,m=0;if(l||k){if(h>=0&&h<i){s=this._viewTables.nw;q=this._viewTables.ne}else{s=(h<0)?this._viewTables.ne:this._viewTables.nw}m=s.getSectionLength(j);if(o<m){u=s.getSectionRow(o,j);if(q!==null){t=q.getSectionRow(o,j)}}}if(n||(k&&(u===null))){if(!n){o-=m}if(h>=0&&h<i){s=this._viewTables.sw;q=this._viewTables.se}else{s=(h<0)?this._viewTables.se:this._viewTables.sw}u=s.getSectionRow(o,j);if(q!==null){t=q.getSectionRow(o,j)}}return(u===null&&t===null)?null:[u,t]};f.prototype.getJoinedTables=function(i,k){var n=null,m=null,h=k,l=this._wijgrid,o=this._staticRowIndex,j=this._staticColumnIndex;if(i){if(k<=j){n=this._viewTables.nw;m=this._viewTables.sw}else{n=this._viewTables.ne;m=this._viewTables.se;h=h-(j+1)}if(o<0){n=null}if(o===this._rowsCountRaw()-1){m=null}}else{if(k<=o){n=this._viewTables.nw;m=this._viewTables.ne}else{n=this._viewTables.sw;m=this._viewTables.se;h=h-(o+1)}if(j<0){n=null}if(j===l._field("leaves").length-1){m=null}}if(n===null){n=m;m=null}return[n,m,h]};f.prototype.subTables=function(){return[this._viewTables.nw,this._viewTables.ne,this._viewTables.sw,this._viewTables.se]};f.prototype._getGridWidth=function(k){var j=this._wijgrid,i=j.element.outerWidth(true)+j.options.splitDistanceX,h=j.outerDiv.innerWidth();if(this._testNeedVBar(j.outerDiv,j.element,e(this._viewTables.ne.element()),k,j._autoHeight)){i+=this._verScrollBarSize}if(i>h){i=h}return i};f.prototype._getSuperPanel=function(){return this._scroller?this._scroller.data("wijmo-wijsuperpanel"):null};f.prototype._ensureRenderBounds=function(){if(this._wijgrid._allowVirtualScrolling()){this._wijgrid._ensureRenderBounds(this._bounds);if(this._wijgrid._serverSideVirtualScrolling()){}this._bounds.end=this._bounds.start+this._wijgrid.options.pageSize-1;this._wijgrid._ensureRenderBounds(this._bounds)}else{g.prototype._ensureRenderBounds.call(this)}};f.prototype._renderContent=function(){g.prototype._renderContent.call(this)};f.prototype._preRender=function(){var i=document.createDocumentFragment(),h=b.grid.htmlTableAccessor;this._wijgrid.outerDiv.wrapInner('<div class="wijmo-wijgrid-fixedview"><div class="wijmo-wijgrid-scroller"><div class="wijmo-wijgrid-split-area-se wijmo-wijgrid-content-area"></div></div></div>');this._scroller=this._wijgrid.outerDiv.find(".wijmo-wijgrid-scroller");this._scroller.css("padding",0);this._scroller.after(this._splitAreas.nw=e('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-nw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>'));this._scroller.after(this._splitAreas.ne=e('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-ne" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>'));this._scroller.after(this._splitAreas.sw=e('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-sw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>'));this._splitAreas.se=this._scroller.find(".wijmo-wijgrid-split-area-se:first");this._viewTables={nw:new h(i.appendChild(document.createElement("table")),true,true,true),ne:new h(i.appendChild(document.createElement("table")),true,true,true),sw:new h(i.appendChild(document.createElement("table")),true,true,true),se:new h(i.appendChild(this._wijgrid.element[0]),true,true,true)}};f.prototype._postRender=function(){var j,h,m,l,i=b.grid.htmlTableAccessor,k=this;this._viewTables={nw:new i(j=this._viewTables.nw.element()),ne:new i(h=this._viewTables.ne.element()),sw:new i(m=this._viewTables.sw.element()),se:new i(l=this._viewTables.se.element())};this._splitAreas.nw.empty().append(j);this._splitAreas.ne.empty().append(h);this._splitAreas.sw.empty().append(m);this._splitAreas.se.empty().append(l);e.each(this._viewTables,function(n,p){var o=e(p.element());k._wijgrid._setAttr(o,{role:"grid",border:"0",cellpadding:"0",cellspacing:"0"});o.addClass("wijmo-wijgrid-table").css("border-collapse","separate").find("> tbody").addClass(k._wijgrid.options.wijCSS.content+" wijmo-wijgrid-data")});g.prototype._postRender.call(this)};f.prototype._rowsCountRaw=function(){var i=this._viewTables.nw.element(),h=this._viewTables.ne.element(),k=this._viewTables.sw.element(),j=this._viewTables.se.element(),l;l=Math.max(i.rows.length,h.rows.length)+Math.max(k.rows.length,j.rows.length);return l};f.prototype._createCol=function(i,h){return[document.createElement("col"),document.createElement("col")]};f.prototype._appendCol=function(j,i,h){if(h<=this._staticColumnIndex){this._viewTables.nw.appendCol(j[0]);this._viewTables.sw.appendCol(j[1])}else{this._viewTables.ne.appendCol(j[0]);this._viewTables.se.appendCol(j[1])}};f.prototype._insertRow=function(m,i,k){var h=b.grid.rowType,l,j,n=this._viewTables;switch(m){case h.header:case h.filter:l=n.nw.ensureTHead();j=n.ne.ensureTHead();break;case h.footer:l=n.sw.ensureTFoot();j=n.se.ensureTFoot();break;default:if(i<=this._staticDataRowIndex){l=n.nw.ensureTBody();j=n.ne.ensureTBody()}else{i-=this._staticDataRowIndex+1;l=n.sw.ensureTBody();j=n.se.ensureTBody()}}if(k){return[l.appendChild(k),j.appendChild(k.cloneNode(false))]}else{return[l.insertRow(i>l.rows.length?-1:i),j.insertRow(i>j.rows.length?-1:i)]}};f.prototype._rowRendered=function(l,h,i){var j=l.$rows[0],k=l.$rows[1];if(!j.cells.length&&this._isBodyRow(l)){j.parentNode.removeChild(j);j=null}if(!k.cells.length&&this._isBodyRow(l)){k.parentNode.removeChild(k);k=null}if(j||k){if(!j||!k){l.$rows=j?e(j):e(k)}g.prototype._rowRendered.call(this,l,h,i)}};f.prototype._appendCell=function(k,h,j){var i=(k.type!==b.grid.rowType.header)?this._staticColumnIndex:this._staticAllColumnIndex;if(h<=i){k.$rows[0].appendChild(j[0])}else{k.$rows[1].appendChild(j[0])}};f.prototype._getRowHeight=function(n,h){if(n[0]&&n[1]){var q=n[0],k=n[1],m=e(q),i=e(k),p,j,o,l=function(r){var t,s=r[0],u;for(t=0;t<s.cells.length;t++){u=s.cells[t];if(!u.rowSpan||u.rowSpan===1){return e(u).outerHeight()}}return r.height()};if(o=e.data(q,"customHeight")){p=j=parseInt(o)}else{m.css("height","");i.css("height","");if(h){p=l(m);j=l(i)}else{p=m.height();j=i.height()}}return Math.max(p,j)}return null};f.prototype._setRowHeight=function(h,k){if(h[0]&&h[1]){var j=[e(h[0]),e(h[1])],i;if(k===null){return}k+=1;e.each(j,function(l,m){m.height(k);i=k-m.height();if(i){m.height(k+i)}})}};f.prototype._adjustRowHeight=function(){var k=this._wijgrid,B=this._staticColumnIndex,A=k._field("visibleLeaves").length-1,p,o,q,C,n,t,x,u,m,l,w,s,z,y,v,h,r=[];if(B>-1&&B<A){p=this._staticRowIndex;o=this._rowsCountRaw()-1;q=this._viewTables;if(p>-1&&p<=o){C=q.ne.element();n=C.parentNode;t=q.nw.element();x=t.parentNode;v=t.rows;h=C.rows;s=v.length;for(z=0;z<s;z++){r.push(this._getRowHeight([v[z],h[z]],true))}}if(p>=-1&&p<o){u=q.se.element();m=u.parentNode;l=q.sw.element();w=l.parentNode;v=l.rows;h=u.rows;s=v.length;for(z=0;z<s;z++){r.push(this._getRowHeight([v[z],h[z]]))}}if(p>-1&&p<=o){x.removeChild(t);n.removeChild(C)}if(p>=-1&&p<o){w.removeChild(l);m.removeChild(u)}if(p>-1&&p<=o){v=t.rows;h=C.rows;s=v.length;for(z=0,y=0;z<s;z++){this._setRowHeight([v[z],h[z]],r[y++])}}if(p>=-1&&p<o){v=l.rows;h=u.rows;s=v.length;for(z=0;z<s;z++){this._setRowHeight([v[z],h[z]],r[y++])}}if(p>-1&&p<=o){x.appendChild(t);n.appendChild(C)}if(p>=-1&&p<o){w.appendChild(l);m.appendChild(u)}}};f.prototype._adjustRowsHeights=function(){var i=e(this._viewTables.sw.element()),j=e(this._viewTables.se.element()),h;j.css("height","");i.css("height","");this._adjustRowHeight();h=Math.max(j.height(),i.height());i.height(h);j.height(h)};f.prototype._destroySuperPanel=function(){if(this._scroller.data("wijmo-wijsuperpanel")){if(this.vsUI){this.vsUI.dispose()}this._scroller.wijsuperpanel("destroy")}};f.prototype._onScroll=function(h,j){var i=this._getSuperPanel();if(this._allowVirtualScrolling){if(j.dir==="h"){this._setFixedAreaPosition((i).getContentElement(),j.dir,j.position,j.animationOptions,false);this._setFixedAreaPosition(this._splitAreas.ne,j.dir,j.position,j.animationOptions,true)}}else{this._setFixedAreaPosition(j.dir==="h"?this._splitAreas.ne:this._splitAreas.sw,j.dir,j.position,j.animationOptions,true)}this._wijgrid._trackScrollingPosition(i.options.hScroller.scrollValue,i.options.vScroller.scrollValue)};f.prototype._onMouseWheel=function(l,m){var k,i=(m>0)?"top":"bottom",h=false,j;if(this._wijgrid._canInteract()){k=this.getFixedAreaVisibleBounds();e.each(k,function(n,p){if(p&&b.grid.isOver(l.pageY,l.pageX,p.top,p.left,p.height,p.width)){h=true;return false}});if(h&&this._scroller.data("wijmo-wijsuperpanel")){j=this._scroller.wijsuperpanel("option","vScroller").scrollValue;this._scroller.wijsuperpanel("doScrolling",i);if(j!==this._scroller.wijsuperpanel("option","vScroller").scrollValue){l.stopPropagation();l.preventDefault()}}}};f.prototype._setFixedAreaPosition=function(j,m,h,k,l){var n={},i;if(m==="h"){i=l?"scrollLeft":"left"}else{i=l?"scrollTop":"top"}if(!l){h=-h}if(k){n[i]=h;j.animate(n,k)}else{if(l){j[0][i]=h}else{j.css(i,h)}}};f.prototype._testNeedVBar=function(q,i,r,j,s){var o,k=this._wijgrid,l=r.width()+k.options.splitDistanceX,h=i.height()+k.options.splitDistanceY,u=q.width(),p=q.height(),n,t=0,m=0;if(this._allowVirtualScrolling&&k._totalRowsCount()>1){return true}if(k.$superPanelHeader!==null){t=k.$superPanelHeader.outerHeight(true)}if(k.$bottomPagerDiv!==null){m=k.$bottomPagerDiv.outerHeight(true)}n=p-t-m;if(j==="both"||j==="vertical"){o=true}else{o=(j==="auto")&&((h>n)||(!s&&l>u&&h>n-this._verScrollBarSize))}return o};f.prototype._updateSplitAreaBounds=function(n){var h=this._wijgrid,m=h.options,l,j,i=0,k=0;if(n===0||n===2){this._splitAreas.nw.width(m.splitDistanceX);this._splitAreas.sw.width(m.splitDistanceX);if(h.options.staticColumnsAlignment==="right"){this._splitAreas.se.css("marginRight",m.splitDistanceX);this._splitAreas.ne.css("marginRight",m.splitDistanceX)}else{this._splitAreas.se.css("marginLeft",m.splitDistanceX);this._splitAreas.ne.css("marginLeft",m.splitDistanceX)}}if(n===1||n===2){this._scroller.css("height","");this._splitAreas.se.css("marginTop",0);l=h.outerDiv.height();if(!h._autoHeight){this._scroller.height(l)}else{this._scroller.height(l+m.splitDistanceY)}this._splitAreas.nw.height(m.splitDistanceY);this._splitAreas.ne.height(m.splitDistanceY);if(h.$superPanelHeader!==null){i=h.$superPanelHeader.outerHeight(true)}if(h.$bottomPagerDiv!==null){k=h.$bottomPagerDiv.outerHeight(true)}j=l-i-k;if(h.$superPanelHeader!==null){this._splitAreas.nw.css("top",i+"px");this._splitAreas.ne.css("top",i+"px")}if(!h._autoHeight){this._splitAreas.sw.height(j-m.splitDistanceY)}else{this._splitAreas.sw.height(j)}this._splitAreas.sw.css("top",m.splitDistanceY+i);this._splitAreas.se.css("marginTop",m.splitDistanceY)}};return f})(d.baseView);d.fixedView=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var f=jQuery;var d=(function(){function g(h){this._updates=0;this._selectedColumns=null;this._selectedRows=null;this._extend_rules={singlecell:[0,0,0],singlecolumn:[1,1,1],singlerow:[2,2,2],singlerange:[0,1,2],multicolumn:[1,1,1],multirow:[2,2,2],multirange:[0,1,2]};if(!h){throw"invalid arguments"}this._wijgrid=h;this._addedCells=new e(h);this._removedCells=new e(h);this._selectedCells=new e(h);this._addedDuringCurTransactionCells=new e(h)}g.prototype.selectedCells=function(){return this._selectedCells};g.prototype.addColumns=function(i,h){if(!h&&h!==0){h=i}this.addRange(i,0,h,16777215)};g.prototype.addRange=function(i,l,j,k){if(!i&&(arguments.length===1)){throw"invalid argument"}var h=(arguments.length===4)?new b.grid.cellInfoRange(new b.grid.cellInfo(i,l),new b.grid.cellInfo(j,k)):i._clone();h._normalize();if(!h._isValid()){throw"invalid argument"}this.beginUpdate();this._startNewTransaction(this._wijgrid._field("currentCell"));this._selectRange(h,false,true,0,null);this.endUpdate()};g.prototype.addRows=function(i,h){if(!h&&h!==0){h=i}this.addRange(0,i,16777215,h)};g.prototype.removeRange=function(i,l,j,k){if(!i&&(arguments.length===1)){throw"invalid argument"}var h=(arguments.length===4)?new b.grid.cellInfoRange(new b.grid.cellInfo(i,l),new b.grid.cellInfo(j,k)):i._clone();h._normalize();if(!h._isValid()){throw"invalid argument"}this.beginUpdate();this._startNewTransaction(this._wijgrid._field("currentCell"));this._clearRange(h,0);this.endUpdate()};g.prototype.removeColumns=function(i,h){if(!h&&h!==0){h=i}this.removeRange(i,0,h,16777215)};g.prototype.removeRows=function(i,h){if(!h&&h!==0){h=i}this.removeRange(0,i,16777215,h)};g.prototype.clear=function(){this.beginUpdate();this._removedCells._clear();this._removedCells._addFrom(this._selectedCells);this.endUpdate()};g.prototype.selectAll=function(){this.beginUpdate();this._selectRange(this._wijgrid._getDataCellsRange(),false,false,0,null);this.endUpdate()};g.prototype.beginUpdate=function(){this._updates++};g.prototype.endUpdate=function(){if(this._updates>0){this._updates--;if(this._updates===0){this.doSelection();if(this._addedCells.length()||this._removedCells.length()){if(this._selectedColumns!==null){this._selectedColumns.UnderlyingDataChanged()}if(this._selectedRows!==null){this._selectedRows.UnderlyingDataChanged()}this._wijgrid._trigger("selectionChanged",null,{addedCells:this._addedCells,removedCells:this._removedCells})}this._addedCells=new b.grid.cellInfoOrderedCollection(this._wijgrid);this._removedCells._clear()}}};g.prototype._multipleRangesAllowed=function(){var h=this._wijgrid.options.selectionMode;return(h&&((h=h.toLowerCase())==="multicolumn"||h==="multirow"||h==="multirange"))};g.prototype._anchorCell=function(){return this.__anchorCell};g.prototype._startNewTransaction=function(h){if(h){this.__anchorCell=h._clone();this._addedDuringCurTransactionCells=new b.grid.cellInfoOrderedCollection(this._wijgrid)}};g.prototype._clearRange=function(o,m){var t=this._wijgrid.options.selectionMode.toLowerCase(),h,j,l,q,u,s,n,p,k,r=this._wijgrid._getDataCellsRange();if(o._isValid()&&(t!=="none")&&(this._selectedCells.length()>0)){h=o._clone();h._normalize();h._clip(r);if(!o._isValid()){return}h._extend(this._extend_rules[t][m],r);this.beginUpdate();for(n=0,p=this._selectedCells.length();n<p;n++){k=this._selectedCells.item(n);if(h._containsCellInfo(k)){this._removedCells._add(k)}}this.endUpdate()}};g.prototype._selectRange=function(i,o,m,l,k){var n=this._wijgrid.options.selectionMode.toLowerCase(),h,j=this._wijgrid._getDataCellsRange();if((n!=="none")&&i._isValid()){h=i._clone();h._normalize();h._clip(j);if(!h._isValid()){return}this.beginUpdate();if(!this._multipleRangesAllowed()){this.clear()}else{if(o||m){if(m){this._removedCells._clear();this._removedCells._addFrom(this._addedDuringCurTransactionCells)}}else{this.clear()}}switch(n){case"singlecell":case"singlecolumn":case"singlerow":h=(k===null)?new b.grid.cellInfoRange(h.topLeft(),h.topLeft()):new b.grid.cellInfoRange(k,k);break}h._extend(this._extend_rules[n][l],j);this.doRange(h,true);this.endUpdate()}};g.prototype.doSelection=function(){var o=this._wijgrid._getDataToAbsOffset(),m=o.x,q=o.y,u=this._wijgrid._view(),p,s,n,v,t,r,l=b.grid.renderState,j,h,k=-1;for(p=0,s=this._removedCells.length();p<s;p++){n=this._removedCells.item(p);if(this._addedCells.indexOf(n)<0){v=u.getCell(n.cellIndex()+m,n.rowIndex()+q);if(v){if(k!==n.rowIndex()){j=n.row();k=n.rowIndex()}t=f(v);h=u._changeCellRenderState(t,l.selected,false);this._wijgrid.cellStyleFormatter.format(t,n.cellIndex(),n.column(),j,h)}this._selectedCells._remove(n);this._addedDuringCurTransactionCells._remove(n)}else{this._removedCells._removeAt(p);p--;s--}}k=-1;for(p=0,s=this._addedCells.length();p<s;p++){n=this._addedCells.item(p);r=this._selectedCells.indexOf(n);if(r<0){v=u.getCell(n.cellIndex()+m,n.rowIndex()+q);if(v){if(k!==n.rowIndex()){j=n.row();k=n.rowIndex()}t=f(v);h=u._changeCellRenderState(t,l.selected,true);this._wijgrid.cellStyleFormatter.format(t,n.cellIndex(),n.column(),j,h)}this._selectedCells._insertUnsafe(n,~r);this._addedDuringCurTransactionCells._add(n)}else{this._addedCells._removeAt(p);p--;s--}}};g.prototype.doRange=function(m,r){var j=m.topLeft().cellIndex(),p=m.topLeft().rowIndex(),i=m.bottomRight().cellIndex(),o=m.bottomRight().rowIndex(),l,t,k,q,n=this._wijgrid._view(),h,s;if(r){l=this._addedCells.length();s=this._wijgrid._rows();for(t=p;t<=o;t++){h=n._getRowInfo(s.item(t));if(h.type&b.grid.rowType.data){for(k=j;k<=i;k++){q=new b.grid.cellInfo(k,t);if(l===0){this._addedCells._appendUnsafe(q)}else{this._addedCells._add(q)}}}}}else{l=this._removedCells.length();for(t=p;t<=o;t++){for(k=j;k<=i;k++){q=new b.grid.cellInfo(k,t);if(l===0){this._removedCells._appendUnsafe(q)}else{this._removedCells._add(q)}}}}};return g})();c.selection=d;var e=(function(){function g(h){this._clear=function(){this._list.length=0};if(!h){throw"invalid arguments"}this._wijgrid=h;this._list=[]}g.prototype.item=function(h){return this._list[h]};g.prototype.length=function(){return this._list.length};g.prototype.indexOf=function(i,n){if(arguments.length===1){n=i.rowIndex();i=i.cellIndex()}var j=0,h=this._list.length-1,l,m,k;while(j<=h){l=j+((h-j)>>1);m=this._list[l];k=m.rowIndex()-n;if(k===0){k=m.cellIndex()-i}if(k<0){j=l+1}else{if(k>0){h=l-1}else{return l}}}return ~j};g.prototype.toString=function(){var k="",j,h;for(j=0,h=this._list.length;j<h;j++){k+=this._list[j].toString()+"\n"}return k};g.prototype._add=function(i){var h=this.indexOf(i);if(h<0){this._list.splice(~h,0,i);i._setGridView(this._wijgrid);return true}return false};g.prototype._addFrom=function(j){if(j){var l=j.length(),h=this._list.length,k;if(h===0){this._list.length=l;for(k=0;k<l;k++){this._list[k]=j.item(k);this._list[k]._setGridView(this._wijgrid)}}else{for(k=0;k<l;k++){this._add(j.item(k))}}}};g.prototype._appendUnsafe=function(h){this._list[this._list.length]=h;h._setGridView(this._wijgrid)};g.prototype._insertUnsafe=function(i,h){this._list.splice(h,0,i)};g.prototype._remove=function(i){var h=this.indexOf(i);if(h>=0){this._list.splice(h,1);return true}return false};g.prototype._removeAt=function(h){this._list.splice(h,1)};g.prototype._getColumnsIndicies=function(){var m=[],h=this._list.length,j,l,k;if(h){j=[];for(l=0;l<h;l++){j[this._list[l].cellIndex()]=1}h=j.length;k=0;for(l=0;l<h;l++){if(j[l]){m[k++]=l}}}return m};g.prototype._getSelectedRowsIndicies=function(){var m=[],h=this._list.length,l,k,j;if(h){l=[];for(k=0;k<h;k++){l[this._list[k].rowIndex()]=1}h=l.length;j=0;for(k=0;k<h;k++){if(l[k]){m[j++]=k}}}return m};g.prototype._rectangulate=function(){var h=this._list.length,m=4294967295,o=4294967295,k=0,n=0,l,j;if(h){for(l=0;l<h;l++){j=this._list[l];m=Math.min(m,j.cellIndex());o=Math.min(o,j.rowIndex());k=Math.max(k,j.cellIndex());n=Math.max(n,j.rowIndex())}return new b.grid.cellInfoRange(new b.grid.cellInfo(m,o),new b.grid.cellInfo(k,n))}return null};return g})();c.cellInfoOrderedCollection=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(){function f(g){this._gap_to_start=10;this._inProgress=false;this._additionalEventsAttached=false;this._wijgrid=g;this._evntFormat="{0}."+this._wijgrid.widgetName+".selectionui";this._addedCells=new b.grid.cellInfoOrderedCollection(this._wijgrid);this._view=this._wijgrid._view();this._rootElement=this._view.focusableElement();this._visLeavesLen=this._wijgrid._field("visibleLeaves").length;this._rootElement.bind(this._eventKey("mousedown"),e.proxy(this._onGridMouseDown,this))}f.prototype.dispose=function(){this._rootElement.unbind(this._eventKey("mousedown"),this._onGridMouseDown);this._detachAdditionalEvents()};f.prototype._onGridMouseDown=function(j){if(!this._wijgrid._canInteract()||this._wijgrid.options.selectionMode.toLowerCase()==="none"){return}var k=this._view.getVisibleAreaBounds(),i={x:j.pageX,y:j.pageY},h=((j.target&&(j.target).tagName!==undefined)?(j.target).tagName.toLowerCase():undefined),g=e(j.target);if((!h||g.is("td.wijgridtd, th.wijgridtd, div.wijmo-wijgrid-innercell"))&&(i.x>k.left&&i.x<k.left+k.width)&&(i.y>k.top&&i.y<k.top+k.height)){this._attachAdditionalEvents();this._startPos=i;this._startCellInfo=this._coordToDataCellInfo(this._startPos)}};f.prototype._onDocumentMouseMove=function(h){if(!this._startCellInfo||!this._startCellInfo._isValid()){return}var u={x:h.pageX,y:h.pageY},A,z,w,s,m,q,v,p,g,x,y,o,n,j,k,t=this._wijgrid._view(),r=this._wijgrid._rows(),l=b.grid.renderState;if(!this._inProgress){this._inProgress=(Math.abs(this._startPos.x-u.x)>this._gap_to_start)||(Math.abs(this._startPos.y-u.y)>this._gap_to_start)}if(this._inProgress){A=this._coordToDataCellInfo(u);if(!A._isValid()){return}this._endCellInfo=A;w=new b.grid.cellInfoRange(this._startCellInfo,this._endCellInfo);w._normalize();w._clip(this._wijgrid._getDataCellsRange());if(w._isValid()&&!w.isEqual(this._prevMouseMoveRange)){s=this._wijgrid._getDataToAbsOffset();this._prevMouseMoveRange=w;m=new b.grid.cellInfoOrderedCollection(this._wijgrid);q=w.bottomRight().rowIndex();v=w.bottomRight().cellIndex();for(p=w.topLeft().rowIndex();p<=q;p++){n=t._getRowInfo(r.item(p));if(n.type&b.grid.rowType.data){for(g=w.topLeft().cellIndex();g<=v;g++){m._appendUnsafe(new b.grid.cellInfo(g,p))}}}j=-1;for(x=0,y=this._addedCells.length();x<y;x++){z=this._addedCells.item(x);if(m.indexOf(z)<0){if(this._wijgrid.selection().selectedCells().indexOf(z)<0){g=this._view.getCell(z.cellIndex()+s.x,z.rowIndex()+s.y);if(g){if(j!==z.rowIndex()){n=z.row();j=z.rowIndex()}o=e(g);k=t._changeCellRenderState(o,l.selected,false);this._wijgrid.cellStyleFormatter.format(o,z.cellIndex(),z.column(),n,k)}}this._addedCells._removeAt(x);x--;y--}}j=-1;for(x=0,y=m.length();x<y;x++){z=m.item(x);if(this._addedCells.indexOf(z)<0&&this._wijgrid.selection().selectedCells().indexOf(z)<0){if(this._addedCells._add(z)){g=this._view.getCell(z.cellIndex()+s.x,z.rowIndex()+s.y);if(g){if(j!==z.rowIndex()){n=z.row();j=z.rowIndex()}o=e(g);k=t._changeCellRenderState(o,l.selected,true);this._wijgrid.cellStyleFormatter.format(o,z.cellIndex(),z.column(),n,k)}}}}}}};f.prototype._onDocumentMouseUp=function(p){this._detachAdditionalEvents();if(this._inProgress){this._inProgress=false;if(this._prevMouseMoveRange&&this._prevMouseMoveRange._isValid()){this._wijgrid._changeCurrentCell(p,this._endCellInfo);if(!p.shiftKey||(!this._wijgrid.selection()._multipleRangesAllowed()&&this._wijgrid.options.selectionMode.toLowerCase()!=="singleRange")){this._wijgrid.selection()._startNewTransaction(this._startCellInfo)}this._wijgrid.selection().beginUpdate();this._wijgrid.selection()._selectRange(this._prevMouseMoveRange,p.shiftKey,p.ctrlKey,0,this._endCellInfo);this._wijgrid.selection().endUpdate();var r=this._wijgrid._view(),m=this._wijgrid._getDataToAbsOffset(),n,o,l,s,q,j=-1,h,g,k=b.grid.renderState;for(n=0,o=this._addedCells.length();n<o;n++){l=this._addedCells.item(n);if(this._wijgrid.selection().selectedCells().indexOf(l)<0){s=r.getCell(l.cellIndex()+m.x,l.rowIndex()+m.y);if(s!==null){if(j!==l.rowIndex()){h=l.row();j=l.rowIndex()}q=e(s);g=r._changeCellRenderState(q,k.selected,false);this._wijgrid.cellStyleFormatter.format(q,l.cellIndex(),l.column(),h,g)}}}this._addedCells._clear();this._startCellInfo=this._endCellInfo=this._prevMouseMoveRange=null;return false}}};f.prototype._attachAdditionalEvents=function(){if(!this._additionalEventsAttached){try{this._view.toggleDOMSelection(false);e(document).bind(this._eventKey("mousemove"),e.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),e.proxy(this._onDocumentMouseUp,this))}finally{this._additionalEventsAttached=true}}};f.prototype._detachAdditionalEvents=function(){if(this._additionalEventsAttached){try{this._view.toggleDOMSelection(true);e(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp)}finally{this._additionalEventsAttached=false}}};f.prototype._eventKey=function(g){return b.grid.stringFormat(this._evntFormat,g)};f.prototype._coordToDataCellInfo=function(g){var k=0,o=this._visLeavesLen-1,n=0,h=-1,i,p=new b.grid.rowAccessor(this._view,2,0,0),j,m,l,q;while(k<=o){n=((o-k)>>1)+k;i=b.grid.bounds(this._view.getHeaderCell(n));if(!i){m=p.item(0);i=b.grid.bounds(b.grid.rowAccessor.getCell(m,n))}if(!i){break}if(g.x<i.left){o=n-1}else{if(g.x>i.left+i.width){k=n+1}else{h=n;break}}}if(h===-1){return b.grid.cellInfo.outsideValue}p=new b.grid.rowAccessor(this._view,0,0,0);j=-1;k=0;o=p.length()-1;n=0;while(k<=o){n=((o-k)>>1)+k;m=p.item(n);i=b.grid.bounds(b.grid.rowAccessor.getCell(m,0));if(g.y<i.top){o=n-1}else{if(g.y>i.top+i.height){k=n+1}else{j=n;break}}}if(j===-1){return b.grid.cellInfo.outsideValue}l=this._wijgrid._getDataToAbsOffset();q=new b.grid.cellInfo(h-l.x,j-l.y);q._clip(this._wijgrid._getDataCellsRange());return q};return f})();c.uiSelection=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function h(j,m,l,k){this._view=j;this._scope=m;this._offsetBottom=k;this._offsetTop=l}h.prototype.item=function(k){var j=this.length();return(k<j)?this._view.getJoinedRows(k+this._offsetTop,this._scope):null};h.prototype.length=function(){var l=this._view.getJoinedTables(true,0),j=0,k;if(k=l[0]){j=k.getSectionLength(this._scope)}if(k=l[1]){j+=k.getSectionLength(this._scope)}j-=this._offsetTop+this._offsetBottom;if(j<0){j=0}return j};h.iterateCells=function f(q,s,k){if(q&&s){var n=0,m,o,p,l,r,t;for(m=0,o=q.length;m<o;m++){p=q[m];if(p){for(l=0,r=p.cells.length;l<r;l++){t=s(p.cells[l],n++,k);if(t!==true){return}}}}}};h.getCell=function g(j,m){var k,l;if(j&&(k=j[0])){l=k.cells.length;if(m<l){return k.cells[m]}m-=l;if(k=j[1]){l=k.cells.length;if(m<l){return k.cells[m]}}}return null};h.cellsCount=function i(j){var l=0,k;if(j&&(k=j[0])){l=k.cells.length;if(k=j[1]){l+=k.cells.length}}return l};return h})();d.rowAccessor=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(){function f(){this._timeout=25}f.prototype.currentCellEditStart=function(g,j){var o=false,m=g.currentCell(),n=g._view(),h,k,l,i;if(m._isValid()&&!m._isEdit()&&(m.column().dataIndex>=0)){h=m.row();if(h){i=h.type;if(i&b.grid.rowType.data){k={cell:m,event:j,handled:false};if(o=g._trigger("beforeCellEdit",null,k)){if(!k.handled){o=this._defaultBeforeCellEdit(g,k)}}if(o){m._isEdit(true);if(g._showRowHeader()){l=e((h.$rows[0]).cells[0]).children("div.wijmo-wijgrid-innercell");if(l.length){l.empty();l.append(e("<div>&nbsp;</div>").addClass(g.options.wijCSS.icon+" ui-icon-pencil"))}}}}}}return o};f.prototype.currentCellEditEnd=function(h,v){var q=h.currentCell(),i=q.column(),n=false,p=h._view(),k,s,t,x,w,j,g=b.grid.getKeyCodeEnum(),r;if(!q._isValid()||!q._isEdit()){return}k=q.row();if(k){s=k.type;if(!(s&b.grid.rowType.data)){return n}t=(v&&v.which===g.ESCAPE);if(!v||(!t)){var l={cell:q,value:undefined};if(n=h._trigger("beforeCellUpdate",null,l)){if(l.value===undefined){l.value=this._getCellValue(h,q)}x=l.value;w=q.value();try{r=this._getHTMLInputElementType(q);if(b.grid.HTML5InputSupport.isExtendSupportRequired(r)){l.value=b.grid.HTML5InputSupport.parse(l.value,r);l.value=b.grid.HTML5InputSupport.extend(w,l.value,r)}else{l.value=h.parse(q.column(),l.value)}x=l.value}catch(u){l.value=x}if(b.grid.getDataType(i)==="datetime"){if(x instanceof Date){x=x.getTime()}if(w instanceof Date){w=w.getTime()}}if(x!==w){try{q.value(l.value)}catch(u){var y={cell:q,value:l.value};n=false;h._trigger("invalidCellValue",null,y)}if(n){var m={cell:q};h._trigger("afterCellUpdate",null,m)}}}}else{n=true}if(n){var o={cell:q,event:v,handled:false};h._trigger("afterCellEdit",null,o);if(!o.handled){n=this._defaultAfterCellEdit(h,o)}if(n){q._isEdit(false)}if(h._showRowHeader()){e((k.$rows[0]).cells[0]).children("div.wijmo-wijgrid-innercell").html("&nbsp;")}window.setTimeout(function(){if(!h._destroyed){q=h.currentCell();if(j=q.tableCell()){e(j).attr("tabIndex",0).focus()}else{e(h._view().focusableElement()).focus()}}},this._timeout)}}return n};f.prototype._defaultBeforeCellEdit=function(g,m){var i=m.cell.column(),s=false,p,o,r,n,k,q,j=b.grid.getKeyCodeEnum(),h=b.grid.HTML5InputSupport.getDefaultInputType(g._isMobileEnv(),i);if(i.dataIndex>=0){p=m.cell.value();s=true;try{r=m.cell.container();if(b.grid.getDataType(i)==="boolean"){n=r.children("input");n.focus();if(m.event&&m.event.type==="keypress"){n.one("keyup",function(t){if(t.which===j.SPACE){t.preventDefault();(n[0]).checked=!p}})}}else{n=e("<input />").attr("type",h).addClass("wijgridinput wijmo-wijinput "+g.options.wijCSS.stateFocus).bind("keydown",g,e.proxy(this._checkBoxOrInputKeyDown,this));n.bind(((e.support).selectstart?"selectstart":"mousedown"),function(t){t.stopPropagation()});if(m.event&&m.event.type==="keypress"&&m.event.which){n.val(String.fromCharCode(m.event.which))}else{switch(b.grid.getDataType(i)){case"currency":case"number":if(p!==null){n.val(p);break}case"datetime":if(b.grid.HTML5InputSupport.isExtendSupportRequired(h)){n.val(b.grid.HTML5InputSupport.toStr(p,h));break}default:n.val(g.toStr(i,p));break}}r.empty().append(n);k=n.val().length;if(h==="text"){new b.grid.domSelection(n[0]).setSelection({start:k,end:k})}n.focus();setTimeout(function(){n.focus()},this._timeout*2)}}catch(l){alert(l.message);s=false}}return s};f.prototype._defaultAfterCellEdit=function(g,j){var m=j.cell.column(),p=false,n,o,l,h,k;if(m.dataIndex>=0){p=true;k=g._view();try{n=j.cell.container();o=g.toStr(m,j.cell.value());h=k._getRowInfo(g._rows().item(j.cell.rowIndex()));if(b.grid.getDataType(m)==="boolean"){l=n.children("input");if(o==="true"){l.attr("checked","checked")}else{l.removeAttr("checked")}}else{g.cellFormatter.format(n,m,o,h)}}catch(i){alert("defaultAfterCellEdit: "+i.message);p=false}}return p};f.prototype._checkBoxOrInputKeyDown=function(h){var g=b.grid.getKeyCodeEnum();if(h.which===g.ENTER){var i=h.data;if(i){i._endEditInternal(h);return false}}};f.prototype._getCellValue=function(h,i){var j=i.container().find(":input:first"),g=null;if(j.length){g=(j.attr("type")==="checkbox")?(j[0]).checked:j.val()}return g};f.prototype._getHTMLInputElementType=function(g){return g.container().find(":input:first").attr("type")};return f})();c.cellEditorHelper=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(){}f._div=document.createElement("div");f.prototype.format=function(n,l,k,m){if(m.type&b.grid.rowType.footer){if(l.aggregate&&(l.aggregate!=="none")){k=b.grid.stringFormat(l.footerText||"{0}",l._totalsValue||"")}else{k=l.footerText||l._footerTextDOM||""}}var h=true,g=null,j={$container:n,column:l,formattedValue:k,row:m,afterDefaultCallback:null},i;if(e.isFunction(l.cellFormatter)){h=!l.cellFormatter(j)}if(h){switch(b.grid.getDataType(l)){case"boolean":g=this._boolFormatter;break;default:g=this._textFormatter}if(g){g.call(this,j);if(e.isFunction(i=j.afterDefaultCallback)){i(j)}}}};f.prototype._textFormatter=function(h){var g;switch(h.row.type){case b.grid.rowType.filter:this._defFormatFilterCell(h);break;default:g=h.$container[0];if(g.firstChild){while(g.firstChild){g.removeChild(g.firstChild)}}b.grid.cellFormatterHelper._div.innerHTML=h.formattedValue||"&nbsp;";while(b.grid.cellFormatterHelper._div.firstChild){g.appendChild(b.grid.cellFormatterHelper._div.firstChild)}}};f.prototype._boolFormatter=function(k){var l,n,h="disabled='disabled'",j,m,g=b.grid.rowType,i=b.grid.getKeyCodeEnum();switch(k.row.type){case g.data:case g.data|g.dataAlt:l=k.column.owner;n=l.options.allowEditing&&(k.column.readOnly!==true);if(n){h=""}if(l.parse(k.column,l._dataViewWrapper.getValue(k.row.data,k.column.dataKey))===true){k.$container.html("<input class='wijgridinput' type='checkbox' checked='checked' "+h+" />")}else{k.$container.html("<input class='wijgridinput' type='checkbox' "+h+" />")}if(n){k.$container.children("input").bind("mousedown",function(o){j=k.$container.parent()[0];m=l.currentCell();if(m.tableCell()!==j){l._onClick({target:j})}if(!m._isEdit()){l.beginEdit()}}).bind("keydown",function(o){if(o.which===i.ENTER){l._endEditInternal(o);return false}})}break;default:this._textFormatter(k)}};f.prototype._defFormatFilterCell=function(g){var h=g.column.owner,i=h.options.wijCSS;g.$container.addClass(i.widget+" "+i.stateDefault);if((g.column.dataIndex>=0)&&!g.column.isBand&&g.column.showFilter){g.$container.html('<table cellPadding="0" cellSpacing="0" class="wijmo-wijgrid-filter '+i.cornerAll+'"><tr><td style="width:100%"><input type="text" class="wijmo-wijgrid-filter-input" style="width:100%" /></td><td class="wijmo-wijgrid-filter-trigger '+i.cornerRight+" "+i.stateDefault+'"><span class="'+i.icon+" "+i.iconArrowDown+'"></span></td></tr></table>')}else{g.$container.html("&nbsp;")}};return f})();d.cellFormatterHelper=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(g){this.MIN_WIDTH=5;this._elements=[];this._gap=10;this._step=1;this._inProgress=false;this._hoveredField=null;this._startLocation=null;this._lastLocation=null;this._proxy=null;this._wijgrid=g;this._evntFormat="{0}."+this._wijgrid.widgetName+".resizer"}f.prototype.addElement=function(g){if(g&&g.element){g.element.bind(this._eventKey("mousemove"),d.proxy(this._onMouseMove,this)).bind(this._eventKey("mousedown"),d.proxy(this._onMouseDown,this)).bind(this._eventKey("mouseout"),d.proxy(this._onMouseOut,this));this._elements.push(g)}};f.prototype.dispose=function(){var g=this;d.each(this._elements,function(h,i){i.element.unbind(g._eventKey("mousemove"),g._onMouseMove).unbind(g._eventKey("mousedown"),g._onMouseDown).unbind(g._eventKey("mouseout"),g._onMouseOut)});this._detachDocEvents()};f.prototype.inProgress=function(){return this._inProgress};f.prototype._onMouseMove=function(h){if(!this._inProgress){var g=this._getFieldByPos({x:h.pageX,y:h.pageY});if(g&&g._canSize()&&this._wijgrid._canInteract()){g.element.css("cursor","e-resize");this._hoveredField=g;h.stopPropagation()}else{this._onMouseOut(h)}}};f.prototype._onMouseOut=function(g){if(!this._inProgress){if(this._hoveredField){this._hoveredField.element.css("cursor","");this._hoveredField=null}}};f.prototype._onMouseDown=function(h){this._hoveredField=this._getFieldByPos({x:h.pageX,y:h.pageY});if(this._hoveredField&&(this._hoveredField)._canSize()&&this._wijgrid._canInteract()){try{this._hoveredField.element.css("cursor","");this._docCursor=document.body.style.cursor;document.body.style.cursor="e-resize";this._startLocation=this._lastLocation=b.grid.bounds(this._hoveredField.element);this._proxy=d('<div class="wijmo-wijgrid-resizehandle '+this._wijgrid.options.wijCSS.stateHightlight+'">&nbsp;</div>');var g=this._wijgrid._view().getVisibleAreaBounds();this._proxy.css({left:h.pageX,top:this._startLocation.top,height:g.height+g.top-this._startLocation.top});d(document.body).append(this._proxy)}finally{this._attachDocEvents();this._inProgress=true;h.stopPropagation()}}};f.prototype._onDocumentMouseMove=function(h){var g=this._step*Math.round((h.pageX-this._lastLocation.left)/this._step);this._lastLocation={left:this._lastLocation.left+g,top:h.pageY,width:undefined,height:undefined};this._proxy.css("left",this._lastLocation.left)};f.prototype._onDocumentMouseUp=function(g){try{document.body.style.cursor=this._docCursor;this._proxy.remove();if(this._startLocation!==this._lastLocation){this._wijgrid._fieldResized(this._hoveredField,this._startLocation.width,Math.max(this._lastLocation.left-this._startLocation.left,this.MIN_WIDTH))}}finally{this._hoveredField=null;this._proxy=null;this._detachDocEvents();this._inProgress=false}};f.prototype._onSelectStart=function(g){g.preventDefault()};f.prototype._attachDocEvents=function(){if(!this._inProgress){d(document).bind(this._eventKey("mousemove"),d.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),d.proxy(this._onDocumentMouseUp,this));if(d.fn.disableSelection){d(document.body).disableSelection()}if("onselectstart" in document){d(document.body).bind("selectstart",this._onSelectStart)}}};f.prototype._detachDocEvents=function(){if(this._inProgress){d(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp);if(d.fn.enableSelection){d(document.body).enableSelection()}if("onselectstart" in document){d(document.body).unbind("selectstart",this._onSelectStart)}}};f.prototype._getFieldByPos=function(h){var l,g,k,m,j;for(l=0,g=this._elements.length;l<g;l++){k=this._elements[l];m=b.grid.bounds(k.element);j=b.grid.isOver(h.y,h.x,m.top,m.left+m.width-this._gap,m.height,this._gap);if(j){return k}}return null};f.prototype._eventKey=function(g){return b.grid.stringFormat(this._evntFormat,g)};return f})();c.uiResizer=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g){this._scope_guid="scope_"+b.grid.getUID();this._dragEnd=false;this._wijgrid=g;this._wijCSS=this._wijgrid.options.wijCSS;this._wrapHtml='<div class="'+this._wijCSS.widget+" wijmo-wijgrid "+this._wijCSS.content+" "+this._wijCSS.cornerAll+'"><table class="wijmo-wijgrid-root wijmo-wijgrid-table"><tr class="wijmo-wijgrid-headerrow"></tr></table></div>'}f.prototype.attachGroupArea=function(h){var i,g=this;if(!(e.ui).droppable||!(e.ui).draggable){return}h.droppable({scope:this._scope_guid,tolerance:"pointer",greedy:true,accept:function(j){if(g._wijgrid.options.allowColMoving){i=g._getWijFieldInstance(j);if(i){if((i instanceof e.wijmo.c1groupedfield)&&(i.options.groupedIndex===g._wijgrid._groupedColumns().length-1)){return false}return !i.options.isBand&&(i.options.groupedIndex===undefined||(i instanceof e.wijmo.c1groupedfield))}}return false},drop:function(k,j){if(!g._isInElement(k,j.draggable)&&(i=g._getWijFieldInstance(j.draggable))){g._dragEnd=true}},over:function(l,k){var j=g._wijgrid._field("groupedWidgets").length;g._dropTargetRedirected=(j>0);g._droppableWijField=(j>0)?g._wijgrid._field("groupedWidgets")[j-1]:h;h.data("thisDroppableWijField",g._droppableWijField)},out:function(k,j){if(g._droppableWijField===h.data("thisDroppableWijField")){g._droppableWijField=null}}})};f.prototype.attach=function(j){var h,i,g=this;if(!(e.ui).droppable||!(e.ui).draggable){return}if(!j||!(h=j.element)){return}h.draggable({helper:function(k){if(j instanceof e.wijmo.c1groupedfield){return h.clone().addClass("wijmo-wijgrid-dnd-helper")}else{return h.clone().wrap(g._wrapHtml).width(h.width()).height(h.height()).closest(".wijmo-wijgrid").addClass("wijmo-wijgrid-dnd-helper")}},appendTo:"body",scope:g._scope_guid,drag:function(m,l){g._hideArrows();if(g._droppableWijField&&!g._isInElement(m,h)){var k=g._droppableWijField.element;if(!k){k=(g._droppableWijField)}g._showArrows(k,g._getPosition(j,g._droppableWijField,m,l))}},start:function(p,o){if(g._wijgrid._canInteract()&&g._wijgrid.options.allowColMoving&&!g._wijgrid._field("resizer").inProgress()){var n=j.options,l=j.options.travIdx,m=(j instanceof e.wijmo.c1groupedfield),k=m?"groupArea":"columns";if(m){n=b.grid.search(g._wijgrid.columns(),function(q){return q.options.travIdx===l});n=(!n.found)?b.grid.getColumnByTravIdx(g._wijgrid.options.columns,l).found:n.found.options}if(j._canDrag()&&g._wijgrid._trigger("columnDragging",null,{drag:n,dragSource:k})){g._wijgrid._trigger("columnDragged",null,{drag:n,dragSource:k});return true}}return false},stop:function(l,k){g._hideArrows();try{if(g._dragEnd){if(!g._droppableWijField.element){g._wijgrid._handleDragnDrop(j.options.travIdx,-1,"left",j instanceof e.wijmo.c1groupedfield,true)}else{g._wijgrid._handleDragnDrop(j.options.travIdx,g._droppableWijField.options.travIdx,g._getPosition(j,g._droppableWijField,l,k),j instanceof e.wijmo.c1groupedfield,g._droppableWijField instanceof e.wijmo.c1groupedfield)}}}finally{g._droppableWijField=null;g._dragEnd=false}}}).droppable({hoverClass:g._wijCSS.stateHover,scope:g._scope_guid,tolerance:"pointer",greedy:true,accept:function(k){if(g._wijgrid.options.allowColMoving){if(h[0]!==k[0]){i=g._getWijFieldInstance(k);if(i){return i._canDropTo(j)}}}return false},drop:function(l,k){if(i=g._getWijFieldInstance(k.draggable)){g._dragEnd=true}},over:function(l,k){g._dropTargetRedirected=false;g._droppableWijField=j;h.data("thisDroppableWijField",g._droppableWijField)},out:function(l,k){if(g._droppableWijField===j.element.data("thisDroppableWijField")){g._droppableWijField=null}}})};f.prototype.detach=function(h){var g;if(h&&(g=h.element)){if(g.data("ui-draggable")){g.draggable("destroy")}if(g.data("ui-droppable")){g.droppable("destroy")}}};f.prototype.dispose=function(){if(this._$topArrow){this._$topArrow.remove();this._$topArrow=null}if(this._$bottomArrow){this._$bottomArrow.remove();this._$bottomArrow=null}};f.prototype._getWijFieldInstance=function(g){var h=b.grid.widgetName(g);if(!h){throw"widgetName is undedined"}return g.data(h)};f.prototype._showArrows=function(h,g){this._topArrow().show().position({my:"center",at:g+" top",of:h,collision:"none"});this._bottomArrow().show().position({my:"center",at:g+" bottom",of:h,collision:"none"})};f.prototype._hideArrows=function(){this._topArrow().hide();this._bottomArrow().hide()};f.prototype._topArrow=function(){if(!this._$topArrow){this._$topArrow=e("<div />").addClass("wijmo-wijgrid-dnd-arrow-top").append(e("<span />").addClass(this._wijCSS.icon+" ui-icon-arrowthick-1-s")).hide().appendTo(document.body)}return this._$topArrow};f.prototype._bottomArrow=function(){if(!this._$bottomArrow){this._$bottomArrow=e("<div />").addClass("wijmo-wijgrid-dnd-arrow-bottom").append(e("<span />").addClass(this._wijCSS.icon+" ui-icon-arrowthick-1-n")).hide().appendTo(document.body)}return this._$bottomArrow};f.prototype._isInElement=function(i,g){var h=b.grid.bounds(g,false);return((i.pageX>h.left&&i.pageX<h.left+h.width)&&(i.pageY>h.top&&i.pageY<h.top+h.height))};f.prototype._getPosition=function(k,i,l,m){if(!i.element){return"left"}if(this._dropTargetRedirected){return"right"}var g=b.grid.bounds(i.element,false),n=g.width/6,j=g.left+(g.width/2),o="right",h;if(l.pageX<j){o="left"}if(i instanceof e.wijmo.c1groupedfield){if(k instanceof e.wijmo.c1groupedfield){h=i.options.groupedIndex-k.options.groupedIndex;if(Math.abs(h)===1){o=(h<0)?"left":"right"}}return o}h=i.options.linearIdx-k.options.linearIdx;if(i.options.isBand&&(k.options.parentIdx!==i.options.travIdx)&&(Math.abs(l.pageX-j)<n)){return"center"}if(k.options.parentIdx===i.options.parentIdx&&Math.abs(h)===1){o=(h<0)?"left":"right"}return o};return f})();d.uiDragndrop=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(){function f(g){if(!g){throw"invalid arguments"}this._wijgrid=g}f.prototype.format=function(r,q,l,g,h,p,k){var j=b.grid.renderState,i=b.grid.rowType,n=g.type,o,m=null;if(q===0&&this._wijgrid._showRowHeader()){l=null}if(n===i.groupHeader||n===i.groupFooter){l=null;if(p&&(m=p.groupInfo)){l=this._wijgrid._field("leaves")[m.leafIndex];delete p.groupInfo}}o={$cell:r,state:h,row:g,column:l,_cellIndex:q,_purpose:m?m.purpose:undefined};if(h===j.rendering){this._renderingStateFormatter(o,p,k)}else{this._currentStateFormatter(o,h&j.current);this._selectedStateFormatter(o,h&j.selected)}if(e.isFunction(this._wijgrid.options.cellStyleFormatter)){this._wijgrid.options.cellStyleFormatter(o)}};f.prototype._renderingStateFormatter=function(i,m,l){var g=b.grid.rowType,j,n,h=i.column,k=i.row.type;switch(k){case g.header:i.$cell.addClass("wijgridth");break;default:i.$cell.addClass("wijgridtd")}if((k&g.data)&&h&&h.textAlignment){switch(h.textAlignment.toLowerCase()){case"left":i.$cell.addClass("wijalign-left");break;case"right":i.$cell.addClass("wijalign-right");break;case"center":i.$cell.addClass("wijalign-center");break}}if(m){for(j in m){if(m.hasOwnProperty(j)){n=m[j];if((j==="colSpan"||j==="rowSpan")&&!(n>1)){continue}if(j==="class"){i.$cell.addClass(n)}else{i.$cell.attr(j,n)}}}}if(l){for(j in l){if(l.hasOwnProperty(j)){if(j==="paddingLeft"){i.$cell.children(".wijmo-wijgrid-innercell").css(j,l[j]);continue}i.$cell.css(j,l[j])}}}if(i._cellIndex===0&&this._wijgrid._showRowHeader()){i.$cell.attr({role:"rowheader",scope:"row"}).addClass(this._wijgrid.options.wijCSS.stateDefault+" "+this._wijgrid.options.wijCSS.content+" wijmo-wijgrid-rowheader")}else{switch(k){case (g.header):i.$cell.attr({role:"columnheader",scope:"col"});break;case (g.footer):i.$cell.attr({role:"columnfooter",scope:"col"});break;default:i.$cell.attr("role","gridcell")}}if(k&g.data){if(i._cellIndex>=0&&h){i.$cell.attr("headers",(window).escape(h.headerText));if(h.readOnly){i.$cell.attr("aria-readonly",true)}if(h.dataIndex>=0){i.$cell.addClass("wijdata-type-"+b.grid.getDataType(h))}}}if(k===g.groupHeader||k===g.groupFooter){if(h&&i._purpose===b.grid.groupRowCellPurpose.aggregateCell){i.$cell.addClass("wijdata-type-"+b.grid.getDataType(h))}}};f.prototype._currentStateFormatter=function(h,i){var g=b.grid.rowType;if(i){h.$cell.addClass(this._wijgrid.options.wijCSS.stateActive);if(h.row.type===g.header){h.$cell.addClass("wijmo-wijgrid-current-headercell")}else{h.$cell.addClass("wijmo-wijgrid-current-cell")}}else{h.$cell.removeClass(this._wijgrid.options.wijCSS.stateActive);if(h.row.type===g.header){h.$cell.removeClass("wijmo-wijgrid-current-headercell")}else{h.$cell.removeClass("wijmo-wijgrid-current-cell")}}};f.prototype._hoveredStateFormatter=function(g,h){if(h){}else{}};f.prototype._selectedStateFormatter=function(g,h){if(h){g.$cell.addClass(this._wijgrid.options.wijCSS.stateHightlight).attr("aria-selected","true")}else{g.$cell.removeClass(this._wijgrid.options.wijCSS.stateHightlight).removeAttr("aria-selected")}};return f})();c.cellStyleFormatterHelper=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(g){if(!g){throw"invalid arguments"}this._wijgrid=g}f.prototype.format=function(m,h,j){var i=b.grid.renderState,g=b.grid.rowType,l=m.state,k=m;if(l===i.rendering){this._renderingStateFormatter(k,h,j)}else{this._currentStateFormatter(k,(l&i.current)!==0);this._hoveredStateFormatter(k,(l&i.hovered)!==0);this._selectedStateFormatter(k,(l&i.selected)!==0)}if(d.isFunction(this._wijgrid.options.rowStyleFormatter)){this._wijgrid.options.rowStyleFormatter(k)}};f.prototype._renderingStateFormatter=function(k,h,i){var m="wijmo-wijgrid-row "+this._wijgrid.options.wijCSS.content,j="wijmo-wijgrid-row "+this._wijgrid.options.wijCSS.content,g=b.grid.rowType,l;k.$rows.attr("role","row");if(h){for(l in h){if(h.hasOwnProperty(l)){if(l==="class"){k.$rows.addClass(h[l])}else{k.$rows.attr(l,h[l]);if(k.$rows[0].style.height){k.$rows.each(function(){d.data(this,"customHeight",this.style.height);return true})}}}}}if(i){for(l in i){if(i.hasOwnProperty(l)){k.$rows.css(l,i[l])}}}switch(k.type&~g.dataAlt){case (g.header):m="wijmo-wijgrid-headerrow";break;case (g.data):m=j+" wijmo-wijgrid-datarow";if(k.type&g.dataAlt){m+=" wijmo-wijgrid-alternatingrow"}break;case (g.emptyDataRow):m=j+" wijmo-wijgrid-emptydatarow";break;case (g.filter):m="wijmo-wijgrid-filterrow";break;case (g.groupHeader):m=j+" wijmo-wijgrid-groupheaderrow";break;case (g.groupFooter):m=j+" wijmo-wijgrid-groupfooterrow";break;case (g.footer):m="wijmo-wijgrid-footerrow "+this._wijgrid.options.wijCSS.stateHightlight;break;default:throw b.grid.stringFormat("unknown rowType: {0}",k.type)}k.$rows.addClass(m)};f.prototype._currentStateFormatter=function(h,g){if(this._wijgrid._showRowHeader()){if(g){d((h.$rows[0]).cells[0]).addClass(this._wijgrid.options.wijCSS.stateActive+" wijmo-wijgrid-current-rowheadercell")}else{d((h.$rows[0]).cells[0]).removeClass(this._wijgrid.options.wijCSS.stateActive+" wijmo-wijgrid-current-rowheadercell")}}};f.prototype._hoveredStateFormatter=function(h,g){if(g){h.$rows.addClass(this._wijgrid.options.wijCSS.stateHover)}else{h.$rows.removeClass(this._wijgrid.options.wijCSS.stateHover)}};f.prototype._selectedStateFormatter=function(h,g){if(g){}else{}};return f})();c.rowStyleFormatterHelper=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(){this._sum=0;this._sum2=0;this._cntNumbers=0;this._cntStrings=0;this._cntDates=0;this._max=0;this._min=0;this._minDate=0;this._maxDate=0}f.prototype.add=function(h){if(h===null||h===""){return}var i,g=(h instanceof Date)?"datetime":typeof(h);i=h.toString();if(this._cntStrings++===0){this._minString=this._maxString=i}if(i<this._minString){this._minString=i}if(i>this._maxString){this._maxString=i}if(g==="number"){if(this._cntNumbers++===0){this._min=this._max=h}this._sum+=h;this._sum2+=h*h;if(h<this._min){this._min=h}if(h>this._max){this._max=h}}else{if(g==="datetime"){i=h.getTime();if(this._cntDates++===0){this._minDate=this._maxDate=i}if(i<this._minDate){this._minDate=i}if(i>this._maxDate){this._maxDate=i}}}};f.prototype.getValueString=function(h){var g=h.owner;if(this._cntNumbers&&(h.dataType==="number"||h.dataType==="currency")){var i=this._getValue(h.aggregate);return g.toStr(h,i)}if(this._cntDates&&(h.dataType==="datetime")){switch(h.aggregate){case"max":return g.toStr(h,new Date(this._maxDate));case"min":return g.toStr(h,new Date(this._minDate));case"count":return this._cntStrings+""}}if(this._cntStrings){switch(h.aggregate){case"max":return this._maxString;case"min":return this._minString;case"count":return this._cntStrings+""}}return""};f.prototype._getValue=function(h){switch(h){case"average":return(this._cntNumbers===0)?0:this._sum/this._cntNumbers;case"count":return this._cntStrings;case"max":return this._max;case"min":return this._min;case"sum":return this._sum;case"std":if(this._cntNumbers<=1){return 0}return Math.sqrt(this._getValue("var"));case"stdPop":if(this._cntNumbers<=1){return 0}return Math.sqrt(this._getValue("varPop"));case"var":if(this._cntNumbers<=1){return 0}return this._getValue("varPop")*this._cntNumbers/(this._cntNumbers-1);case"vapPop":if(this._cntNumbers<=1){return 0}var g=this._sum/this._cntNumbers;return this._sum2/this._cntNumbers-g*g}return 0};return f})();d.tally=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g){this._docEventsUID="wijgridfrozener"+b.grid.getUID();this._docEventsAttached=false;this._newStaticIndex=-1;this._staticColumnIndex=-1;this._staticRowIndex=-1;this._staticOffsetH=0;this._staticOffsetV=0;this._inProgress=false;this._wijgrid=g;this.refresh()}f.prototype.inProgress=function(){return this._inProgress};f.prototype.refresh=function(){this.dispose();this._$outerDiv=this._wijgrid.outerDiv.find(".wijmo-wijgrid-fixedview");this._superPanel=(this._wijgrid._view())._getSuperPanel();this._staticOffsetH=this._wijgrid._getStaticOffsetIndex(false);this._staticOffsetV=this._wijgrid._getStaticOffsetIndex(true);this._staticColumnIndex=this._wijgrid._getStaticIndex(false);this._staticRowIndex=this._wijgrid._getStaticIndex(true);this._visibleBounds=this._wijgrid._view().getVisibleAreaBounds();var h=b.grid.bounds(this._$outerDiv.find(".wijmo-wijgrid-split-area-nw")),g=b.grid.bounds(this._$outerDiv);if(this._wijgrid.options.staticColumnsAlignment!=="right"||this._staticColumnIndex>=0){this._createVBar(this._visibleBounds,h,g)}if(!this._wijgrid._serverSideVirtualScrolling()){this._createHBar(this._visibleBounds,h,g)}};f.prototype.dispose=function(){if(this._$hBar){this._$hBar.remove();this._$hBar=null}if(this._$vBar){this._$vBar.remove();this._$vBar=null}if(this._$proxy){this._$proxy.remove();this._$proxy=null}this._$outerDiv=null;this._superPanel=null;this._detachDocEvents()};f.prototype._createVBar=function(k,j,g){var l=(this._wijgrid.options.staticColumnsAlignment!=="right"),i=l?j.width+j.left:j.left-2,h=this;if(i<=k.left+k.width){this._$vBar=e("<div><div></div></div>").addClass("wijmo-wijgrid-frozener-v").addClass(l?"":"not-allowed").css({left:i-g.left,top:j.top-g.top,height:k.height+k.top-j.top}).bind("mousedown",function(m){m.data=true;h._onBarMouseDown.apply(h,arguments)}).appendTo(this._$outerDiv);this._$vBar.find("div").addClass(this._wijgrid.options.wijCSS.header).css({width:0,height:"100%"})}};f.prototype._createHBar=function(k,j,g){var i=j.top+j.height,l=(this._wijgrid.options.staticColumnsAlignment!=="right"),h=this;if(i<=k.top+k.height){this._$hBar=e("<div><div></div></div>").addClass("wijmo-wijgrid-frozener-h").css({left:l?j.left-g.left:0,top:i-g.top,width:l?k.width+k.left-j.left:k.width}).bind("mousedown",function(m){m.data=false;h._onBarMouseDown.apply(h,arguments)}).appendTo(this._$outerDiv);this._$hBar.find("div").addClass(this._wijgrid.options.wijCSS.header).css({width:"100%",height:0})}};f.prototype._onBarMouseDown=function(g){if(this._wijgrid.options.disabled||(this._wijgrid.options.staticColumnsAlignment==="right"&&g.data)){return false}this._visibleBounds=this._wijgrid._view().getVisibleAreaBounds();this._newStaticIndex=g.data?this._staticColumnIndex:this._staticRowIndex;this._$proxy=e('<div class="wijmo-wijgrid-resizehandle '+this._wijgrid.options.wijCSS.header+'"></div>').appendTo(document.body);this._attachDocEvents(g.data);this._inProgress=true;g.stopPropagation()};f.prototype._onDocumentMouseMove=function(g){if(g.data&&this._superPanel.options.hScroller.scrollValue){(this._superPanel).hScrollTo(0)}else{if(!g.data&&this._superPanel.options.vScroller.scrollValue){(this._superPanel).vScrollTo(0)}}this._showPosition(g)};f.prototype._onDocumentMouseUp=function(g){try{if(this._$proxy){this._$proxy.remove()}this._detachDocEvents();if(g.data){if(this._newStaticIndex!==this._staticColumnIndex){this._wijgrid.option("staticColumnIndex",this._newStaticIndex)}}else{if(this._newStaticIndex!==this._staticRowIndex){this._wijgrid.option("staticRowIndex",this._newStaticIndex)}}}finally{this._$proxy=null;this._inProgress=false}};f.prototype._attachDocEvents=function(g){if(!this._docEventsAttached){try{if(e.fn.disableSelection){e(document.body).disableSelection()}this._wijgrid._view().toggleDOMSelection(false);e(document).bind(this._docEventKey("mousemove"),g,e.proxy(this._onDocumentMouseMove,this)).bind(this._docEventKey("mouseup"),g,e.proxy(this._onDocumentMouseUp,this))}finally{this._docEventsAttached=true}}};f.prototype._detachDocEvents=function(){if(this._docEventsAttached){try{if(e.fn.enableSelection){e(document.body).enableSelection()}this._wijgrid._view().toggleDOMSelection(true);e(document).unbind("."+this._docEventsUID)}finally{this._docEventsAttached=false}}};f.prototype._docEventKey=function(g){return b.grid.stringFormat("{0}.{1}",g,this._docEventsUID)};f.prototype._showPosition=function(l){var i,o,h,n,p,m,j,g,k=(this._wijgrid.options.staticColumnsAlignment!=="right");if(l.data){g=b.grid.bounds(this._$vBar);if(Math.abs(l.pageX-(g.left+g.width/2))<g.width){this._$proxy.hide();return}if((i=this._getFieldByPos({x:l.pageX,y:l.pageY}))){o=b.grid.bounds(i.element);h=o.left+o.width/2;n=i.options.visLeavesIdx-this._staticOffsetV;p=Math.max(n-1,-1);m=l.pageX<h?(p!==this._staticColumnIndex):(n===this._staticColumnIndex);j=m?o.left:o.left+o.width;if(!b.grid.isOverAxis(j,this._visibleBounds.left-1,this._visibleBounds.width+2)){return}this._newStaticIndex=m?p:n;this._$proxy.show().css({left:j,top:o.top,width:3,height:this._visibleBounds.height+this._visibleBounds.top-o.top})}}else{g=b.grid.bounds(this._$hBar);if(Math.abs(l.pageY-(g.top+g.height/2))<g.height){this._$proxy.hide();return}if((i=this._getRowByPos({x:l.pageX,y:l.pageY}))){o=b.grid.bounds(i);h=o.top+o.height/2;n=this._wijgrid._view().getAbsoluteRowIndex(i)-this._staticOffsetH;p=Math.max(n-1,-1);m=l.pageY<h?(p!==this._staticRowIndex):(n===this._staticRowIndex);j=m?o.top:o.top+o.height;if(!b.grid.isOverAxis(j,this._visibleBounds.top-1,this._visibleBounds.height+2)){return}this._newStaticIndex=m?p:n;this._$proxy.show().css({left:k?o.left:this._visibleBounds.left,top:j,width:k?this._visibleBounds.width+this._visibleBounds.left-o.left:this._visibleBounds.width,height:3})}}};f.prototype._getFieldByPos=function(n){var k=this._wijgrid.columns(),j,g,h,m,l;for(j=0,g=k.length;j<g;j++){h=k[j];m=h.options;if(m.isLeaf){l=b.grid.bounds(h.element);if(b.grid.isOverAxis(n.x,l.left,l.width)){return h}}}return null};f.prototype._getRowByPos=function(m){var k=this._wijgrid._rows(),h,g,l,j;for(h=0,g=k.length();h<g;h++){l=k.item(h)[0];j=b.grid.bounds(e(l));if(b.grid.isOverAxis(m.y,j.top,j.height)){return l}}return null};return f})();d.uiFrozener=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function i(){}i.generate=function g(m,l,k){switch(m){case"append":i._processAppendMode(l,k);break;case"merge":i._processMergeMode(l,k);break;case"none":break;default:throw b.grid.stringFormat('Unsupported value: "{0}"',m)}};i._processAppendMode=function h(m,l){var k={};b.grid.traverse(l,function(n){if(n.dynamic&&b.grid.validDataKey(n.dataKey)){k[n.dataKey]=true}});d.each(m,function(p,o){if(("name" in o)&&!k[o.name]){var n=i._createAutoField(o);l.push(n)}})};i._processMergeMode=function f(m,l){var n=[],k;b.grid.traverse(l,function(o){if(o.isLeaf&&!o.isBand){var p=o.dataKey;if(b.grid.validDataKey(p)){if(m[p]!==undefined){delete m[p]}}else{if(p!==null){n.push(o)}}}});if(n.length){k=0;d.each(m,function(p,q){var o=n[k++];if(o){o.dataKey=q.name;delete m[p]}})}d.each(m,function(p,q){var o=i._createAutoField(q);l.push(o)})};i._createAutoField=function j(k){return b.grid.createDynamicField({dataKey:k.name})};return i})();c.columnsGenerator=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(i,h,k){this._timer=0;this._timeout=50;this._ignoreScrollEvents=false;this._wijgrid=i;this._fixedAreaHeight=k;this._view=this._wijgrid._view();this._N=this._wijgrid._totalRowsCount();var j=20,g=this._wijgrid.outerDiv.height()+this._N*j;h.height(g-k-(this._N>0?j:0));this._view._splitAreas.sw.height(g)}f.prototype.attach=function(m){this._$scroller=m;this._panelInst=m.data("wijmo-wijsuperpanel");var i,l=m.find(".wijmo-wijsuperpanel-contentwrapper:first"),j=(this._panelInst).getContentElement().height(),h=this._fixedAreaHeight+j,g=l.innerHeight(),k=(101/(this._N-1))*((h-g)/h);i=this._panelInst.options.vScroller;i.scrollSmallChange=k;this._panelInst.option("vScroller",i);m.bind("wijsuperpanelscrolled.wijgrid",d.proxy(this._onSuperpanelScrolled,this));m.bind("wijsuperpanelscrolling.wijgrid",d.proxy(this._onSuperpanelScrolling,this));m.bind("wijsuperpanelscrolled.wijgrid",d.proxy(this._onSuperpanelPostScrolled,this))};f.prototype.dispose=function(){this._$scroller.unbind(".wijgrid");this._clearTimer()};f.prototype._clearTimer=function(){window.clearTimeout(this._timer);this._timer=0};f.prototype._onSuperpanelScrolling=function(h,g){if(this._ignoreScrollEvents||(g.dir!=="v")){return}if(this._timer===-1){return false}};f.prototype._onSuperpanelScrolled=function(i,h){var g=this;if(this._ignoreScrollEvents||(h.dir!=="v")){return}if(this._timer>0){this._clearTimer()}if(this._timer!==-1){this._timer=window.setTimeout(function(){g._timer=-1;var k=Math.round(h.newValue/g._panelInst.options.vScroller.scrollSmallChange),j=g._view._bounds.start;if(k<0){k=0}if(k>=g._N){k=g._N-1}if(k!==j){g._wijgrid._handleVirtualScrolling(k,d.proxy(g._scrollingCompleted,g))}else{g._log();g._clearTimer()}},this._timeout)}};f.prototype._scrollingCompleted=function(g){this._wijgrid._trackScrollingIndex(g);this._log();this._clearTimer()};f.prototype._onSuperpanelPostScrolled=function(){if(d.isFunction(this._postScrolled)){this._postScrolled.apply(this,arguments)}};f.prototype._log=function(){};return f})();c.uiVirtualScroller=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(a){(function(e){var d=jQuery,g=Globalize;function f(m,k,j,i){var h=m;i=d.extend({nullString:"",format:""},i);function l(n){i.parser=i.parser||e.defaultParsers[n];if(!i.parser&&m!=null){e.errors.noParser(n)}return i.parser}k=k||m!=null&&typeof m;j=j||k;if(!j){return m}if(j=="string"){l(k);if(!i.parser){return m}return i.parser.toStr(m,i.culture,i.format,i.nullString,true)}l(j);if(!i.parser){return m}m=i.parser.parse(m,i.culture,i.format,i.nullString,true);if(isNaN(m)&&m!=null&&e.util.isNumeric(m)){if(i.ignoreError){return h}e.errors.cantConvert(j,h)}return m}e.convert=f;e.defaultParsers={string:{parse:function(k,j,l,i,h){switch(k){case null:return null;case i:if(h){return null}case undefined:case"&nbsp":return"";default:return""+k}},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return""+k}},number:{parse:function(l,j,m,i,h){var k=typeof(l);if(k==="number"){return isNaN(l)?NaN:l}if((!l&&l!==0)||(l==="&nbsp;")||(l===i&&h)){return null}return g.parseFloat(l,10,j.name)},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return g.format(k,l||"n",j.name)}},currency:{parse:function(l,j,m,i,h){var k=typeof(l);if(k==="number"){return isNaN(l)?NaN:l}if((!l&&l!==0)||(l==="&nbsp;")||(l===i&&h)){return null}if(k==="string"){l=l.replace(j.numberFormat.currency.symbol,"")}return g.parseFloat(l,10,j.name)},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return g.format(k,l||"c",j.name)}},datetime:{parse:function(m,j,n,i,h){var l;if(m instanceof Date){return m}if(!m||(m==="&nbsp;")||(m===i&&h)){return null}l=/^\/Date\((\d+)\)\/$/.exec(m);if(l){return new Date(parseInt(l[1],10))}var k=g.parseDate(m,n,j.name);if(k==null||isNaN(k)){k=Date.parse(m);k=isNaN(k)?NaN:new Date(k)}return k},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return g.format(k,l||"d",j.name)}},"boolean":{parse:function(k,j,l,i,h){var m=typeof(k);if(m==="number"){return k!=0}if(m==="boolean"){return k}if(m==="string"){k=d.trim(k)}if(!k||(k==="&nbsp;")||(k===i&&h)){return null}switch(k.toLowerCase()){case"true":return true;case"false":return false}return NaN},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return(k)?"true":"false"}}};function c(h){return function(){if(!g){e.util.logError(e.errors.noGlobalize.create().message)}return h.apply(this,arguments)}}d.each(e.defaultParsers,function(h,i){i.parse=i.parse&&c(i.parse);i.toStr=i.toStr&&c(i.toStr)})})(a.data||(a.data={}));var b=a.data})(wijmo||(wijmo={}));var wijmo;(function(a){(function(c){(function(f){(function(g){g.Connective={AND:"and",OR:"or"};function i(l){function k(o){var m=[];if(o.length===0){return m}var n=g.Connective.AND;c.util.each(o,function(q,r){if(q==0&&c.util.isString(r)){var s=r.toLowerCase();if(s==g.Connective.AND||s==g.Connective.OR){n=s;return}}if($.isArray(r)){r=k(r);if(!r){return}if(r[0]===n||r.length==2){r.shift();m=m.concat(r);return}}else{var p=f.normalizeCondition(r);if(!p){return}p.property=r.property;r=p}m.push(r)});if(m.length==0){return null}else{m.unshift(n);return m}}return k(l)}function j(l){if(!$.isArray(l)){return null}var k={original:l,normalized:i(l),func:null};if(k.normalized==null){k.func=function(m){return true}}else{k.func=function(m){function n(q){var o=q[0]===g.Connective.AND,p=o?c.util.every:c.util.some;return p(q,function(s,r){if(r===0){return o}if($.isArray(s)){return n(s)}else{var t=c.util.getProperty(m,s.property);return s.op.apply(t,s.value)}})}return n(k.normalized)}}return k}function h(k){return j(k)||c.filtering.compile(k)}g.compile=h})(f.extended||(f.extended={}));var e=f.extended})(c.filtering||(c.filtering={}));var d=c.filtering})(a.data||(a.data={}));var b=a.data})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var g=jQuery;var f=b.data;var e=f.filtering.extended;var d=(function(){function i(j){this.real=j;this._updatingFilter=false;this._overrideFilter();this._makeMemberProxies()}i.prototype._overrideFilter=function(){var j=this;this.filter=f.observable(this.real.filter());this.filter.subscribe(function(k){if(j.real.filter()!==k&&!j._updatingFilter){j.refresh({filter:k})}});this.real.filter.subscribe(function(k){if(k!==j._lastSetFilter){j.filter(k)}})};i.prototype.refresh=function(j,l){if(typeof l==="undefined"){l=false}j=g.extend({},j);var k=j.filter;j.filter=this._coerceFilter(j.filter);this._lastSetFilter=j.filter;this._updatingFilter=true;try{if(g.isFunction(j.filter)&&!g.isFunction(k)){this.filter(k)}else{this.filter(j.filter)}}finally{this._updatingFilter=false}return this.real.refresh(j,l)};i.prototype._makeMemberProxies=function(){var j=this;f.util.each(this.real,function(k,l){if(!g.isFunction(l)||j[k]||k.charAt(0)==="_"){return}j[k]=g.isFunction(l.subscribe)?l:function(){return l.apply(j.real,arguments)}})};i.create=function h(j){return new i(j)};i.prototype._convertComplexPropertyFilterToExtendedFilterFormat=function(k){var j=[];g.each(k,function(o,l){if(!g.isArray(l)){l=[l]}else{var m=f.util.isString(l[0])&&l[0].toLowerCase();if(m===e.Connective.AND||m===e.Connective.OR){j.push(l);return}}var n=[];g.each(l,function(q,r){var p=f.filtering.normalizeCondition(r);if(p){p.property=o;n.push(p)}});if(n.length>0){j.push(n)}});return j.length>0?j:null};i.prototype._coerceFilter=function(j){if(g.isArray(j)){return e.compile(j).func}else{if(!g.isPlainObject(j)){return j}}j=g.extend(true,{},j);var l={};g.each(j,function(o,m){if(!g.isArray(m)){m=[m]}if(l){var n=f.util.isString(m[0])&&m[0].toLowerCase();if(m.length==1||m.length==2&&(n==="and"||n==="or")){l[o]=m[m.length-1];return}}j[o]=m;l=null});if(l){return l}var k=this._convertComplexPropertyFilterToExtendedFilterFormat(j);return e.compile(k).func};i.prototype._unsafeReplace=function(j,k){(this.real).sourceArray[j]=k;(this.real).local[j]=k};i.prototype._unsafeSplice=function(j,l,k){if(arguments.length===2){(this.real).sourceArray.splice(j,l);(this.real).local.splice(j,l)}else{(this.real).sourceArray.splice(j,l,k);(this.real).local.splice(j,l,k)}};i.prototype._unsafePush=function(j){(this.real).sourceArray.push(j);(this.real).local.push(j)};return i})();c.GridDataView=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));