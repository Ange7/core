/*
 *
 * Wijmo Library 2.1.0
 * http://wijmo.com/
 *
 * Copyright(c) ComponentOne, LLC.  All rights reserved.
 *
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * licensing@wijmo.com
 * http://www.wijmo.com/license
 *
 **/
(function(d){var c=0,b=0;function e(){return ++c}function a(){return ++b}d.widget("wijmo.wijtabs",{options:{alignment:"top",sortable:false,scrollable:false,ajaxOptions:null,cache:false,cookie:null,collapsible:false,hideOption:null,showOption:null,disabledIndexes:[],event:"click",idPrefix:"ui-tabs-",panelTemplate:"",spinner:"",tabTemplate:"",add:null,remove:null,select:null,beforeShow:null,show:null,load:null,disable:null,enable:null},_defaults:{panelTemplate:"<div></div>",spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'},_create:function(){this._tabify(true)},_setOption:function(f,g){d.Widget.prototype._setOption.apply(this,arguments);switch(f){case"selected":if(this.options.collapsible&&g==this.options.selected){return}this.select(g);break;case"alignment":this.destroy();this._tabify(true);break;default:this._tabify();break}},_initScroller:function(){var g=d.inArray(this._getAlignment(),["top","bottom"])!=-1;if(!g){return}var f=0;this.lis.each(function(){f+=d(this).outerWidth(true)});if(!!this.options.scrollable&&this.element.innerWidth()<f){if(this.scrollWrap===undefined){this.list.wrap("<div class='scrollWrap'></div>");this.scrollWrap=this.list.parent();d.effects.save(this.list,["width","height","overflow"])}this.list.width(f+2);this.scrollWrap.height(this.list.outerHeight(true));this.scrollWrap.wijsuperpanel({allowResize:false,hScroller:{scrollMode:"edge"},vScroller:{scrollBarVisibility:"hidden"}})}else{this._removeScroller()}},_removeScroller:function(){if(this.scrollWrap){this.scrollWrap.wijsuperpanel("destroy").replaceWith(this.scrollWrap.contents());this.scrollWrap=undefined;d.effects.restore(this.list,["width","height","overflow"])}},_tabId:function(f){return f.title&&f.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+e()},_sanitizeSelector:function(f){return f.replace(/:/g,"\\:")},_cookie:function(){var f=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+a());return d.cookie.apply(null,[f].concat(d.makeArray(arguments)))},_ui:function(g,f){return{tab:g,panel:f,index:this.anchors.index(g)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var f=d(this);f.html(f.data("label.tabs")).removeData("label.tabs")})},_getAlignment:function(f){f=f===undefined?true:f;var g=this.options.alignment||"top";if(f){return g}switch(g){case"top":g="bottom";break;case"bottom":g="top";break;case"left":g="right";break;case"right":g="left";break}return g},_saveLayout:function(){var g=["width","height","overflow"];d.effects.save(this.element,g);d.effects.save(this.list,g);d.effects.save(this.element.find(".wijmo-wijtabs-content"),g);this.list.width(this.list.width());var f=this.panels.filter(":not(.ui-tabs-hide)");this.element.data("panel.width",f.width());this.element.data("panel.outerWidth",f.outerWidth(true))},_restoreLayout:function(){var f=["width","height","overflow"];d.effects.restore(this.element,f);d.effects.restore(this.list,f);d.effects.restore(this.element.find(".wijmo-wijtabs-content"),f)},_hideContent:function(){var f=this.element.find(".wijmo-wijtabs-content");if(f.length){this._saveLayout();f.addClass("ui-tabs-hide").attr("aria-hidden",true);this.element.width(this.list.outerWidth(true))}},_showContent:function(){var f=this.element.find(".wijmo-wijtabs-content");if(f.length){this._restoreLayout();f.removeClass("ui-tabs-hide").attr("aria-hidden",false)}},_blindPanel:function(f,j){var h=this.options;var k=f.parent(".wijmo-wijtabs-content");if(!k.length){return}this.list.width(this.list.width());var l=["position","top","left","width"];d.effects.save(f,l);f.show();if(j=="show"){f.removeClass("ui-tabs-hide").attr("aria-hidden",false);f.width(this.element.data("panel.width"))}else{f.width(f.width())}var i=j=="show"?h.showOption:h.hideOption;var g=d.effects.createWrapper(f).css({overflow:"hidden"});if(j=="show"){g.css(d.extend({width:0},i.fade?{opacity:0}:{}))}var n=d.extend({width:j=="show"?this.element.data("panel.outerWidth"):0},i.fade?{opacity:j=="show"?1:0}:{});var p=this;var m=this.list.outerWidth(true);g.animate(n,{duration:i.duration,step:function(){var o=g.outerWidth(true);p.element.width(m+o);k.width(Math.max(0,p.element.innerWidth()-m-6))},complete:function(){if(j=="hide"){p.lis.removeClass("ui-tabs-selected ui-state-active").attr("aria-selected",false);f.addClass("ui-tabs-hide").attr("aria-hidden",true)}else{f.css("width","")}d.effects.removeWrapper(f);if(j=="show"){p._restoreLayout()}p._resetStyle(f);f.dequeue();p.element.dequeue("tabs")}})},_resetStyle:function(f){f.css({display:""});if(!d.support.opacity){f[0].style.removeAttribute("filter")}},_normalizeBlindOption:function(g){if(g.blind===undefined){g.blind=false}if(g.fade===undefined){g.fade=false}if(g.duration===undefined){g.duration=200}if(typeof g.duration=="string"){try{g.duration=parseInt(g.duration,10)}catch(f){g.duration=200}}},_tabify:function(s){this.list=this.element.children("ol,ul").eq(0);this.lis=d("li:has(a)",this.list);this.anchors=this.lis.map(function(){return d("a",this)[0]});this.panels=d([]);var t=this,g=this.options;var f=/^#.+/;this.anchors.each(function(v,o){var u=d(o).attr("href")||"";var w=u.split("#")[0],x;if(w&&(w===location.toString().split("#")[0]||(x=d("base")[0])&&w===x.href)){u=o.hash;o.href=u}if(f.test(u)){t.panels=t.panels.add(t._sanitizeSelector(u))}else{if(u!="#"){d.data(o,"href.tabs",u);d.data(o,"load.tabs",u.replace(/#.*$/,""));var z=t._tabId(o);o.href="#"+z;var y=d("#"+z);if(!y.length){y=d(g.panelTemplate||t._defaults.panelTemplate).attr("id",z).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(t.panels[v-1]||t.list);y.data("destroy.tabs",true)}t.panels=t.panels.add(y)}else{g.disabledIndexes.push(v)}}});var n=this._getAlignment(),k=this._getAlignment(false);if(s){this.list.attr("role","tablist");this.lis.attr("role","tab");this.panels.attr("role","tabpanel");this.element.addClass("ui-tabs wijmo-wijtabs ui-tabs-"+n+" ui-widget ui-widget-content ui-corner-all ui-helper-clearfix");this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-"+n);this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-"+k);var l;switch(n){case"bottom":this.list.appendTo(this.element);break;case"left":l=d("<div/>").addClass("wijmo-wijtabs-content").appendTo(this.element);this.panels.appendTo(l);break;case"right":l=d("<div/>").addClass("wijmo-wijtabs-content").insertBefore(this.list);this.panels.appendTo(l);break;case"top":this.list.prependTo(this.element);break}if(g.sortable){this.list.sortable({axis:(n=="top"||n=="bottom")?"x":"y"})}if(g.selected===undefined){if(location.hash){this.anchors.each(function(u,o){if(o.hash==location.hash){g.selected=u;return false}})}if(typeof g.selected!="number"&&g.cookie){g.selected=parseInt(t._cookie(),10)}if(typeof g.selected!="number"&&this.lis.filter(".ui-tabs-selected").length){g.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}g.selected=g.selected||(this.lis.length?0:-1)}else{if(g.selected===null){g.selected=-1}}g.selected=((g.selected>=0&&this.anchors[g.selected])||g.selected<0)?g.selected:0;g.disabledIndexes=d.unique(g.disabledIndexes.concat(d.map(this.lis.filter(".ui-state-disabled"),function(u,o){return t.lis.index(u)}))).sort();if(d.inArray(g.selected,g.disabledIndexes)!=-1){g.disabledIndexes.splice(d.inArray(g.selected,g.disabledIndexes),1)}this.panels.addClass("ui-tabs-hide").attr("aria-hidden",true);this.lis.removeClass("ui-tabs-selected ui-state-active").attr("aria-selected",false);if(g.selected>=0&&this.anchors.length){this.panels.eq(g.selected).removeClass("ui-tabs-hide").attr("aria-hidden",false);this.lis.eq(g.selected).addClass("ui-tabs-selected ui-state-active").attr("aria-selected",true);t.element.queue("tabs",function(){t._trigger("show",null,t._ui(t.anchors[g.selected],t.panels[g.selected]))});this.load(g.selected)}d(window).bind("unload",function(){if(t.lis){t.lis.add(t.anchors).unbind(".tabs")}t.lis=t.anchors=t.panels=null})}else{g.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}this.element[g.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");if(g.cookie){this._cookie(g.selected,g.cookie)}for(var j=0,r;(r=this.lis[j]);j++){d(r)[d.inArray(j,g.disabledIndexes)!=-1&&!d(r).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");if(d(r).hasClass("ui-state-disabled")){d(r).attr("aria-disabled",true)}}if(g.cache===false){this.anchors.removeData("cache.tabs")}this.lis.add(this.anchors).unbind(".tabs");if(!g.disabledState&&g.event!="mouseover"){var h=function(o,i){if(i.is(":not(.ui-state-disabled)")){i.addClass("ui-state-"+o)}};var m=function(o,i){i.removeClass("ui-state-"+o)};this.lis.bind("mouseover.tabs",function(){h("hover",d(this))});this.lis.bind("mouseout.tabs",function(){m("hover",d(this))});this.anchors.bind("focus.tabs",function(){h("focus",d(this).closest("li"))});this.anchors.bind("blur.tabs",function(){m("focus",d(this).closest("li"))})}if(g.showOption===undefined||g.showOption===null){g.showOption={}}this._normalizeBlindOption(g.showOption);if(g.hideOption===undefined||g.hideOption===null){g.hideOption={}}this._normalizeBlindOption(g.hideOption);var p=((g.showOption.blind||g.showOption.fade)&&g.showOption.duration>0)?function(i,u){d(i).closest("li").addClass("ui-tabs-selected ui-state-active").attr("aria-selected",true);t._showContent();u.removeClass("ui-tabs-hide").attr("aria-hidden",false);if(n=="top"||n=="bottom"){var o={duration:g.showOption.duration};if(g.showOption.blind){o.height="toggle"}if(g.showOption.fade){o.opacity="toggle"}u.hide().removeClass("ui-tabs-hide").attr("aria-hidden",false).animate(o,g.showOption.duration||"normal",function(){t._resetStyle(u);t._trigger("show",null,t._ui(i,u[0]))})}else{t._showContent();t._blindPanel(u,"show")}}:function(i,o){d(i).closest("li").addClass("ui-tabs-selected ui-state-active").attr("aria-selected",true);t._showContent();o.removeClass("ui-tabs-hide").attr("aria-hidden",false);t._trigger("show",null,t._ui(i,o[0]))};var q=((g.hideOption.blind||g.hideOption.fade)&&g.hideOption.duration>0)?function(o,i){if(n=="top"||n=="bottom"){var u={duration:g.hideOption.duration};if(g.hideOption.blind){u.height="toggle"}if(g.hideOption.fade){u.opacity="toggle"}i.animate(u,g.hideOption.duration||"normal",function(){t.lis.removeClass("ui-tabs-selected ui-state-active").attr("aria-selected",false);i.addClass("ui-tabs-hide").attr("aria-hidden",true);t._resetStyle(i);t.element.dequeue("tabs")})}else{t._saveLayout();t._blindPanel(i,"hide")}}:function(o,i,u){t.lis.removeClass("ui-tabs-selected ui-state-active").attr("aria-selected",false);t._hideContent();i.addClass("ui-tabs-hide").attr("aria-hidden",true);t.element.dequeue("tabs")};if(!g.disabledState){this.anchors.bind(g.event+".tabs",function(){var o=this,v=d(this).closest("li"),i=t.panels.filter(":not(.ui-tabs-hide)"),u=d(t._sanitizeSelector(this.hash));if((v.hasClass("ui-tabs-selected")&&!g.collapsible)||v.hasClass("ui-state-disabled")||v.hasClass("ui-state-processing")||t._trigger("select",null,t._ui(this,u[0]))===false){this.blur();return false}g.selected=t.anchors.index(this);t.abort();if(g.collapsible){if(v.hasClass("ui-tabs-selected")){g.selected=-1;if(g.cookie){t._cookie(g.selected,g.cookie)}t.element.queue("tabs",function(){q(o,i)}).dequeue("tabs");this.blur();return false}else{if(!i.length){if(g.cookie){t._cookie(g.selected,g.cookie)}t.element.queue("tabs",function(){p(o,u)});t.load(t.anchors.index(this));this.blur();return false}}}if(g.cookie){t._cookie(g.selected,g.cookie)}if(u.length){if(i.length){t.element.queue("tabs",function(){q(o,i)})}t.element.queue("tabs",function(){p(o,u)});t.load(t.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}if(d.browser.msie){this.blur()}})}this._initScroller();this.anchors.bind("click.tabs",function(){return false})},destroy:function(){var g=this.options;this.abort();this._removeScroller();this.element.unbind(".tabs").removeClass(["wijmo-wijtabs","ui-tabs-top","ui-tabs-bottom","ui-tabs-left","ui-tabs-right","ui-tabs","ui-widget","ui-widget-content","ui-corner-all","ui-tabs-collapsible","ui-helper-clearfix"].join(" ")).removeData("tabs").removeAttr("role");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.each(function(){var h=d.data(this,"href.tabs");if(h){this.href=h}var i=d(this).unbind(".tabs");d.each(["href","load","cache"],function(j,k){i.removeData(k+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){if(d.data(this,"destroy.tabs")){d(this).remove()}else{d(this).removeClass(["ui-state-default","ui-corner-top","ui-corner-bottom","ui-corner-left","ui-corner-right","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-tabs-hide"].join(" ")).css({position:"",left:"",top:""}).removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-selected").removeAttr("aria-disabled")}});var f=this.element.find(".wijmo-wijtabs-content");if(f.length){f.replaceWith(f.contents())}if(g.cookie){this._cookie(null,g.cookie)}return this},add:function(g,n,k){if(k===undefined){k=this.anchors.length}var p=this,i=this.options,l=d((i.tabTemplate||p._defaults.tabTemplate).replace(/#\{href\}/g,g).replace(/#\{label\}/g,n)),h=!g.indexOf("#")?g.replace("#",""):this._tabId(d("a",l)[0]);var m=this._getAlignment(),j=this._getAlignment(false);l.addClass("ui-state-default ui-corner-"+m).data("destroy.tabs",true).attr("role","tab").attr("aria-selected",false);var q=d("#"+h);if(!q.length){q=d(i.panelTemplate||p._defaults.panelTemplate).attr("id",h).data("destroy.tabs",true).attr("role","tabpanel")}q.addClass("ui-tabs-panel ui-widget-content ui-corner-"+j+" ui-tabs-hide").attr("aria-hidden",true);if(k>=this.lis.length){l.appendTo(this.list);if(this.panels.length>0){q.insertAfter(this.panels[this.panels.length-1])}else{var f=this.element.find(".wijmo-wijtabs-content");if(f.length===0){f=this.element}q.appendTo(f)}}else{l.insertBefore(this.lis[k]);q.insertBefore(this.panels[k])}i.disabledIndexes=d.map(i.disabledIndexes,function(r,o){return r>=k?++r:r});this._removeScroller();this._tabify();if(this.anchors.length==1){i.selected=0;l.addClass("ui-tabs-selected ui-state-active").attr("aria-selected",true);q.removeClass("ui-tabs-hide").attr("aria-hidden",false);this.element.queue("tabs",function(){p._trigger("show",null,p._ui(p.anchors[0],p.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[k],this.panels[k]));return this},remove:function(f){var h=this.options,i=this.lis.eq(f).remove(),g=this.panels.eq(f).remove();if(i.hasClass("ui-tabs-selected")&&this.anchors.length>1){this.select(f+(f+1<this.anchors.length?1:-1))}h.disabledIndexes=d.map(d.grep(h.disabledIndexes,function(k,j){return k!=f}),function(k,j){return k>=f?--k:k});this._removeScroller();this._tabify();this._trigger("remove",null,this._ui(i.find("a")[0],g[0]));return this},enableTab:function(f){var g=this.options;if(d.inArray(f,g.disabledIndexes)==-1){return}this.lis.eq(f).removeClass("ui-state-disabled").removeAttr("aria-disabled");g.disabledIndexes=d.grep(g.disabledIndexes,function(j,h){return j!=f});this._trigger("enable",null,this._ui(this.anchors[f],this.panels[f]));return this},disableTab:function(g){var f=this,h=this.options;if(g!=h.selected){this.lis.eq(g).addClass("ui-state-disabled").attr("aria-disabled",true);h.disabledIndexes.push(g);h.disabledIndexes.sort();this._trigger("disable",null,this._ui(this.anchors[g],this.panels[g]))}return this},select:function(f){if(typeof f=="string"){f=this.anchors.index(this.anchors.filter("[href$="+f+"]"))}else{if(f===null){f=-1}}if(f==-1&&this.options.collapsible){f=this.options.selected}this.anchors.eq(f).trigger(this.options.event+".tabs");return this},load:function(i){var g=this,k=this.options,f=this.anchors.eq(i)[0],h=d.data(f,"load.tabs");this.abort();if(!h||this.element.queue("tabs").length!==0&&d.data(f,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(i).addClass("ui-state-processing");if(k.spinner||g._defaults.spinner){var j=d("span",f);j.data("label.tabs",j.html()).html(k.spinner||g._defaults.spinner)}this.xhr=d.ajax(d.extend({},k.ajaxOptions,{url:h,success:function(m,l){d(g._sanitizeSelector(f.hash)).html(m);g._cleanup();if(k.cache){d.data(f,"cache.tabs",true)}g._trigger("load",null,g._ui(g.anchors[i],g.panels[i]));try{k.ajaxOptions.success(m,l)}catch(n){}},error:function(o,l,n){g._cleanup();g._trigger("load",null,g._ui(g.anchors[i],g.panels[i]));try{k.ajaxOptions.error(o,l,i,f)}catch(m){}}}));g.element.dequeue("tabs");return this},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},url:function(g,f){this.anchors.eq(g).removeData("cache.tabs").data("load.tabs",f);return this},length:function(){return this.anchors.length}})})(jQuery);